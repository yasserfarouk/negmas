


<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    
    
    <meta http-equiv="X-UA-Compatible" content="IE=emulateIE7" />
    <title>Coverage for negmas/utilities.py: 61%</title>
    <link rel="stylesheet" href="style.css" type="text/css">
    
    <script type="text/javascript" src="jquery.min.js"></script>
    <script type="text/javascript" src="jquery.hotkeys.js"></script>
    <script type="text/javascript" src="jquery.isonscreen.js"></script>
    <script type="text/javascript" src="coverage_html.js"></script>
    <script type="text/javascript">
        jQuery(document).ready(coverage.pyfile_ready);
    </script>
</head>
<body class="pyfile">

<div id="header">
    <div class="content">
        <h1>Coverage for <b>negmas/utilities.py</b> :
            <span class="pc_cov">61%</span>
        </h1>

        <img id="keyboard_icon" src="keybd_closed.png" alt="Show keyboard shortcuts" />

        <h2 class="stats">
            991 statements &nbsp;
            <span class="run hide_run shortkey_r button_toggle_run">652 run</span>
            <span class="mis shortkey_m button_toggle_mis">339 missing</span>
            <span class="exc shortkey_x button_toggle_exc">5 excluded</span>

            
                <span class="par run hide_run shortkey_p button_toggle_par">94 partial</span>
            
        </h2>
    </div>
</div>

<div class="help_panel">
    <img id="panel_icon" src="keybd_open.png" alt="Hide keyboard shortcuts" />
    <p class="legend">Hot-keys on this page</p>
    <div>
    <p class="keyhelp">
        <span class="key">r</span>
        <span class="key">m</span>
        <span class="key">x</span>
        <span class="key">p</span> &nbsp; toggle line displays
    </p>
    <p class="keyhelp">
        <span class="key">j</span>
        <span class="key">k</span> &nbsp; next/prev highlighted chunk
    </p>
    <p class="keyhelp">
        <span class="key">0</span> &nbsp; (zero) top of page
    </p>
    <p class="keyhelp">
        <span class="key">1</span> &nbsp; (one) first highlighted chunk
    </p>
    </div>
</div>

<div id="source">
    <table>
        <tr>
            <td class="linenos">
<p id="n1" class="pln"><a href="#n1">1</a></p>
<p id="n2" class="pln"><a href="#n2">2</a></p>
<p id="n3" class="pln"><a href="#n3">3</a></p>
<p id="n4" class="pln"><a href="#n4">4</a></p>
<p id="n5" class="pln"><a href="#n5">5</a></p>
<p id="n6" class="pln"><a href="#n6">6</a></p>
<p id="n7" class="pln"><a href="#n7">7</a></p>
<p id="n8" class="pln"><a href="#n8">8</a></p>
<p id="n9" class="pln"><a href="#n9">9</a></p>
<p id="n10" class="pln"><a href="#n10">10</a></p>
<p id="n11" class="pln"><a href="#n11">11</a></p>
<p id="n12" class="pln"><a href="#n12">12</a></p>
<p id="n13" class="pln"><a href="#n13">13</a></p>
<p id="n14" class="pln"><a href="#n14">14</a></p>
<p id="n15" class="pln"><a href="#n15">15</a></p>
<p id="n16" class="pln"><a href="#n16">16</a></p>
<p id="n17" class="pln"><a href="#n17">17</a></p>
<p id="n18" class="pln"><a href="#n18">18</a></p>
<p id="n19" class="pln"><a href="#n19">19</a></p>
<p id="n20" class="pln"><a href="#n20">20</a></p>
<p id="n21" class="pln"><a href="#n21">21</a></p>
<p id="n22" class="stm run hide_run"><a href="#n22">22</a></p>
<p id="n23" class="stm run hide_run"><a href="#n23">23</a></p>
<p id="n24" class="stm run hide_run"><a href="#n24">24</a></p>
<p id="n25" class="stm run hide_run"><a href="#n25">25</a></p>
<p id="n26" class="stm run hide_run"><a href="#n26">26</a></p>
<p id="n27" class="stm run hide_run"><a href="#n27">27</a></p>
<p id="n28" class="stm run hide_run"><a href="#n28">28</a></p>
<p id="n29" class="stm run hide_run"><a href="#n29">29</a></p>
<p id="n30" class="pln"><a href="#n30">30</a></p>
<p id="n31" class="pln"><a href="#n31">31</a></p>
<p id="n32" class="pln"><a href="#n32">32</a></p>
<p id="n33" class="pln"><a href="#n33">33</a></p>
<p id="n34" class="pln"><a href="#n34">34</a></p>
<p id="n35" class="pln"><a href="#n35">35</a></p>
<p id="n36" class="pln"><a href="#n36">36</a></p>
<p id="n37" class="pln"><a href="#n37">37</a></p>
<p id="n38" class="pln"><a href="#n38">38</a></p>
<p id="n39" class="pln"><a href="#n39">39</a></p>
<p id="n40" class="pln"><a href="#n40">40</a></p>
<p id="n41" class="pln"><a href="#n41">41</a></p>
<p id="n42" class="pln"><a href="#n42">42</a></p>
<p id="n43" class="pln"><a href="#n43">43</a></p>
<p id="n44" class="stm run hide_run"><a href="#n44">44</a></p>
<p id="n45" class="pln"><a href="#n45">45</a></p>
<p id="n46" class="stm run hide_run"><a href="#n46">46</a></p>
<p id="n47" class="stm run hide_run"><a href="#n47">47</a></p>
<p id="n48" class="pln"><a href="#n48">48</a></p>
<p id="n49" class="stm run hide_run"><a href="#n49">49</a></p>
<p id="n50" class="stm run hide_run"><a href="#n50">50</a></p>
<p id="n51" class="stm run hide_run"><a href="#n51">51</a></p>
<p id="n52" class="stm run hide_run"><a href="#n52">52</a></p>
<p id="n53" class="stm run hide_run"><a href="#n53">53</a></p>
<p id="n54" class="stm run hide_run"><a href="#n54">54</a></p>
<p id="n55" class="stm run hide_run"><a href="#n55">55</a></p>
<p id="n56" class="pln"><a href="#n56">56</a></p>
<p id="n57" class="pln"><a href="#n57">57</a></p>
<p id="n58" class="pln"><a href="#n58">58</a></p>
<p id="n59" class="pln"><a href="#n59">59</a></p>
<p id="n60" class="pln"><a href="#n60">60</a></p>
<p id="n61" class="pln"><a href="#n61">61</a></p>
<p id="n62" class="pln"><a href="#n62">62</a></p>
<p id="n63" class="pln"><a href="#n63">63</a></p>
<p id="n64" class="pln"><a href="#n64">64</a></p>
<p id="n65" class="pln"><a href="#n65">65</a></p>
<p id="n66" class="pln"><a href="#n66">66</a></p>
<p id="n67" class="stm par run hide_run"><a href="#n67">67</a></p>
<p id="n68" class="stm mis"><a href="#n68">68</a></p>
<p id="n69" class="pln"><a href="#n69">69</a></p>
<p id="n70" class="pln"><a href="#n70">70</a></p>
<p id="n71" class="stm run hide_run"><a href="#n71">71</a></p>
<p id="n72" class="pln"><a href="#n72">72</a></p>
<p id="n73" class="pln"><a href="#n73">73</a></p>
<p id="n74" class="pln"><a href="#n74">74</a></p>
<p id="n75" class="pln"><a href="#n75">75</a></p>
<p id="n76" class="pln"><a href="#n76">76</a></p>
<p id="n77" class="pln"><a href="#n77">77</a></p>
<p id="n78" class="pln"><a href="#n78">78</a></p>
<p id="n79" class="pln"><a href="#n79">79</a></p>
<p id="n80" class="pln"><a href="#n80">80</a></p>
<p id="n81" class="pln"><a href="#n81">81</a></p>
<p id="n82" class="pln"><a href="#n82">82</a></p>
<p id="n83" class="pln"><a href="#n83">83</a></p>
<p id="n84" class="pln"><a href="#n84">84</a></p>
<p id="n85" class="pln"><a href="#n85">85</a></p>
<p id="n86" class="pln"><a href="#n86">86</a></p>
<p id="n87" class="pln"><a href="#n87">87</a></p>
<p id="n88" class="pln"><a href="#n88">88</a></p>
<p id="n89" class="pln"><a href="#n89">89</a></p>
<p id="n90" class="pln"><a href="#n90">90</a></p>
<p id="n91" class="pln"><a href="#n91">91</a></p>
<p id="n92" class="pln"><a href="#n92">92</a></p>
<p id="n93" class="pln"><a href="#n93">93</a></p>
<p id="n94" class="pln"><a href="#n94">94</a></p>
<p id="n95" class="pln"><a href="#n95">95</a></p>
<p id="n96" class="pln"><a href="#n96">96</a></p>
<p id="n97" class="stm run hide_run"><a href="#n97">97</a></p>
<p id="n98" class="pln"><a href="#n98">98</a></p>
<p id="n99" class="pln"><a href="#n99">99</a></p>
<p id="n100" class="pln"><a href="#n100">100</a></p>
<p id="n101" class="stm run hide_run"><a href="#n101">101</a></p>
<p id="n102" class="pln"><a href="#n102">102</a></p>
<p id="n103" class="pln"><a href="#n103">103</a></p>
<p id="n104" class="pln"><a href="#n104">104</a></p>
<p id="n105" class="stm run hide_run"><a href="#n105">105</a></p>
<p id="n106" class="pln"><a href="#n106">106</a></p>
<p id="n107" class="stm run hide_run"><a href="#n107">107</a></p>
<p id="n108" class="pln"><a href="#n108">108</a></p>
<p id="n109" class="pln"><a href="#n109">109</a></p>
<p id="n110" class="pln"><a href="#n110">110</a></p>
<p id="n111" class="stm run hide_run"><a href="#n111">111</a></p>
<p id="n112" class="pln"><a href="#n112">112</a></p>
<p id="n113" class="stm run hide_run"><a href="#n113">113</a></p>
<p id="n114" class="pln"><a href="#n114">114</a></p>
<p id="n115" class="pln"><a href="#n115">115</a></p>
<p id="n116" class="stm run hide_run"><a href="#n116">116</a></p>
<p id="n117" class="pln"><a href="#n117">117</a></p>
<p id="n118" class="pln"><a href="#n118">118</a></p>
<p id="n119" class="pln"><a href="#n119">119</a></p>
<p id="n120" class="stm run hide_run"><a href="#n120">120</a></p>
<p id="n121" class="pln"><a href="#n121">121</a></p>
<p id="n122" class="pln"><a href="#n122">122</a></p>
<p id="n123" class="pln"><a href="#n123">123</a></p>
<p id="n124" class="pln"><a href="#n124">124</a></p>
<p id="n125" class="pln"><a href="#n125">125</a></p>
<p id="n126" class="pln"><a href="#n126">126</a></p>
<p id="n127" class="stm run hide_run"><a href="#n127">127</a></p>
<p id="n128" class="pln"><a href="#n128">128</a></p>
<p id="n129" class="pln"><a href="#n129">129</a></p>
<p id="n130" class="pln"><a href="#n130">130</a></p>
<p id="n131" class="pln"><a href="#n131">131</a></p>
<p id="n132" class="pln"><a href="#n132">132</a></p>
<p id="n133" class="pln"><a href="#n133">133</a></p>
<p id="n134" class="pln"><a href="#n134">134</a></p>
<p id="n135" class="pln"><a href="#n135">135</a></p>
<p id="n136" class="pln"><a href="#n136">136</a></p>
<p id="n137" class="pln"><a href="#n137">137</a></p>
<p id="n138" class="pln"><a href="#n138">138</a></p>
<p id="n139" class="pln"><a href="#n139">139</a></p>
<p id="n140" class="pln"><a href="#n140">140</a></p>
<p id="n141" class="stm run hide_run"><a href="#n141">141</a></p>
<p id="n142" class="pln"><a href="#n142">142</a></p>
<p id="n143" class="pln"><a href="#n143">143</a></p>
<p id="n144" class="pln"><a href="#n144">144</a></p>
<p id="n145" class="pln"><a href="#n145">145</a></p>
<p id="n146" class="pln"><a href="#n146">146</a></p>
<p id="n147" class="stm run hide_run"><a href="#n147">147</a></p>
<p id="n148" class="stm run hide_run"><a href="#n148">148</a></p>
<p id="n149" class="stm run hide_run"><a href="#n149">149</a></p>
<p id="n150" class="pln"><a href="#n150">150</a></p>
<p id="n151" class="stm run hide_run"><a href="#n151">151</a></p>
<p id="n152" class="pln"><a href="#n152">152</a></p>
<p id="n153" class="pln"><a href="#n153">153</a></p>
<p id="n154" class="pln"><a href="#n154">154</a></p>
<p id="n155" class="pln"><a href="#n155">155</a></p>
<p id="n156" class="pln"><a href="#n156">156</a></p>
<p id="n157" class="pln"><a href="#n157">157</a></p>
<p id="n158" class="pln"><a href="#n158">158</a></p>
<p id="n159" class="stm mis"><a href="#n159">159</a></p>
<p id="n160" class="pln"><a href="#n160">160</a></p>
<p id="n161" class="stm run hide_run"><a href="#n161">161</a></p>
<p id="n162" class="stm run hide_run"><a href="#n162">162</a></p>
<p id="n163" class="pln"><a href="#n163">163</a></p>
<p id="n164" class="pln"><a href="#n164">164</a></p>
<p id="n165" class="pln"><a href="#n165">165</a></p>
<p id="n166" class="pln"><a href="#n166">166</a></p>
<p id="n167" class="pln"><a href="#n167">167</a></p>
<p id="n168" class="pln"><a href="#n168">168</a></p>
<p id="n169" class="pln"><a href="#n169">169</a></p>
<p id="n170" class="pln"><a href="#n170">170</a></p>
<p id="n171" class="pln"><a href="#n171">171</a></p>
<p id="n172" class="pln"><a href="#n172">172</a></p>
<p id="n173" class="pln"><a href="#n173">173</a></p>
<p id="n174" class="pln"><a href="#n174">174</a></p>
<p id="n175" class="pln"><a href="#n175">175</a></p>
<p id="n176" class="pln"><a href="#n176">176</a></p>
<p id="n177" class="pln"><a href="#n177">177</a></p>
<p id="n178" class="pln"><a href="#n178">178</a></p>
<p id="n179" class="pln"><a href="#n179">179</a></p>
<p id="n180" class="pln"><a href="#n180">180</a></p>
<p id="n181" class="pln"><a href="#n181">181</a></p>
<p id="n182" class="pln"><a href="#n182">182</a></p>
<p id="n183" class="pln"><a href="#n183">183</a></p>
<p id="n184" class="pln"><a href="#n184">184</a></p>
<p id="n185" class="pln"><a href="#n185">185</a></p>
<p id="n186" class="pln"><a href="#n186">186</a></p>
<p id="n187" class="pln"><a href="#n187">187</a></p>
<p id="n188" class="pln"><a href="#n188">188</a></p>
<p id="n189" class="pln"><a href="#n189">189</a></p>
<p id="n190" class="stm run hide_run"><a href="#n190">190</a></p>
<p id="n191" class="stm run hide_run"><a href="#n191">191</a></p>
<p id="n192" class="stm run hide_run"><a href="#n192">192</a></p>
<p id="n193" class="pln"><a href="#n193">193</a></p>
<p id="n194" class="stm run hide_run"><a href="#n194">194</a></p>
<p id="n195" class="stm run hide_run"><a href="#n195">195</a></p>
<p id="n196" class="pln"><a href="#n196">196</a></p>
<p id="n197" class="pln"><a href="#n197">197</a></p>
<p id="n198" class="pln"><a href="#n198">198</a></p>
<p id="n199" class="pln"><a href="#n199">199</a></p>
<p id="n200" class="pln"><a href="#n200">200</a></p>
<p id="n201" class="pln"><a href="#n201">201</a></p>
<p id="n202" class="pln"><a href="#n202">202</a></p>
<p id="n203" class="pln"><a href="#n203">203</a></p>
<p id="n204" class="pln"><a href="#n204">204</a></p>
<p id="n205" class="pln"><a href="#n205">205</a></p>
<p id="n206" class="pln"><a href="#n206">206</a></p>
<p id="n207" class="pln"><a href="#n207">207</a></p>
<p id="n208" class="pln"><a href="#n208">208</a></p>
<p id="n209" class="pln"><a href="#n209">209</a></p>
<p id="n210" class="pln"><a href="#n210">210</a></p>
<p id="n211" class="pln"><a href="#n211">211</a></p>
<p id="n212" class="pln"><a href="#n212">212</a></p>
<p id="n213" class="pln"><a href="#n213">213</a></p>
<p id="n214" class="pln"><a href="#n214">214</a></p>
<p id="n215" class="pln"><a href="#n215">215</a></p>
<p id="n216" class="pln"><a href="#n216">216</a></p>
<p id="n217" class="pln"><a href="#n217">217</a></p>
<p id="n218" class="pln"><a href="#n218">218</a></p>
<p id="n219" class="pln"><a href="#n219">219</a></p>
<p id="n220" class="pln"><a href="#n220">220</a></p>
<p id="n221" class="pln"><a href="#n221">221</a></p>
<p id="n222" class="pln"><a href="#n222">222</a></p>
<p id="n223" class="pln"><a href="#n223">223</a></p>
<p id="n224" class="pln"><a href="#n224">224</a></p>
<p id="n225" class="pln"><a href="#n225">225</a></p>
<p id="n226" class="pln"><a href="#n226">226</a></p>
<p id="n227" class="pln"><a href="#n227">227</a></p>
<p id="n228" class="pln"><a href="#n228">228</a></p>
<p id="n229" class="stm run hide_run"><a href="#n229">229</a></p>
<p id="n230" class="stm run hide_run"><a href="#n230">230</a></p>
<p id="n231" class="pln"><a href="#n231">231</a></p>
<p id="n232" class="stm run hide_run"><a href="#n232">232</a></p>
<p id="n233" class="stm run hide_run"><a href="#n233">233</a></p>
<p id="n234" class="pln"><a href="#n234">234</a></p>
<p id="n235" class="pln"><a href="#n235">235</a></p>
<p id="n236" class="pln"><a href="#n236">236</a></p>
<p id="n237" class="pln"><a href="#n237">237</a></p>
<p id="n238" class="pln"><a href="#n238">238</a></p>
<p id="n239" class="pln"><a href="#n239">239</a></p>
<p id="n240" class="stm par run hide_run"><a href="#n240">240</a></p>
<p id="n241" class="stm run hide_run"><a href="#n241">241</a></p>
<p id="n242" class="pln"><a href="#n242">242</a></p>
<p id="n243" class="stm mis"><a href="#n243">243</a></p>
<p id="n244" class="stm run hide_run"><a href="#n244">244</a></p>
<p id="n245" class="pln"><a href="#n245">245</a></p>
<p id="n246" class="pln"><a href="#n246">246</a></p>
<p id="n247" class="pln"><a href="#n247">247</a></p>
<p id="n248" class="pln"><a href="#n248">248</a></p>
<p id="n249" class="stm run hide_run"><a href="#n249">249</a></p>
<p id="n250" class="stm par run hide_run"><a href="#n250">250</a></p>
<p id="n251" class="stm run hide_run"><a href="#n251">251</a></p>
<p id="n252" class="stm par run hide_run"><a href="#n252">252</a></p>
<p id="n253" class="stm run hide_run"><a href="#n253">253</a></p>
<p id="n254" class="stm par run hide_run"><a href="#n254">254</a></p>
<p id="n255" class="stm run hide_run"><a href="#n255">255</a></p>
<p id="n256" class="stm par run hide_run"><a href="#n256">256</a></p>
<p id="n257" class="stm run hide_run"><a href="#n257">257</a></p>
<p id="n258" class="stm run hide_run"><a href="#n258">258</a></p>
<p id="n259" class="pln"><a href="#n259">259</a></p>
<p id="n260" class="stm run hide_run"><a href="#n260">260</a></p>
<p id="n261" class="stm run hide_run"><a href="#n261">261</a></p>
<p id="n262" class="pln"><a href="#n262">262</a></p>
<p id="n263" class="pln"><a href="#n263">263</a></p>
<p id="n264" class="pln"><a href="#n264">264</a></p>
<p id="n265" class="pln"><a href="#n265">265</a></p>
<p id="n266" class="pln"><a href="#n266">266</a></p>
<p id="n267" class="pln"><a href="#n267">267</a></p>
<p id="n268" class="pln"><a href="#n268">268</a></p>
<p id="n269" class="pln"><a href="#n269">269</a></p>
<p id="n270" class="pln"><a href="#n270">270</a></p>
<p id="n271" class="pln"><a href="#n271">271</a></p>
<p id="n272" class="pln"><a href="#n272">272</a></p>
<p id="n273" class="pln"><a href="#n273">273</a></p>
<p id="n274" class="pln"><a href="#n274">274</a></p>
<p id="n275" class="pln"><a href="#n275">275</a></p>
<p id="n276" class="pln"><a href="#n276">276</a></p>
<p id="n277" class="pln"><a href="#n277">277</a></p>
<p id="n278" class="pln"><a href="#n278">278</a></p>
<p id="n279" class="pln"><a href="#n279">279</a></p>
<p id="n280" class="pln"><a href="#n280">280</a></p>
<p id="n281" class="pln"><a href="#n281">281</a></p>
<p id="n282" class="pln"><a href="#n282">282</a></p>
<p id="n283" class="pln"><a href="#n283">283</a></p>
<p id="n284" class="pln"><a href="#n284">284</a></p>
<p id="n285" class="pln"><a href="#n285">285</a></p>
<p id="n286" class="pln"><a href="#n286">286</a></p>
<p id="n287" class="pln"><a href="#n287">287</a></p>
<p id="n288" class="pln"><a href="#n288">288</a></p>
<p id="n289" class="pln"><a href="#n289">289</a></p>
<p id="n290" class="pln"><a href="#n290">290</a></p>
<p id="n291" class="pln"><a href="#n291">291</a></p>
<p id="n292" class="pln"><a href="#n292">292</a></p>
<p id="n293" class="pln"><a href="#n293">293</a></p>
<p id="n294" class="pln"><a href="#n294">294</a></p>
<p id="n295" class="pln"><a href="#n295">295</a></p>
<p id="n296" class="pln"><a href="#n296">296</a></p>
<p id="n297" class="pln"><a href="#n297">297</a></p>
<p id="n298" class="pln"><a href="#n298">298</a></p>
<p id="n299" class="pln"><a href="#n299">299</a></p>
<p id="n300" class="pln"><a href="#n300">300</a></p>
<p id="n301" class="pln"><a href="#n301">301</a></p>
<p id="n302" class="pln"><a href="#n302">302</a></p>
<p id="n303" class="pln"><a href="#n303">303</a></p>
<p id="n304" class="pln"><a href="#n304">304</a></p>
<p id="n305" class="pln"><a href="#n305">305</a></p>
<p id="n306" class="pln"><a href="#n306">306</a></p>
<p id="n307" class="pln"><a href="#n307">307</a></p>
<p id="n308" class="pln"><a href="#n308">308</a></p>
<p id="n309" class="pln"><a href="#n309">309</a></p>
<p id="n310" class="pln"><a href="#n310">310</a></p>
<p id="n311" class="pln"><a href="#n311">311</a></p>
<p id="n312" class="pln"><a href="#n312">312</a></p>
<p id="n313" class="pln"><a href="#n313">313</a></p>
<p id="n314" class="pln"><a href="#n314">314</a></p>
<p id="n315" class="pln"><a href="#n315">315</a></p>
<p id="n316" class="pln"><a href="#n316">316</a></p>
<p id="n317" class="pln"><a href="#n317">317</a></p>
<p id="n318" class="pln"><a href="#n318">318</a></p>
<p id="n319" class="pln"><a href="#n319">319</a></p>
<p id="n320" class="pln"><a href="#n320">320</a></p>
<p id="n321" class="pln"><a href="#n321">321</a></p>
<p id="n322" class="pln"><a href="#n322">322</a></p>
<p id="n323" class="pln"><a href="#n323">323</a></p>
<p id="n324" class="pln"><a href="#n324">324</a></p>
<p id="n325" class="pln"><a href="#n325">325</a></p>
<p id="n326" class="pln"><a href="#n326">326</a></p>
<p id="n327" class="pln"><a href="#n327">327</a></p>
<p id="n328" class="pln"><a href="#n328">328</a></p>
<p id="n329" class="pln"><a href="#n329">329</a></p>
<p id="n330" class="pln"><a href="#n330">330</a></p>
<p id="n331" class="pln"><a href="#n331">331</a></p>
<p id="n332" class="pln"><a href="#n332">332</a></p>
<p id="n333" class="pln"><a href="#n333">333</a></p>
<p id="n334" class="pln"><a href="#n334">334</a></p>
<p id="n335" class="pln"><a href="#n335">335</a></p>
<p id="n336" class="pln"><a href="#n336">336</a></p>
<p id="n337" class="pln"><a href="#n337">337</a></p>
<p id="n338" class="pln"><a href="#n338">338</a></p>
<p id="n339" class="pln"><a href="#n339">339</a></p>
<p id="n340" class="pln"><a href="#n340">340</a></p>
<p id="n341" class="pln"><a href="#n341">341</a></p>
<p id="n342" class="pln"><a href="#n342">342</a></p>
<p id="n343" class="pln"><a href="#n343">343</a></p>
<p id="n344" class="stm run hide_run"><a href="#n344">344</a></p>
<p id="n345" class="stm par run hide_run"><a href="#n345">345</a></p>
<p id="n346" class="stm mis"><a href="#n346">346</a></p>
<p id="n347" class="pln"><a href="#n347">347</a></p>
<p id="n348" class="stm run hide_run"><a href="#n348">348</a></p>
<p id="n349" class="stm par run hide_run"><a href="#n349">349</a></p>
<p id="n350" class="stm run hide_run"><a href="#n350">350</a></p>
<p id="n351" class="pln"><a href="#n351">351</a></p>
<p id="n352" class="pln"><a href="#n352">352</a></p>
<p id="n353" class="stm mis"><a href="#n353">353</a></p>
<p id="n354" class="stm mis"><a href="#n354">354</a></p>
<p id="n355" class="stm run hide_run"><a href="#n355">355</a></p>
<p id="n356" class="stm run hide_run"><a href="#n356">356</a></p>
<p id="n357" class="stm run hide_run"><a href="#n357">357</a></p>
<p id="n358" class="stm run hide_run"><a href="#n358">358</a></p>
<p id="n359" class="stm run hide_run"><a href="#n359">359</a></p>
<p id="n360" class="stm run hide_run"><a href="#n360">360</a></p>
<p id="n361" class="stm run hide_run"><a href="#n361">361</a></p>
<p id="n362" class="stm run hide_run"><a href="#n362">362</a></p>
<p id="n363" class="stm par run hide_run"><a href="#n363">363</a></p>
<p id="n364" class="stm run hide_run"><a href="#n364">364</a></p>
<p id="n365" class="pln"><a href="#n365">365</a></p>
<p id="n366" class="stm par run hide_run"><a href="#n366">366</a></p>
<p id="n367" class="stm mis"><a href="#n367">367</a></p>
<p id="n368" class="pln"><a href="#n368">368</a></p>
<p id="n369" class="pln"><a href="#n369">369</a></p>
<p id="n370" class="stm mis"><a href="#n370">370</a></p>
<p id="n371" class="stm run hide_run"><a href="#n371">371</a></p>
<p id="n372" class="stm run hide_run"><a href="#n372">372</a></p>
<p id="n373" class="stm run hide_run"><a href="#n373">373</a></p>
<p id="n374" class="stm run hide_run"><a href="#n374">374</a></p>
<p id="n375" class="stm run hide_run"><a href="#n375">375</a></p>
<p id="n376" class="stm run hide_run"><a href="#n376">376</a></p>
<p id="n377" class="pln"><a href="#n377">377</a></p>
<p id="n378" class="stm run hide_run"><a href="#n378">378</a></p>
<p id="n379" class="stm run hide_run"><a href="#n379">379</a></p>
<p id="n380" class="stm run hide_run"><a href="#n380">380</a></p>
<p id="n381" class="stm run hide_run"><a href="#n381">381</a></p>
<p id="n382" class="stm par run hide_run"><a href="#n382">382</a></p>
<p id="n383" class="stm mis"><a href="#n383">383</a></p>
<p id="n384" class="pln"><a href="#n384">384</a></p>
<p id="n385" class="pln"><a href="#n385">385</a></p>
<p id="n386" class="stm run hide_run"><a href="#n386">386</a></p>
<p id="n387" class="stm run hide_run"><a href="#n387">387</a></p>
<p id="n388" class="stm run hide_run"><a href="#n388">388</a></p>
<p id="n389" class="stm par run hide_run"><a href="#n389">389</a></p>
<p id="n390" class="stm run hide_run"><a href="#n390">390</a></p>
<p id="n391" class="stm run hide_run"><a href="#n391">391</a></p>
<p id="n392" class="stm run hide_run"><a href="#n392">392</a></p>
<p id="n393" class="stm run hide_run"><a href="#n393">393</a></p>
<p id="n394" class="stm run hide_run"><a href="#n394">394</a></p>
<p id="n395" class="stm run hide_run"><a href="#n395">395</a></p>
<p id="n396" class="stm run hide_run"><a href="#n396">396</a></p>
<p id="n397" class="stm run hide_run"><a href="#n397">397</a></p>
<p id="n398" class="pln"><a href="#n398">398</a></p>
<p id="n399" class="pln"><a href="#n399">399</a></p>
<p id="n400" class="pln"><a href="#n400">400</a></p>
<p id="n401" class="stm run hide_run"><a href="#n401">401</a></p>
<p id="n402" class="pln"><a href="#n402">402</a></p>
<p id="n403" class="stm mis"><a href="#n403">403</a></p>
<p id="n404" class="stm run hide_run"><a href="#n404">404</a></p>
<p id="n405" class="stm run hide_run"><a href="#n405">405</a></p>
<p id="n406" class="stm run hide_run"><a href="#n406">406</a></p>
<p id="n407" class="stm run hide_run"><a href="#n407">407</a></p>
<p id="n408" class="stm run hide_run"><a href="#n408">408</a></p>
<p id="n409" class="pln"><a href="#n409">409</a></p>
<p id="n410" class="stm run hide_run"><a href="#n410">410</a></p>
<p id="n411" class="stm run hide_run"><a href="#n411">411</a></p>
<p id="n412" class="stm run hide_run"><a href="#n412">412</a></p>
<p id="n413" class="stm run hide_run"><a href="#n413">413</a></p>
<p id="n414" class="stm run hide_run"><a href="#n414">414</a></p>
<p id="n415" class="stm run hide_run"><a href="#n415">415</a></p>
<p id="n416" class="stm run hide_run"><a href="#n416">416</a></p>
<p id="n417" class="stm par run hide_run"><a href="#n417">417</a></p>
<p id="n418" class="stm run hide_run"><a href="#n418">418</a></p>
<p id="n419" class="stm run hide_run"><a href="#n419">419</a></p>
<p id="n420" class="stm run hide_run"><a href="#n420">420</a></p>
<p id="n421" class="stm par run hide_run"><a href="#n421">421</a></p>
<p id="n422" class="stm run hide_run"><a href="#n422">422</a></p>
<p id="n423" class="stm run hide_run"><a href="#n423">423</a></p>
<p id="n424" class="stm run hide_run"><a href="#n424">424</a></p>
<p id="n425" class="stm run hide_run"><a href="#n425">425</a></p>
<p id="n426" class="stm par run hide_run"><a href="#n426">426</a></p>
<p id="n427" class="stm mis"><a href="#n427">427</a></p>
<p id="n428" class="pln"><a href="#n428">428</a></p>
<p id="n429" class="pln"><a href="#n429">429</a></p>
<p id="n430" class="pln"><a href="#n430">430</a></p>
<p id="n431" class="stm par run hide_run"><a href="#n431">431</a></p>
<p id="n432" class="stm run hide_run"><a href="#n432">432</a></p>
<p id="n433" class="stm run hide_run"><a href="#n433">433</a></p>
<p id="n434" class="stm run hide_run"><a href="#n434">434</a></p>
<p id="n435" class="stm par run hide_run"><a href="#n435">435</a></p>
<p id="n436" class="stm mis"><a href="#n436">436</a></p>
<p id="n437" class="pln"><a href="#n437">437</a></p>
<p id="n438" class="pln"><a href="#n438">438</a></p>
<p id="n439" class="stm run hide_run"><a href="#n439">439</a></p>
<p id="n440" class="stm run hide_run"><a href="#n440">440</a></p>
<p id="n441" class="stm run hide_run"><a href="#n441">441</a></p>
<p id="n442" class="stm run hide_run"><a href="#n442">442</a></p>
<p id="n443" class="stm run hide_run"><a href="#n443">443</a></p>
<p id="n444" class="stm run hide_run"><a href="#n444">444</a></p>
<p id="n445" class="stm run hide_run"><a href="#n445">445</a></p>
<p id="n446" class="stm run hide_run"><a href="#n446">446</a></p>
<p id="n447" class="stm run hide_run"><a href="#n447">447</a></p>
<p id="n448" class="stm run hide_run"><a href="#n448">448</a></p>
<p id="n449" class="stm par run hide_run"><a href="#n449">449</a></p>
<p id="n450" class="pln"><a href="#n450">450</a></p>
<p id="n451" class="pln"><a href="#n451">451</a></p>
<p id="n452" class="pln"><a href="#n452">452</a></p>
<p id="n453" class="stm mis"><a href="#n453">453</a></p>
<p id="n454" class="pln"><a href="#n454">454</a></p>
<p id="n455" class="pln"><a href="#n455">455</a></p>
<p id="n456" class="pln"><a href="#n456">456</a></p>
<p id="n457" class="stm par run hide_run"><a href="#n457">457</a></p>
<p id="n458" class="stm run hide_run"><a href="#n458">458</a></p>
<p id="n459" class="pln"><a href="#n459">459</a></p>
<p id="n460" class="pln"><a href="#n460">460</a></p>
<p id="n461" class="pln"><a href="#n461">461</a></p>
<p id="n462" class="stm par run hide_run"><a href="#n462">462</a></p>
<p id="n463" class="stm mis"><a href="#n463">463</a></p>
<p id="n464" class="stm mis"><a href="#n464">464</a></p>
<p id="n465" class="pln"><a href="#n465">465</a></p>
<p id="n466" class="pln"><a href="#n466">466</a></p>
<p id="n467" class="pln"><a href="#n467">467</a></p>
<p id="n468" class="stm par run hide_run"><a href="#n468">468</a></p>
<p id="n469" class="stm run hide_run"><a href="#n469">469</a></p>
<p id="n470" class="stm par run hide_run"><a href="#n470">470</a></p>
<p id="n471" class="pln"><a href="#n471">471</a></p>
<p id="n472" class="pln"><a href="#n472">472</a></p>
<p id="n473" class="pln"><a href="#n473">473</a></p>
<p id="n474" class="stm mis"><a href="#n474">474</a></p>
<p id="n475" class="pln"><a href="#n475">475</a></p>
<p id="n476" class="pln"><a href="#n476">476</a></p>
<p id="n477" class="pln"><a href="#n477">477</a></p>
<p id="n478" class="stm run hide_run"><a href="#n478">478</a></p>
<p id="n479" class="stm run hide_run"><a href="#n479">479</a></p>
<p id="n480" class="stm par run hide_run"><a href="#n480">480</a></p>
<p id="n481" class="pln"><a href="#n481">481</a></p>
<p id="n482" class="pln"><a href="#n482">482</a></p>
<p id="n483" class="stm mis"><a href="#n483">483</a></p>
<p id="n484" class="pln"><a href="#n484">484</a></p>
<p id="n485" class="pln"><a href="#n485">485</a></p>
<p id="n486" class="pln"><a href="#n486">486</a></p>
<p id="n487" class="stm run hide_run"><a href="#n487">487</a></p>
<p id="n488" class="pln"><a href="#n488">488</a></p>
<p id="n489" class="stm mis"><a href="#n489">489</a></p>
<p id="n490" class="stm mis"><a href="#n490">490</a></p>
<p id="n491" class="pln"><a href="#n491">491</a></p>
<p id="n492" class="pln"><a href="#n492">492</a></p>
<p id="n493" class="pln"><a href="#n493">493</a></p>
<p id="n494" class="stm mis"><a href="#n494">494</a></p>
<p id="n495" class="stm mis"><a href="#n495">495</a></p>
<p id="n496" class="stm mis"><a href="#n496">496</a></p>
<p id="n497" class="stm mis"><a href="#n497">497</a></p>
<p id="n498" class="stm mis"><a href="#n498">498</a></p>
<p id="n499" class="stm mis"><a href="#n499">499</a></p>
<p id="n500" class="stm mis"><a href="#n500">500</a></p>
<p id="n501" class="stm mis"><a href="#n501">501</a></p>
<p id="n502" class="pln"><a href="#n502">502</a></p>
<p id="n503" class="pln"><a href="#n503">503</a></p>
<p id="n504" class="pln"><a href="#n504">504</a></p>
<p id="n505" class="stm mis"><a href="#n505">505</a></p>
<p id="n506" class="stm mis"><a href="#n506">506</a></p>
<p id="n507" class="stm mis"><a href="#n507">507</a></p>
<p id="n508" class="pln"><a href="#n508">508</a></p>
<p id="n509" class="stm mis"><a href="#n509">509</a></p>
<p id="n510" class="stm par run hide_run"><a href="#n510">510</a></p>
<p id="n511" class="stm run hide_run"><a href="#n511">511</a></p>
<p id="n512" class="stm run hide_run"><a href="#n512">512</a></p>
<p id="n513" class="stm par run hide_run"><a href="#n513">513</a></p>
<p id="n514" class="stm par run hide_run"><a href="#n514">514</a></p>
<p id="n515" class="stm mis"><a href="#n515">515</a></p>
<p id="n516" class="pln"><a href="#n516">516</a></p>
<p id="n517" class="pln"><a href="#n517">517</a></p>
<p id="n518" class="stm run hide_run"><a href="#n518">518</a></p>
<p id="n519" class="stm run hide_run"><a href="#n519">519</a></p>
<p id="n520" class="stm par run hide_run"><a href="#n520">520</a></p>
<p id="n521" class="stm mis"><a href="#n521">521</a></p>
<p id="n522" class="stm run hide_run"><a href="#n522">522</a></p>
<p id="n523" class="pln"><a href="#n523">523</a></p>
<p id="n524" class="pln"><a href="#n524">524</a></p>
<p id="n525" class="pln"><a href="#n525">525</a></p>
<p id="n526" class="pln"><a href="#n526">526</a></p>
<p id="n527" class="pln"><a href="#n527">527</a></p>
<p id="n528" class="pln"><a href="#n528">528</a></p>
<p id="n529" class="stm run hide_run"><a href="#n529">529</a></p>
<p id="n530" class="stm run hide_run"><a href="#n530">530</a></p>
<p id="n531" class="stm par run hide_run"><a href="#n531">531</a></p>
<p id="n532" class="pln"><a href="#n532">532</a></p>
<p id="n533" class="pln"><a href="#n533">533</a></p>
<p id="n534" class="stm mis"><a href="#n534">534</a></p>
<p id="n535" class="stm par run hide_run"><a href="#n535">535</a></p>
<p id="n536" class="pln"><a href="#n536">536</a></p>
<p id="n537" class="pln"><a href="#n537">537</a></p>
<p id="n538" class="stm mis"><a href="#n538">538</a></p>
<p id="n539" class="stm par run hide_run"><a href="#n539">539</a></p>
<p id="n540" class="stm mis"><a href="#n540">540</a></p>
<p id="n541" class="pln"><a href="#n541">541</a></p>
<p id="n542" class="pln"><a href="#n542">542</a></p>
<p id="n543" class="pln"><a href="#n543">543</a></p>
<p id="n544" class="stm par run hide_run"><a href="#n544">544</a></p>
<p id="n545" class="pln"><a href="#n545">545</a></p>
<p id="n546" class="pln"><a href="#n546">546</a></p>
<p id="n547" class="stm mis"><a href="#n547">547</a></p>
<p id="n548" class="stm par run hide_run"><a href="#n548">548</a></p>
<p id="n549" class="stm mis"><a href="#n549">549</a></p>
<p id="n550" class="stm run hide_run"><a href="#n550">550</a></p>
<p id="n551" class="pln"><a href="#n551">551</a></p>
<p id="n552" class="pln"><a href="#n552">552</a></p>
<p id="n553" class="stm run hide_run"><a href="#n553">553</a></p>
<p id="n554" class="stm mis"><a href="#n554">554</a></p>
<p id="n555" class="stm mis"><a href="#n555">555</a></p>
<p id="n556" class="stm mis"><a href="#n556">556</a></p>
<p id="n557" class="pln"><a href="#n557">557</a></p>
<p id="n558" class="pln"><a href="#n558">558</a></p>
<p id="n559" class="stm mis"><a href="#n559">559</a></p>
<p id="n560" class="pln"><a href="#n560">560</a></p>
<p id="n561" class="pln"><a href="#n561">561</a></p>
<p id="n562" class="stm mis"><a href="#n562">562</a></p>
<p id="n563" class="stm mis"><a href="#n563">563</a></p>
<p id="n564" class="stm mis"><a href="#n564">564</a></p>
<p id="n565" class="pln"><a href="#n565">565</a></p>
<p id="n566" class="stm mis"><a href="#n566">566</a></p>
<p id="n567" class="pln"><a href="#n567">567</a></p>
<p id="n568" class="pln"><a href="#n568">568</a></p>
<p id="n569" class="stm mis"><a href="#n569">569</a></p>
<p id="n570" class="stm mis"><a href="#n570">570</a></p>
<p id="n571" class="stm mis"><a href="#n571">571</a></p>
<p id="n572" class="stm mis"><a href="#n572">572</a></p>
<p id="n573" class="stm mis"><a href="#n573">573</a></p>
<p id="n574" class="pln"><a href="#n574">574</a></p>
<p id="n575" class="pln"><a href="#n575">575</a></p>
<p id="n576" class="pln"><a href="#n576">576</a></p>
<p id="n577" class="pln"><a href="#n577">577</a></p>
<p id="n578" class="stm mis"><a href="#n578">578</a></p>
<p id="n579" class="stm mis"><a href="#n579">579</a></p>
<p id="n580" class="stm mis"><a href="#n580">580</a></p>
<p id="n581" class="stm mis"><a href="#n581">581</a></p>
<p id="n582" class="pln"><a href="#n582">582</a></p>
<p id="n583" class="pln"><a href="#n583">583</a></p>
<p id="n584" class="pln"><a href="#n584">584</a></p>
<p id="n585" class="pln"><a href="#n585">585</a></p>
<p id="n586" class="pln"><a href="#n586">586</a></p>
<p id="n587" class="stm mis"><a href="#n587">587</a></p>
<p id="n588" class="pln"><a href="#n588">588</a></p>
<p id="n589" class="pln"><a href="#n589">589</a></p>
<p id="n590" class="pln"><a href="#n590">590</a></p>
<p id="n591" class="pln"><a href="#n591">591</a></p>
<p id="n592" class="pln"><a href="#n592">592</a></p>
<p id="n593" class="pln"><a href="#n593">593</a></p>
<p id="n594" class="pln"><a href="#n594">594</a></p>
<p id="n595" class="pln"><a href="#n595">595</a></p>
<p id="n596" class="pln"><a href="#n596">596</a></p>
<p id="n597" class="stm mis"><a href="#n597">597</a></p>
<p id="n598" class="pln"><a href="#n598">598</a></p>
<p id="n599" class="pln"><a href="#n599">599</a></p>
<p id="n600" class="stm mis"><a href="#n600">600</a></p>
<p id="n601" class="stm mis"><a href="#n601">601</a></p>
<p id="n602" class="pln"><a href="#n602">602</a></p>
<p id="n603" class="stm mis"><a href="#n603">603</a></p>
<p id="n604" class="stm mis"><a href="#n604">604</a></p>
<p id="n605" class="stm mis"><a href="#n605">605</a></p>
<p id="n606" class="stm par run hide_run"><a href="#n606">606</a></p>
<p id="n607" class="stm run hide_run"><a href="#n607">607</a></p>
<p id="n608" class="pln"><a href="#n608">608</a></p>
<p id="n609" class="pln"><a href="#n609">609</a></p>
<p id="n610" class="pln"><a href="#n610">610</a></p>
<p id="n611" class="pln"><a href="#n611">611</a></p>
<p id="n612" class="pln"><a href="#n612">612</a></p>
<p id="n613" class="pln"><a href="#n613">613</a></p>
<p id="n614" class="pln"><a href="#n614">614</a></p>
<p id="n615" class="pln"><a href="#n615">615</a></p>
<p id="n616" class="pln"><a href="#n616">616</a></p>
<p id="n617" class="stm par run hide_run"><a href="#n617">617</a></p>
<p id="n618" class="pln"><a href="#n618">618</a></p>
<p id="n619" class="pln"><a href="#n619">619</a></p>
<p id="n620" class="pln"><a href="#n620">620</a></p>
<p id="n621" class="pln"><a href="#n621">621</a></p>
<p id="n622" class="stm mis"><a href="#n622">622</a></p>
<p id="n623" class="pln"><a href="#n623">623</a></p>
<p id="n624" class="pln"><a href="#n624">624</a></p>
<p id="n625" class="pln"><a href="#n625">625</a></p>
<p id="n626" class="stm par run hide_run"><a href="#n626">626</a></p>
<p id="n627" class="pln"><a href="#n627">627</a></p>
<p id="n628" class="pln"><a href="#n628">628</a></p>
<p id="n629" class="pln"><a href="#n629">629</a></p>
<p id="n630" class="pln"><a href="#n630">630</a></p>
<p id="n631" class="stm mis"><a href="#n631">631</a></p>
<p id="n632" class="pln"><a href="#n632">632</a></p>
<p id="n633" class="pln"><a href="#n633">633</a></p>
<p id="n634" class="pln"><a href="#n634">634</a></p>
<p id="n635" class="pln"><a href="#n635">635</a></p>
<p id="n636" class="stm run hide_run"><a href="#n636">636</a></p>
<p id="n637" class="stm run hide_run"><a href="#n637">637</a></p>
<p id="n638" class="stm par run hide_run"><a href="#n638">638</a></p>
<p id="n639" class="stm run hide_run"><a href="#n639">639</a></p>
<p id="n640" class="stm run hide_run"><a href="#n640">640</a></p>
<p id="n641" class="stm run hide_run"><a href="#n641">641</a></p>
<p id="n642" class="stm mis"><a href="#n642">642</a></p>
<p id="n643" class="stm mis"><a href="#n643">643</a></p>
<p id="n644" class="stm run hide_run"><a href="#n644">644</a></p>
<p id="n645" class="stm run hide_run"><a href="#n645">645</a></p>
<p id="n646" class="stm run hide_run"><a href="#n646">646</a></p>
<p id="n647" class="stm run hide_run"><a href="#n647">647</a></p>
<p id="n648" class="stm par run hide_run"><a href="#n648">648</a></p>
<p id="n649" class="stm run hide_run"><a href="#n649">649</a></p>
<p id="n650" class="stm run hide_run"><a href="#n650">650</a></p>
<p id="n651" class="stm par run hide_run"><a href="#n651">651</a></p>
<p id="n652" class="stm mis"><a href="#n652">652</a></p>
<p id="n653" class="stm run hide_run"><a href="#n653">653</a></p>
<p id="n654" class="stm run hide_run"><a href="#n654">654</a></p>
<p id="n655" class="pln"><a href="#n655">655</a></p>
<p id="n656" class="pln"><a href="#n656">656</a></p>
<p id="n657" class="pln"><a href="#n657">657</a></p>
<p id="n658" class="pln"><a href="#n658">658</a></p>
<p id="n659" class="pln"><a href="#n659">659</a></p>
<p id="n660" class="pln"><a href="#n660">660</a></p>
<p id="n661" class="pln"><a href="#n661">661</a></p>
<p id="n662" class="pln"><a href="#n662">662</a></p>
<p id="n663" class="stm run hide_run"><a href="#n663">663</a></p>
<p id="n664" class="pln"><a href="#n664">664</a></p>
<p id="n665" class="stm par run hide_run"><a href="#n665">665</a></p>
<p id="n666" class="stm mis"><a href="#n666">666</a></p>
<p id="n667" class="stm mis"><a href="#n667">667</a></p>
<p id="n668" class="stm run hide_run"><a href="#n668">668</a></p>
<p id="n669" class="stm run hide_run"><a href="#n669">669</a></p>
<p id="n670" class="pln"><a href="#n670">670</a></p>
<p id="n671" class="pln"><a href="#n671">671</a></p>
<p id="n672" class="pln"><a href="#n672">672</a></p>
<p id="n673" class="pln"><a href="#n673">673</a></p>
<p id="n674" class="pln"><a href="#n674">674</a></p>
<p id="n675" class="stm run hide_run"><a href="#n675">675</a></p>
<p id="n676" class="stm run hide_run"><a href="#n676">676</a></p>
<p id="n677" class="stm run hide_run"><a href="#n677">677</a></p>
<p id="n678" class="stm run hide_run"><a href="#n678">678</a></p>
<p id="n679" class="stm par run hide_run"><a href="#n679">679</a></p>
<p id="n680" class="stm run hide_run"><a href="#n680">680</a></p>
<p id="n681" class="stm run hide_run"><a href="#n681">681</a></p>
<p id="n682" class="stm run hide_run"><a href="#n682">682</a></p>
<p id="n683" class="pln"><a href="#n683">683</a></p>
<p id="n684" class="stm run hide_run"><a href="#n684">684</a></p>
<p id="n685" class="pln"><a href="#n685">685</a></p>
<p id="n686" class="stm run hide_run"><a href="#n686">686</a></p>
<p id="n687" class="stm run hide_run"><a href="#n687">687</a></p>
<p id="n688" class="stm run hide_run"><a href="#n688">688</a></p>
<p id="n689" class="pln"><a href="#n689">689</a></p>
<p id="n690" class="pln"><a href="#n690">690</a></p>
<p id="n691" class="pln"><a href="#n691">691</a></p>
<p id="n692" class="pln"><a href="#n692">692</a></p>
<p id="n693" class="pln"><a href="#n693">693</a></p>
<p id="n694" class="stm run hide_run"><a href="#n694">694</a></p>
<p id="n695" class="stm run hide_run"><a href="#n695">695</a></p>
<p id="n696" class="stm run hide_run"><a href="#n696">696</a></p>
<p id="n697" class="stm par run hide_run"><a href="#n697">697</a></p>
<p id="n698" class="stm run hide_run"><a href="#n698">698</a></p>
<p id="n699" class="pln"><a href="#n699">699</a></p>
<p id="n700" class="stm mis"><a href="#n700">700</a></p>
<p id="n701" class="stm mis"><a href="#n701">701</a></p>
<p id="n702" class="stm run hide_run"><a href="#n702">702</a></p>
<p id="n703" class="stm run hide_run"><a href="#n703">703</a></p>
<p id="n704" class="stm run hide_run"><a href="#n704">704</a></p>
<p id="n705" class="pln"><a href="#n705">705</a></p>
<p id="n706" class="pln"><a href="#n706">706</a></p>
<p id="n707" class="stm run hide_run"><a href="#n707">707</a></p>
<p id="n708" class="stm run hide_run"><a href="#n708">708</a></p>
<p id="n709" class="pln"><a href="#n709">709</a></p>
<p id="n710" class="stm run hide_run"><a href="#n710">710</a></p>
<p id="n711" class="stm par run hide_run"><a href="#n711">711</a></p>
<p id="n712" class="stm mis"><a href="#n712">712</a></p>
<p id="n713" class="stm run hide_run"><a href="#n713">713</a></p>
<p id="n714" class="stm run hide_run"><a href="#n714">714</a></p>
<p id="n715" class="pln"><a href="#n715">715</a></p>
<p id="n716" class="pln"><a href="#n716">716</a></p>
<p id="n717" class="pln"><a href="#n717">717</a></p>
<p id="n718" class="stm run hide_run"><a href="#n718">718</a></p>
<p id="n719" class="pln"><a href="#n719">719</a></p>
<p id="n720" class="pln"><a href="#n720">720</a></p>
<p id="n721" class="pln"><a href="#n721">721</a></p>
<p id="n722" class="pln"><a href="#n722">722</a></p>
<p id="n723" class="stm par run hide_run"><a href="#n723">723</a></p>
<p id="n724" class="stm mis"><a href="#n724">724</a></p>
<p id="n725" class="stm mis"><a href="#n725">725</a></p>
<p id="n726" class="stm mis"><a href="#n726">726</a></p>
<p id="n727" class="stm mis"><a href="#n727">727</a></p>
<p id="n728" class="stm mis"><a href="#n728">728</a></p>
<p id="n729" class="stm mis"><a href="#n729">729</a></p>
<p id="n730" class="stm mis"><a href="#n730">730</a></p>
<p id="n731" class="stm mis"><a href="#n731">731</a></p>
<p id="n732" class="stm mis"><a href="#n732">732</a></p>
<p id="n733" class="stm mis"><a href="#n733">733</a></p>
<p id="n734" class="pln"><a href="#n734">734</a></p>
<p id="n735" class="pln"><a href="#n735">735</a></p>
<p id="n736" class="pln"><a href="#n736">736</a></p>
<p id="n737" class="pln"><a href="#n737">737</a></p>
<p id="n738" class="pln"><a href="#n738">738</a></p>
<p id="n739" class="pln"><a href="#n739">739</a></p>
<p id="n740" class="pln"><a href="#n740">740</a></p>
<p id="n741" class="pln"><a href="#n741">741</a></p>
<p id="n742" class="pln"><a href="#n742">742</a></p>
<p id="n743" class="pln"><a href="#n743">743</a></p>
<p id="n744" class="pln"><a href="#n744">744</a></p>
<p id="n745" class="pln"><a href="#n745">745</a></p>
<p id="n746" class="pln"><a href="#n746">746</a></p>
<p id="n747" class="stm mis"><a href="#n747">747</a></p>
<p id="n748" class="stm mis"><a href="#n748">748</a></p>
<p id="n749" class="stm mis"><a href="#n749">749</a></p>
<p id="n750" class="stm mis"><a href="#n750">750</a></p>
<p id="n751" class="stm mis"><a href="#n751">751</a></p>
<p id="n752" class="pln"><a href="#n752">752</a></p>
<p id="n753" class="stm mis"><a href="#n753">753</a></p>
<p id="n754" class="stm mis"><a href="#n754">754</a></p>
<p id="n755" class="stm mis"><a href="#n755">755</a></p>
<p id="n756" class="stm mis"><a href="#n756">756</a></p>
<p id="n757" class="stm mis"><a href="#n757">757</a></p>
<p id="n758" class="pln"><a href="#n758">758</a></p>
<p id="n759" class="pln"><a href="#n759">759</a></p>
<p id="n760" class="stm mis"><a href="#n760">760</a></p>
<p id="n761" class="stm mis"><a href="#n761">761</a></p>
<p id="n762" class="pln"><a href="#n762">762</a></p>
<p id="n763" class="stm mis"><a href="#n763">763</a></p>
<p id="n764" class="pln"><a href="#n764">764</a></p>
<p id="n765" class="pln"><a href="#n765">765</a></p>
<p id="n766" class="pln"><a href="#n766">766</a></p>
<p id="n767" class="pln"><a href="#n767">767</a></p>
<p id="n768" class="stm run hide_run"><a href="#n768">768</a></p>
<p id="n769" class="stm run hide_run"><a href="#n769">769</a></p>
<p id="n770" class="pln"><a href="#n770">770</a></p>
<p id="n771" class="pln"><a href="#n771">771</a></p>
<p id="n772" class="stm par run hide_run"><a href="#n772">772</a></p>
<p id="n773" class="stm run hide_run"><a href="#n773">773</a></p>
<p id="n774" class="pln"><a href="#n774">774</a></p>
<p id="n775" class="stm mis"><a href="#n775">775</a></p>
<p id="n776" class="pln"><a href="#n776">776</a></p>
<p id="n777" class="pln"><a href="#n777">777</a></p>
<p id="n778" class="stm par run hide_run"><a href="#n778">778</a></p>
<p id="n779" class="stm run hide_run"><a href="#n779">779</a></p>
<p id="n780" class="stm par run hide_run"><a href="#n780">780</a></p>
<p id="n781" class="stm mis"><a href="#n781">781</a></p>
<p id="n782" class="stm run hide_run"><a href="#n782">782</a></p>
<p id="n783" class="pln"><a href="#n783">783</a></p>
<p id="n784" class="stm run hide_run"><a href="#n784">784</a></p>
<p id="n785" class="pln"><a href="#n785">785</a></p>
<p id="n786" class="stm mis"><a href="#n786">786</a></p>
<p id="n787" class="pln"><a href="#n787">787</a></p>
<p id="n788" class="stm run hide_run"><a href="#n788">788</a></p>
<p id="n789" class="stm run hide_run"><a href="#n789">789</a></p>
<p id="n790" class="pln"><a href="#n790">790</a></p>
<p id="n791" class="pln"><a href="#n791">791</a></p>
<p id="n792" class="pln"><a href="#n792">792</a></p>
<p id="n793" class="pln"><a href="#n793">793</a></p>
<p id="n794" class="pln"><a href="#n794">794</a></p>
<p id="n795" class="pln"><a href="#n795">795</a></p>
<p id="n796" class="pln"><a href="#n796">796</a></p>
<p id="n797" class="pln"><a href="#n797">797</a></p>
<p id="n798" class="pln"><a href="#n798">798</a></p>
<p id="n799" class="pln"><a href="#n799">799</a></p>
<p id="n800" class="pln"><a href="#n800">800</a></p>
<p id="n801" class="pln"><a href="#n801">801</a></p>
<p id="n802" class="pln"><a href="#n802">802</a></p>
<p id="n803" class="pln"><a href="#n803">803</a></p>
<p id="n804" class="pln"><a href="#n804">804</a></p>
<p id="n805" class="stm mis"><a href="#n805">805</a></p>
<p id="n806" class="stm mis"><a href="#n806">806</a></p>
<p id="n807" class="stm mis"><a href="#n807">807</a></p>
<p id="n808" class="pln"><a href="#n808">808</a></p>
<p id="n809" class="stm run hide_run"><a href="#n809">809</a></p>
<p id="n810" class="stm run hide_run"><a href="#n810">810</a></p>
<p id="n811" class="pln"><a href="#n811">811</a></p>
<p id="n812" class="pln"><a href="#n812">812</a></p>
<p id="n813" class="pln"><a href="#n813">813</a></p>
<p id="n814" class="pln"><a href="#n814">814</a></p>
<p id="n815" class="pln"><a href="#n815">815</a></p>
<p id="n816" class="pln"><a href="#n816">816</a></p>
<p id="n817" class="pln"><a href="#n817">817</a></p>
<p id="n818" class="pln"><a href="#n818">818</a></p>
<p id="n819" class="pln"><a href="#n819">819</a></p>
<p id="n820" class="pln"><a href="#n820">820</a></p>
<p id="n821" class="pln"><a href="#n821">821</a></p>
<p id="n822" class="pln"><a href="#n822">822</a></p>
<p id="n823" class="pln"><a href="#n823">823</a></p>
<p id="n824" class="pln"><a href="#n824">824</a></p>
<p id="n825" class="pln"><a href="#n825">825</a></p>
<p id="n826" class="pln"><a href="#n826">826</a></p>
<p id="n827" class="pln"><a href="#n827">827</a></p>
<p id="n828" class="pln"><a href="#n828">828</a></p>
<p id="n829" class="pln"><a href="#n829">829</a></p>
<p id="n830" class="pln"><a href="#n830">830</a></p>
<p id="n831" class="stm mis"><a href="#n831">831</a></p>
<p id="n832" class="stm mis"><a href="#n832">832</a></p>
<p id="n833" class="pln"><a href="#n833">833</a></p>
<p id="n834" class="pln"><a href="#n834">834</a></p>
<p id="n835" class="pln"><a href="#n835">835</a></p>
<p id="n836" class="pln"><a href="#n836">836</a></p>
<p id="n837" class="pln"><a href="#n837">837</a></p>
<p id="n838" class="pln"><a href="#n838">838</a></p>
<p id="n839" class="stm mis"><a href="#n839">839</a></p>
<p id="n840" class="stm mis"><a href="#n840">840</a></p>
<p id="n841" class="stm mis"><a href="#n841">841</a></p>
<p id="n842" class="pln"><a href="#n842">842</a></p>
<p id="n843" class="stm mis"><a href="#n843">843</a></p>
<p id="n844" class="stm mis"><a href="#n844">844</a></p>
<p id="n845" class="stm mis"><a href="#n845">845</a></p>
<p id="n846" class="stm mis"><a href="#n846">846</a></p>
<p id="n847" class="stm mis"><a href="#n847">847</a></p>
<p id="n848" class="stm mis"><a href="#n848">848</a></p>
<p id="n849" class="pln"><a href="#n849">849</a></p>
<p id="n850" class="pln"><a href="#n850">850</a></p>
<p id="n851" class="pln"><a href="#n851">851</a></p>
<p id="n852" class="pln"><a href="#n852">852</a></p>
<p id="n853" class="stm mis"><a href="#n853">853</a></p>
<p id="n854" class="stm mis"><a href="#n854">854</a></p>
<p id="n855" class="stm mis"><a href="#n855">855</a></p>
<p id="n856" class="stm mis"><a href="#n856">856</a></p>
<p id="n857" class="pln"><a href="#n857">857</a></p>
<p id="n858" class="stm mis"><a href="#n858">858</a></p>
<p id="n859" class="pln"><a href="#n859">859</a></p>
<p id="n860" class="stm run hide_run"><a href="#n860">860</a></p>
<p id="n861" class="pln"><a href="#n861">861</a></p>
<p id="n862" class="stm mis"><a href="#n862">862</a></p>
<p id="n863" class="stm mis"><a href="#n863">863</a></p>
<p id="n864" class="stm mis"><a href="#n864">864</a></p>
<p id="n865" class="exc"><a href="#n865">865</a></p>
<p id="n866" class="pln"><a href="#n866">866</a></p>
<p id="n867" class="pln"><a href="#n867">867</a></p>
<p id="n868" class="pln"><a href="#n868">868</a></p>
<p id="n869" class="stm run hide_run"><a href="#n869">869</a></p>
<p id="n870" class="pln"><a href="#n870">870</a></p>
<p id="n871" class="pln"><a href="#n871">871</a></p>
<p id="n872" class="pln"><a href="#n872">872</a></p>
<p id="n873" class="pln"><a href="#n873">873</a></p>
<p id="n874" class="pln"><a href="#n874">874</a></p>
<p id="n875" class="pln"><a href="#n875">875</a></p>
<p id="n876" class="pln"><a href="#n876">876</a></p>
<p id="n877" class="pln"><a href="#n877">877</a></p>
<p id="n878" class="pln"><a href="#n878">878</a></p>
<p id="n879" class="pln"><a href="#n879">879</a></p>
<p id="n880" class="pln"><a href="#n880">880</a></p>
<p id="n881" class="pln"><a href="#n881">881</a></p>
<p id="n882" class="stm mis"><a href="#n882">882</a></p>
<p id="n883" class="pln"><a href="#n883">883</a></p>
<p id="n884" class="pln"><a href="#n884">884</a></p>
<p id="n885" class="pln"><a href="#n885">885</a></p>
<p id="n886" class="pln"><a href="#n886">886</a></p>
<p id="n887" class="pln"><a href="#n887">887</a></p>
<p id="n888" class="stm run hide_run"><a href="#n888">888</a></p>
<p id="n889" class="pln"><a href="#n889">889</a></p>
<p id="n890" class="stm mis"><a href="#n890">890</a></p>
<p id="n891" class="pln"><a href="#n891">891</a></p>
<p id="n892" class="stm run hide_run"><a href="#n892">892</a></p>
<p id="n893" class="pln"><a href="#n893">893</a></p>
<p id="n894" class="pln"><a href="#n894">894</a></p>
<p id="n895" class="pln"><a href="#n895">895</a></p>
<p id="n896" class="pln"><a href="#n896">896</a></p>
<p id="n897" class="pln"><a href="#n897">897</a></p>
<p id="n898" class="pln"><a href="#n898">898</a></p>
<p id="n899" class="pln"><a href="#n899">899</a></p>
<p id="n900" class="pln"><a href="#n900">900</a></p>
<p id="n901" class="stm mis"><a href="#n901">901</a></p>
<p id="n902" class="stm mis"><a href="#n902">902</a></p>
<p id="n903" class="pln"><a href="#n903">903</a></p>
<p id="n904" class="stm run hide_run"><a href="#n904">904</a></p>
<p id="n905" class="pln"><a href="#n905">905</a></p>
<p id="n906" class="pln"><a href="#n906">906</a></p>
<p id="n907" class="stm run hide_run"><a href="#n907">907</a></p>
<p id="n908" class="pln"><a href="#n908">908</a></p>
<p id="n909" class="pln"><a href="#n909">909</a></p>
<p id="n910" class="pln"><a href="#n910">910</a></p>
<p id="n911" class="pln"><a href="#n911">911</a></p>
<p id="n912" class="pln"><a href="#n912">912</a></p>
<p id="n913" class="pln"><a href="#n913">913</a></p>
<p id="n914" class="pln"><a href="#n914">914</a></p>
<p id="n915" class="pln"><a href="#n915">915</a></p>
<p id="n916" class="pln"><a href="#n916">916</a></p>
<p id="n917" class="pln"><a href="#n917">917</a></p>
<p id="n918" class="pln"><a href="#n918">918</a></p>
<p id="n919" class="pln"><a href="#n919">919</a></p>
<p id="n920" class="pln"><a href="#n920">920</a></p>
<p id="n921" class="pln"><a href="#n921">921</a></p>
<p id="n922" class="pln"><a href="#n922">922</a></p>
<p id="n923" class="pln"><a href="#n923">923</a></p>
<p id="n924" class="stm run hide_run"><a href="#n924">924</a></p>
<p id="n925" class="stm run hide_run"><a href="#n925">925</a></p>
<p id="n926" class="stm run hide_run"><a href="#n926">926</a></p>
<p id="n927" class="stm run hide_run"><a href="#n927">927</a></p>
<p id="n928" class="pln"><a href="#n928">928</a></p>
<p id="n929" class="stm run hide_run"><a href="#n929">929</a></p>
<p id="n930" class="stm run hide_run"><a href="#n930">930</a></p>
<p id="n931" class="pln"><a href="#n931">931</a></p>
<p id="n932" class="pln"><a href="#n932">932</a></p>
<p id="n933" class="pln"><a href="#n933">933</a></p>
<p id="n934" class="pln"><a href="#n934">934</a></p>
<p id="n935" class="pln"><a href="#n935">935</a></p>
<p id="n936" class="pln"><a href="#n936">936</a></p>
<p id="n937" class="pln"><a href="#n937">937</a></p>
<p id="n938" class="stm run hide_run"><a href="#n938">938</a></p>
<p id="n939" class="stm run hide_run"><a href="#n939">939</a></p>
<p id="n940" class="pln"><a href="#n940">940</a></p>
<p id="n941" class="pln"><a href="#n941">941</a></p>
<p id="n942" class="pln"><a href="#n942">942</a></p>
<p id="n943" class="pln"><a href="#n943">943</a></p>
<p id="n944" class="pln"><a href="#n944">944</a></p>
<p id="n945" class="pln"><a href="#n945">945</a></p>
<p id="n946" class="pln"><a href="#n946">946</a></p>
<p id="n947" class="pln"><a href="#n947">947</a></p>
<p id="n948" class="pln"><a href="#n948">948</a></p>
<p id="n949" class="pln"><a href="#n949">949</a></p>
<p id="n950" class="pln"><a href="#n950">950</a></p>
<p id="n951" class="pln"><a href="#n951">951</a></p>
<p id="n952" class="pln"><a href="#n952">952</a></p>
<p id="n953" class="pln"><a href="#n953">953</a></p>
<p id="n954" class="pln"><a href="#n954">954</a></p>
<p id="n955" class="pln"><a href="#n955">955</a></p>
<p id="n956" class="pln"><a href="#n956">956</a></p>
<p id="n957" class="stm run hide_run"><a href="#n957">957</a></p>
<p id="n958" class="pln"><a href="#n958">958</a></p>
<p id="n959" class="pln"><a href="#n959">959</a></p>
<p id="n960" class="pln"><a href="#n960">960</a></p>
<p id="n961" class="stm run hide_run"><a href="#n961">961</a></p>
<p id="n962" class="stm run hide_run"><a href="#n962">962</a></p>
<p id="n963" class="pln"><a href="#n963">963</a></p>
<p id="n964" class="stm run hide_run"><a href="#n964">964</a></p>
<p id="n965" class="pln"><a href="#n965">965</a></p>
<p id="n966" class="stm run hide_run"><a href="#n966">966</a></p>
<p id="n967" class="pln"><a href="#n967">967</a></p>
<p id="n968" class="pln"><a href="#n968">968</a></p>
<p id="n969" class="pln"><a href="#n969">969</a></p>
<p id="n970" class="pln"><a href="#n970">970</a></p>
<p id="n971" class="pln"><a href="#n971">971</a></p>
<p id="n972" class="pln"><a href="#n972">972</a></p>
<p id="n973" class="pln"><a href="#n973">973</a></p>
<p id="n974" class="pln"><a href="#n974">974</a></p>
<p id="n975" class="pln"><a href="#n975">975</a></p>
<p id="n976" class="stm mis"><a href="#n976">976</a></p>
<p id="n977" class="stm mis"><a href="#n977">977</a></p>
<p id="n978" class="pln"><a href="#n978">978</a></p>
<p id="n979" class="stm run hide_run"><a href="#n979">979</a></p>
<p id="n980" class="stm run hide_run"><a href="#n980">980</a></p>
<p id="n981" class="pln"><a href="#n981">981</a></p>
<p id="n982" class="pln"><a href="#n982">982</a></p>
<p id="n983" class="pln"><a href="#n983">983</a></p>
<p id="n984" class="pln"><a href="#n984">984</a></p>
<p id="n985" class="pln"><a href="#n985">985</a></p>
<p id="n986" class="pln"><a href="#n986">986</a></p>
<p id="n987" class="pln"><a href="#n987">987</a></p>
<p id="n988" class="pln"><a href="#n988">988</a></p>
<p id="n989" class="pln"><a href="#n989">989</a></p>
<p id="n990" class="pln"><a href="#n990">990</a></p>
<p id="n991" class="pln"><a href="#n991">991</a></p>
<p id="n992" class="pln"><a href="#n992">992</a></p>
<p id="n993" class="pln"><a href="#n993">993</a></p>
<p id="n994" class="pln"><a href="#n994">994</a></p>
<p id="n995" class="pln"><a href="#n995">995</a></p>
<p id="n996" class="pln"><a href="#n996">996</a></p>
<p id="n997" class="pln"><a href="#n997">997</a></p>
<p id="n998" class="pln"><a href="#n998">998</a></p>
<p id="n999" class="pln"><a href="#n999">999</a></p>
<p id="n1000" class="pln"><a href="#n1000">1000</a></p>
<p id="n1001" class="pln"><a href="#n1001">1001</a></p>
<p id="n1002" class="pln"><a href="#n1002">1002</a></p>
<p id="n1003" class="pln"><a href="#n1003">1003</a></p>
<p id="n1004" class="pln"><a href="#n1004">1004</a></p>
<p id="n1005" class="pln"><a href="#n1005">1005</a></p>
<p id="n1006" class="pln"><a href="#n1006">1006</a></p>
<p id="n1007" class="pln"><a href="#n1007">1007</a></p>
<p id="n1008" class="pln"><a href="#n1008">1008</a></p>
<p id="n1009" class="pln"><a href="#n1009">1009</a></p>
<p id="n1010" class="pln"><a href="#n1010">1010</a></p>
<p id="n1011" class="pln"><a href="#n1011">1011</a></p>
<p id="n1012" class="pln"><a href="#n1012">1012</a></p>
<p id="n1013" class="pln"><a href="#n1013">1013</a></p>
<p id="n1014" class="pln"><a href="#n1014">1014</a></p>
<p id="n1015" class="stm par run hide_run"><a href="#n1015">1015</a></p>
<p id="n1016" class="stm run hide_run"><a href="#n1016">1016</a></p>
<p id="n1017" class="stm run hide_run"><a href="#n1017">1017</a></p>
<p id="n1018" class="stm run hide_run"><a href="#n1018">1018</a></p>
<p id="n1019" class="stm run hide_run"><a href="#n1019">1019</a></p>
<p id="n1020" class="stm run hide_run"><a href="#n1020">1020</a></p>
<p id="n1021" class="stm run hide_run"><a href="#n1021">1021</a></p>
<p id="n1022" class="stm run hide_run"><a href="#n1022">1022</a></p>
<p id="n1023" class="stm run hide_run"><a href="#n1023">1023</a></p>
<p id="n1024" class="stm run hide_run"><a href="#n1024">1024</a></p>
<p id="n1025" class="stm run hide_run"><a href="#n1025">1025</a></p>
<p id="n1026" class="pln"><a href="#n1026">1026</a></p>
<p id="n1027" class="stm run hide_run"><a href="#n1027">1027</a></p>
<p id="n1028" class="pln"><a href="#n1028">1028</a></p>
<p id="n1029" class="pln"><a href="#n1029">1029</a></p>
<p id="n1030" class="pln"><a href="#n1030">1030</a></p>
<p id="n1031" class="pln"><a href="#n1031">1031</a></p>
<p id="n1032" class="pln"><a href="#n1032">1032</a></p>
<p id="n1033" class="stm run hide_run"><a href="#n1033">1033</a></p>
<p id="n1034" class="stm run hide_run"><a href="#n1034">1034</a></p>
<p id="n1035" class="stm run hide_run"><a href="#n1035">1035</a></p>
<p id="n1036" class="stm run hide_run"><a href="#n1036">1036</a></p>
<p id="n1037" class="stm par run hide_run"><a href="#n1037">1037</a></p>
<p id="n1038" class="stm run hide_run"><a href="#n1038">1038</a></p>
<p id="n1039" class="stm run hide_run"><a href="#n1039">1039</a></p>
<p id="n1040" class="pln"><a href="#n1040">1040</a></p>
<p id="n1041" class="pln"><a href="#n1041">1041</a></p>
<p id="n1042" class="pln"><a href="#n1042">1042</a></p>
<p id="n1043" class="pln"><a href="#n1043">1043</a></p>
<p id="n1044" class="stm run hide_run"><a href="#n1044">1044</a></p>
<p id="n1045" class="stm run hide_run"><a href="#n1045">1045</a></p>
<p id="n1046" class="pln"><a href="#n1046">1046</a></p>
<p id="n1047" class="pln"><a href="#n1047">1047</a></p>
<p id="n1048" class="pln"><a href="#n1048">1048</a></p>
<p id="n1049" class="pln"><a href="#n1049">1049</a></p>
<p id="n1050" class="pln"><a href="#n1050">1050</a></p>
<p id="n1051" class="pln"><a href="#n1051">1051</a></p>
<p id="n1052" class="pln"><a href="#n1052">1052</a></p>
<p id="n1053" class="pln"><a href="#n1053">1053</a></p>
<p id="n1054" class="pln"><a href="#n1054">1054</a></p>
<p id="n1055" class="pln"><a href="#n1055">1055</a></p>
<p id="n1056" class="pln"><a href="#n1056">1056</a></p>
<p id="n1057" class="pln"><a href="#n1057">1057</a></p>
<p id="n1058" class="pln"><a href="#n1058">1058</a></p>
<p id="n1059" class="stm par run hide_run"><a href="#n1059">1059</a></p>
<p id="n1060" class="stm mis"><a href="#n1060">1060</a></p>
<p id="n1061" class="stm run hide_run"><a href="#n1061">1061</a></p>
<p id="n1062" class="stm run hide_run"><a href="#n1062">1062</a></p>
<p id="n1063" class="stm run hide_run"><a href="#n1063">1063</a></p>
<p id="n1064" class="stm run hide_run"><a href="#n1064">1064</a></p>
<p id="n1065" class="stm run hide_run"><a href="#n1065">1065</a></p>
<p id="n1066" class="stm run hide_run"><a href="#n1066">1066</a></p>
<p id="n1067" class="stm run hide_run"><a href="#n1067">1067</a></p>
<p id="n1068" class="stm run hide_run"><a href="#n1068">1068</a></p>
<p id="n1069" class="pln"><a href="#n1069">1069</a></p>
<p id="n1070" class="pln"><a href="#n1070">1070</a></p>
<p id="n1071" class="pln"><a href="#n1071">1071</a></p>
<p id="n1072" class="pln"><a href="#n1072">1072</a></p>
<p id="n1073" class="stm run hide_run"><a href="#n1073">1073</a></p>
<p id="n1074" class="stm run hide_run"><a href="#n1074">1074</a></p>
<p id="n1075" class="pln"><a href="#n1075">1075</a></p>
<p id="n1076" class="pln"><a href="#n1076">1076</a></p>
<p id="n1077" class="pln"><a href="#n1077">1077</a></p>
<p id="n1078" class="pln"><a href="#n1078">1078</a></p>
<p id="n1079" class="pln"><a href="#n1079">1079</a></p>
<p id="n1080" class="pln"><a href="#n1080">1080</a></p>
<p id="n1081" class="pln"><a href="#n1081">1081</a></p>
<p id="n1082" class="pln"><a href="#n1082">1082</a></p>
<p id="n1083" class="pln"><a href="#n1083">1083</a></p>
<p id="n1084" class="pln"><a href="#n1084">1084</a></p>
<p id="n1085" class="pln"><a href="#n1085">1085</a></p>
<p id="n1086" class="stm par run hide_run"><a href="#n1086">1086</a></p>
<p id="n1087" class="stm run hide_run"><a href="#n1087">1087</a></p>
<p id="n1088" class="stm run hide_run"><a href="#n1088">1088</a></p>
<p id="n1089" class="stm run hide_run"><a href="#n1089">1089</a></p>
<p id="n1090" class="stm run hide_run"><a href="#n1090">1090</a></p>
<p id="n1091" class="stm run hide_run"><a href="#n1091">1091</a></p>
<p id="n1092" class="stm par run hide_run"><a href="#n1092">1092</a></p>
<p id="n1093" class="stm run hide_run"><a href="#n1093">1093</a></p>
<p id="n1094" class="stm run hide_run"><a href="#n1094">1094</a></p>
<p id="n1095" class="stm run hide_run"><a href="#n1095">1095</a></p>
<p id="n1096" class="stm run hide_run"><a href="#n1096">1096</a></p>
<p id="n1097" class="pln"><a href="#n1097">1097</a></p>
<p id="n1098" class="stm run hide_run"><a href="#n1098">1098</a></p>
<p id="n1099" class="stm run hide_run"><a href="#n1099">1099</a></p>
<p id="n1100" class="pln"><a href="#n1100">1100</a></p>
<p id="n1101" class="pln"><a href="#n1101">1101</a></p>
<p id="n1102" class="pln"><a href="#n1102">1102</a></p>
<p id="n1103" class="pln"><a href="#n1103">1103</a></p>
<p id="n1104" class="pln"><a href="#n1104">1104</a></p>
<p id="n1105" class="pln"><a href="#n1105">1105</a></p>
<p id="n1106" class="pln"><a href="#n1106">1106</a></p>
<p id="n1107" class="pln"><a href="#n1107">1107</a></p>
<p id="n1108" class="pln"><a href="#n1108">1108</a></p>
<p id="n1109" class="pln"><a href="#n1109">1109</a></p>
<p id="n1110" class="pln"><a href="#n1110">1110</a></p>
<p id="n1111" class="pln"><a href="#n1111">1111</a></p>
<p id="n1112" class="pln"><a href="#n1112">1112</a></p>
<p id="n1113" class="pln"><a href="#n1113">1113</a></p>
<p id="n1114" class="pln"><a href="#n1114">1114</a></p>
<p id="n1115" class="pln"><a href="#n1115">1115</a></p>
<p id="n1116" class="pln"><a href="#n1116">1116</a></p>
<p id="n1117" class="pln"><a href="#n1117">1117</a></p>
<p id="n1118" class="pln"><a href="#n1118">1118</a></p>
<p id="n1119" class="pln"><a href="#n1119">1119</a></p>
<p id="n1120" class="pln"><a href="#n1120">1120</a></p>
<p id="n1121" class="pln"><a href="#n1121">1121</a></p>
<p id="n1122" class="pln"><a href="#n1122">1122</a></p>
<p id="n1123" class="pln"><a href="#n1123">1123</a></p>
<p id="n1124" class="pln"><a href="#n1124">1124</a></p>
<p id="n1125" class="pln"><a href="#n1125">1125</a></p>
<p id="n1126" class="pln"><a href="#n1126">1126</a></p>
<p id="n1127" class="pln"><a href="#n1127">1127</a></p>
<p id="n1128" class="pln"><a href="#n1128">1128</a></p>
<p id="n1129" class="pln"><a href="#n1129">1129</a></p>
<p id="n1130" class="pln"><a href="#n1130">1130</a></p>
<p id="n1131" class="pln"><a href="#n1131">1131</a></p>
<p id="n1132" class="stm run hide_run"><a href="#n1132">1132</a></p>
<p id="n1133" class="stm run hide_run"><a href="#n1133">1133</a></p>
<p id="n1134" class="stm run hide_run"><a href="#n1134">1134</a></p>
<p id="n1135" class="stm run hide_run"><a href="#n1135">1135</a></p>
<p id="n1136" class="stm run hide_run"><a href="#n1136">1136</a></p>
<p id="n1137" class="stm run hide_run"><a href="#n1137">1137</a></p>
<p id="n1138" class="stm run hide_run"><a href="#n1138">1138</a></p>
<p id="n1139" class="stm run hide_run"><a href="#n1139">1139</a></p>
<p id="n1140" class="stm run hide_run"><a href="#n1140">1140</a></p>
<p id="n1141" class="stm run hide_run"><a href="#n1141">1141</a></p>
<p id="n1142" class="stm par run hide_run"><a href="#n1142">1142</a></p>
<p id="n1143" class="stm mis"><a href="#n1143">1143</a></p>
<p id="n1144" class="stm run hide_run"><a href="#n1144">1144</a></p>
<p id="n1145" class="stm run hide_run"><a href="#n1145">1145</a></p>
<p id="n1146" class="stm run hide_run"><a href="#n1146">1146</a></p>
<p id="n1147" class="stm par run hide_run"><a href="#n1147">1147</a></p>
<p id="n1148" class="stm mis"><a href="#n1148">1148</a></p>
<p id="n1149" class="stm run hide_run"><a href="#n1149">1149</a></p>
<p id="n1150" class="pln"><a href="#n1150">1150</a></p>
<p id="n1151" class="pln"><a href="#n1151">1151</a></p>
<p id="n1152" class="stm run hide_run"><a href="#n1152">1152</a></p>
<p id="n1153" class="stm par run hide_run"><a href="#n1153">1153</a></p>
<p id="n1154" class="stm mis"><a href="#n1154">1154</a></p>
<p id="n1155" class="stm run hide_run"><a href="#n1155">1155</a></p>
<p id="n1156" class="pln"><a href="#n1156">1156</a></p>
<p id="n1157" class="stm run hide_run"><a href="#n1157">1157</a></p>
<p id="n1158" class="stm run hide_run"><a href="#n1158">1158</a></p>
<p id="n1159" class="pln"><a href="#n1159">1159</a></p>
<p id="n1160" class="pln"><a href="#n1160">1160</a></p>
<p id="n1161" class="pln"><a href="#n1161">1161</a></p>
<p id="n1162" class="pln"><a href="#n1162">1162</a></p>
<p id="n1163" class="pln"><a href="#n1163">1163</a></p>
<p id="n1164" class="pln"><a href="#n1164">1164</a></p>
<p id="n1165" class="pln"><a href="#n1165">1165</a></p>
<p id="n1166" class="pln"><a href="#n1166">1166</a></p>
<p id="n1167" class="pln"><a href="#n1167">1167</a></p>
<p id="n1168" class="pln"><a href="#n1168">1168</a></p>
<p id="n1169" class="pln"><a href="#n1169">1169</a></p>
<p id="n1170" class="pln"><a href="#n1170">1170</a></p>
<p id="n1171" class="pln"><a href="#n1171">1171</a></p>
<p id="n1172" class="pln"><a href="#n1172">1172</a></p>
<p id="n1173" class="pln"><a href="#n1173">1173</a></p>
<p id="n1174" class="pln"><a href="#n1174">1174</a></p>
<p id="n1175" class="pln"><a href="#n1175">1175</a></p>
<p id="n1176" class="pln"><a href="#n1176">1176</a></p>
<p id="n1177" class="pln"><a href="#n1177">1177</a></p>
<p id="n1178" class="pln"><a href="#n1178">1178</a></p>
<p id="n1179" class="pln"><a href="#n1179">1179</a></p>
<p id="n1180" class="pln"><a href="#n1180">1180</a></p>
<p id="n1181" class="pln"><a href="#n1181">1181</a></p>
<p id="n1182" class="pln"><a href="#n1182">1182</a></p>
<p id="n1183" class="pln"><a href="#n1183">1183</a></p>
<p id="n1184" class="stm mis"><a href="#n1184">1184</a></p>
<p id="n1185" class="stm mis"><a href="#n1185">1185</a></p>
<p id="n1186" class="stm mis"><a href="#n1186">1186</a></p>
<p id="n1187" class="stm mis"><a href="#n1187">1187</a></p>
<p id="n1188" class="stm mis"><a href="#n1188">1188</a></p>
<p id="n1189" class="stm mis"><a href="#n1189">1189</a></p>
<p id="n1190" class="stm mis"><a href="#n1190">1190</a></p>
<p id="n1191" class="stm mis"><a href="#n1191">1191</a></p>
<p id="n1192" class="pln"><a href="#n1192">1192</a></p>
<p id="n1193" class="pln"><a href="#n1193">1193</a></p>
<p id="n1194" class="stm mis"><a href="#n1194">1194</a></p>
<p id="n1195" class="stm mis"><a href="#n1195">1195</a></p>
<p id="n1196" class="stm mis"><a href="#n1196">1196</a></p>
<p id="n1197" class="stm mis"><a href="#n1197">1197</a></p>
<p id="n1198" class="stm mis"><a href="#n1198">1198</a></p>
<p id="n1199" class="stm mis"><a href="#n1199">1199</a></p>
<p id="n1200" class="stm mis"><a href="#n1200">1200</a></p>
<p id="n1201" class="pln"><a href="#n1201">1201</a></p>
<p id="n1202" class="stm mis"><a href="#n1202">1202</a></p>
<p id="n1203" class="stm mis"><a href="#n1203">1203</a></p>
<p id="n1204" class="stm mis"><a href="#n1204">1204</a></p>
<p id="n1205" class="stm mis"><a href="#n1205">1205</a></p>
<p id="n1206" class="pln"><a href="#n1206">1206</a></p>
<p id="n1207" class="stm mis"><a href="#n1207">1207</a></p>
<p id="n1208" class="pln"><a href="#n1208">1208</a></p>
<p id="n1209" class="stm mis"><a href="#n1209">1209</a></p>
<p id="n1210" class="stm mis"><a href="#n1210">1210</a></p>
<p id="n1211" class="pln"><a href="#n1211">1211</a></p>
<p id="n1212" class="stm mis"><a href="#n1212">1212</a></p>
<p id="n1213" class="stm mis"><a href="#n1213">1213</a></p>
<p id="n1214" class="stm mis"><a href="#n1214">1214</a></p>
<p id="n1215" class="stm mis"><a href="#n1215">1215</a></p>
<p id="n1216" class="stm mis"><a href="#n1216">1216</a></p>
<p id="n1217" class="stm mis"><a href="#n1217">1217</a></p>
<p id="n1218" class="pln"><a href="#n1218">1218</a></p>
<p id="n1219" class="pln"><a href="#n1219">1219</a></p>
<p id="n1220" class="stm run hide_run"><a href="#n1220">1220</a></p>
<p id="n1221" class="pln"><a href="#n1221">1221</a></p>
<p id="n1222" class="pln"><a href="#n1222">1222</a></p>
<p id="n1223" class="stm run hide_run"><a href="#n1223">1223</a></p>
<p id="n1224" class="pln"><a href="#n1224">1224</a></p>
<p id="n1225" class="pln"><a href="#n1225">1225</a></p>
<p id="n1226" class="pln"><a href="#n1226">1226</a></p>
<p id="n1227" class="pln"><a href="#n1227">1227</a></p>
<p id="n1228" class="pln"><a href="#n1228">1228</a></p>
<p id="n1229" class="pln"><a href="#n1229">1229</a></p>
<p id="n1230" class="pln"><a href="#n1230">1230</a></p>
<p id="n1231" class="pln"><a href="#n1231">1231</a></p>
<p id="n1232" class="pln"><a href="#n1232">1232</a></p>
<p id="n1233" class="pln"><a href="#n1233">1233</a></p>
<p id="n1234" class="stm run hide_run"><a href="#n1234">1234</a></p>
<p id="n1235" class="pln"><a href="#n1235">1235</a></p>
<p id="n1236" class="pln"><a href="#n1236">1236</a></p>
<p id="n1237" class="pln"><a href="#n1237">1237</a></p>
<p id="n1238" class="pln"><a href="#n1238">1238</a></p>
<p id="n1239" class="pln"><a href="#n1239">1239</a></p>
<p id="n1240" class="pln"><a href="#n1240">1240</a></p>
<p id="n1241" class="pln"><a href="#n1241">1241</a></p>
<p id="n1242" class="pln"><a href="#n1242">1242</a></p>
<p id="n1243" class="pln"><a href="#n1243">1243</a></p>
<p id="n1244" class="stm run hide_run"><a href="#n1244">1244</a></p>
<p id="n1245" class="stm run hide_run"><a href="#n1245">1245</a></p>
<p id="n1246" class="stm run hide_run"><a href="#n1246">1246</a></p>
<p id="n1247" class="stm run hide_run"><a href="#n1247">1247</a></p>
<p id="n1248" class="stm run hide_run"><a href="#n1248">1248</a></p>
<p id="n1249" class="pln"><a href="#n1249">1249</a></p>
<p id="n1250" class="stm run hide_run"><a href="#n1250">1250</a></p>
<p id="n1251" class="stm mis"><a href="#n1251">1251</a></p>
<p id="n1252" class="stm mis"><a href="#n1252">1252</a></p>
<p id="n1253" class="stm mis"><a href="#n1253">1253</a></p>
<p id="n1254" class="stm mis"><a href="#n1254">1254</a></p>
<p id="n1255" class="stm mis"><a href="#n1255">1255</a></p>
<p id="n1256" class="stm mis"><a href="#n1256">1256</a></p>
<p id="n1257" class="stm mis"><a href="#n1257">1257</a></p>
<p id="n1258" class="pln"><a href="#n1258">1258</a></p>
<p id="n1259" class="stm mis"><a href="#n1259">1259</a></p>
<p id="n1260" class="stm mis"><a href="#n1260">1260</a></p>
<p id="n1261" class="pln"><a href="#n1261">1261</a></p>
<p id="n1262" class="stm run hide_run"><a href="#n1262">1262</a></p>
<p id="n1263" class="stm mis"><a href="#n1263">1263</a></p>
<p id="n1264" class="stm mis"><a href="#n1264">1264</a></p>
<p id="n1265" class="stm mis"><a href="#n1265">1265</a></p>
<p id="n1266" class="stm mis"><a href="#n1266">1266</a></p>
<p id="n1267" class="stm mis"><a href="#n1267">1267</a></p>
<p id="n1268" class="stm mis"><a href="#n1268">1268</a></p>
<p id="n1269" class="stm mis"><a href="#n1269">1269</a></p>
<p id="n1270" class="stm mis"><a href="#n1270">1270</a></p>
<p id="n1271" class="stm mis"><a href="#n1271">1271</a></p>
<p id="n1272" class="stm mis"><a href="#n1272">1272</a></p>
<p id="n1273" class="stm mis"><a href="#n1273">1273</a></p>
<p id="n1274" class="pln"><a href="#n1274">1274</a></p>
<p id="n1275" class="stm run hide_run"><a href="#n1275">1275</a></p>
<p id="n1276" class="stm mis"><a href="#n1276">1276</a></p>
<p id="n1277" class="pln"><a href="#n1277">1277</a></p>
<p id="n1278" class="stm run hide_run"><a href="#n1278">1278</a></p>
<p id="n1279" class="stm mis"><a href="#n1279">1279</a></p>
<p id="n1280" class="pln"><a href="#n1280">1280</a></p>
<p id="n1281" class="stm run hide_run"><a href="#n1281">1281</a></p>
<p id="n1282" class="pln"><a href="#n1282">1282</a></p>
<p id="n1283" class="stm mis"><a href="#n1283">1283</a></p>
<p id="n1284" class="pln"><a href="#n1284">1284</a></p>
<p id="n1285" class="stm run hide_run"><a href="#n1285">1285</a></p>
<p id="n1286" class="pln"><a href="#n1286">1286</a></p>
<p id="n1287" class="stm mis"><a href="#n1287">1287</a></p>
<p id="n1288" class="pln"><a href="#n1288">1288</a></p>
<p id="n1289" class="pln"><a href="#n1289">1289</a></p>
<p id="n1290" class="stm run hide_run"><a href="#n1290">1290</a></p>
<p id="n1291" class="pln"><a href="#n1291">1291</a></p>
<p id="n1292" class="pln"><a href="#n1292">1292</a></p>
<p id="n1293" class="pln"><a href="#n1293">1293</a></p>
<p id="n1294" class="pln"><a href="#n1294">1294</a></p>
<p id="n1295" class="pln"><a href="#n1295">1295</a></p>
<p id="n1296" class="pln"><a href="#n1296">1296</a></p>
<p id="n1297" class="pln"><a href="#n1297">1297</a></p>
<p id="n1298" class="pln"><a href="#n1298">1298</a></p>
<p id="n1299" class="pln"><a href="#n1299">1299</a></p>
<p id="n1300" class="pln"><a href="#n1300">1300</a></p>
<p id="n1301" class="pln"><a href="#n1301">1301</a></p>
<p id="n1302" class="pln"><a href="#n1302">1302</a></p>
<p id="n1303" class="stm run hide_run"><a href="#n1303">1303</a></p>
<p id="n1304" class="pln"><a href="#n1304">1304</a></p>
<p id="n1305" class="pln"><a href="#n1305">1305</a></p>
<p id="n1306" class="pln"><a href="#n1306">1306</a></p>
<p id="n1307" class="pln"><a href="#n1307">1307</a></p>
<p id="n1308" class="pln"><a href="#n1308">1308</a></p>
<p id="n1309" class="pln"><a href="#n1309">1309</a></p>
<p id="n1310" class="pln"><a href="#n1310">1310</a></p>
<p id="n1311" class="pln"><a href="#n1311">1311</a></p>
<p id="n1312" class="pln"><a href="#n1312">1312</a></p>
<p id="n1313" class="pln"><a href="#n1313">1313</a></p>
<p id="n1314" class="pln"><a href="#n1314">1314</a></p>
<p id="n1315" class="pln"><a href="#n1315">1315</a></p>
<p id="n1316" class="stm mis"><a href="#n1316">1316</a></p>
<p id="n1317" class="stm mis"><a href="#n1317">1317</a></p>
<p id="n1318" class="stm mis"><a href="#n1318">1318</a></p>
<p id="n1319" class="stm mis"><a href="#n1319">1319</a></p>
<p id="n1320" class="stm mis"><a href="#n1320">1320</a></p>
<p id="n1321" class="stm mis"><a href="#n1321">1321</a></p>
<p id="n1322" class="pln"><a href="#n1322">1322</a></p>
<p id="n1323" class="stm run hide_run"><a href="#n1323">1323</a></p>
<p id="n1324" class="stm mis"><a href="#n1324">1324</a></p>
<p id="n1325" class="stm mis"><a href="#n1325">1325</a></p>
<p id="n1326" class="stm mis"><a href="#n1326">1326</a></p>
<p id="n1327" class="stm mis"><a href="#n1327">1327</a></p>
<p id="n1328" class="stm mis"><a href="#n1328">1328</a></p>
<p id="n1329" class="stm mis"><a href="#n1329">1329</a></p>
<p id="n1330" class="stm mis"><a href="#n1330">1330</a></p>
<p id="n1331" class="pln"><a href="#n1331">1331</a></p>
<p id="n1332" class="stm mis"><a href="#n1332">1332</a></p>
<p id="n1333" class="stm mis"><a href="#n1333">1333</a></p>
<p id="n1334" class="pln"><a href="#n1334">1334</a></p>
<p id="n1335" class="stm run hide_run"><a href="#n1335">1335</a></p>
<p id="n1336" class="stm mis"><a href="#n1336">1336</a></p>
<p id="n1337" class="stm mis"><a href="#n1337">1337</a></p>
<p id="n1338" class="stm mis"><a href="#n1338">1338</a></p>
<p id="n1339" class="stm mis"><a href="#n1339">1339</a></p>
<p id="n1340" class="stm mis"><a href="#n1340">1340</a></p>
<p id="n1341" class="stm mis"><a href="#n1341">1341</a></p>
<p id="n1342" class="stm mis"><a href="#n1342">1342</a></p>
<p id="n1343" class="stm mis"><a href="#n1343">1343</a></p>
<p id="n1344" class="stm mis"><a href="#n1344">1344</a></p>
<p id="n1345" class="stm mis"><a href="#n1345">1345</a></p>
<p id="n1346" class="stm mis"><a href="#n1346">1346</a></p>
<p id="n1347" class="stm mis"><a href="#n1347">1347</a></p>
<p id="n1348" class="pln"><a href="#n1348">1348</a></p>
<p id="n1349" class="stm mis"><a href="#n1349">1349</a></p>
<p id="n1350" class="pln"><a href="#n1350">1350</a></p>
<p id="n1351" class="stm run hide_run"><a href="#n1351">1351</a></p>
<p id="n1352" class="stm mis"><a href="#n1352">1352</a></p>
<p id="n1353" class="pln"><a href="#n1353">1353</a></p>
<p id="n1354" class="stm run hide_run"><a href="#n1354">1354</a></p>
<p id="n1355" class="stm mis"><a href="#n1355">1355</a></p>
<p id="n1356" class="pln"><a href="#n1356">1356</a></p>
<p id="n1357" class="stm run hide_run"><a href="#n1357">1357</a></p>
<p id="n1358" class="pln"><a href="#n1358">1358</a></p>
<p id="n1359" class="stm mis"><a href="#n1359">1359</a></p>
<p id="n1360" class="pln"><a href="#n1360">1360</a></p>
<p id="n1361" class="stm run hide_run"><a href="#n1361">1361</a></p>
<p id="n1362" class="pln"><a href="#n1362">1362</a></p>
<p id="n1363" class="stm mis"><a href="#n1363">1363</a></p>
<p id="n1364" class="pln"><a href="#n1364">1364</a></p>
<p id="n1365" class="pln"><a href="#n1365">1365</a></p>
<p id="n1366" class="stm run hide_run"><a href="#n1366">1366</a></p>
<p id="n1367" class="stm run hide_run"><a href="#n1367">1367</a></p>
<p id="n1368" class="pln"><a href="#n1368">1368</a></p>
<p id="n1369" class="pln"><a href="#n1369">1369</a></p>
<p id="n1370" class="pln"><a href="#n1370">1370</a></p>
<p id="n1371" class="pln"><a href="#n1371">1371</a></p>
<p id="n1372" class="pln"><a href="#n1372">1372</a></p>
<p id="n1373" class="pln"><a href="#n1373">1373</a></p>
<p id="n1374" class="stm mis"><a href="#n1374">1374</a></p>
<p id="n1375" class="stm mis"><a href="#n1375">1375</a></p>
<p id="n1376" class="pln"><a href="#n1376">1376</a></p>
<p id="n1377" class="stm run hide_run"><a href="#n1377">1377</a></p>
<p id="n1378" class="stm mis"><a href="#n1378">1378</a></p>
<p id="n1379" class="stm mis"><a href="#n1379">1379</a></p>
<p id="n1380" class="stm mis"><a href="#n1380">1380</a></p>
<p id="n1381" class="pln"><a href="#n1381">1381</a></p>
<p id="n1382" class="stm run hide_run"><a href="#n1382">1382</a></p>
<p id="n1383" class="stm mis"><a href="#n1383">1383</a></p>
<p id="n1384" class="pln"><a href="#n1384">1384</a></p>
<p id="n1385" class="stm run hide_run"><a href="#n1385">1385</a></p>
<p id="n1386" class="stm mis"><a href="#n1386">1386</a></p>
<p id="n1387" class="pln"><a href="#n1387">1387</a></p>
<p id="n1388" class="pln"><a href="#n1388">1388</a></p>
<p id="n1389" class="stm run hide_run"><a href="#n1389">1389</a></p>
<p id="n1390" class="pln"><a href="#n1390">1390</a></p>
<p id="n1391" class="pln"><a href="#n1391">1391</a></p>
<p id="n1392" class="pln"><a href="#n1392">1392</a></p>
<p id="n1393" class="pln"><a href="#n1393">1393</a></p>
<p id="n1394" class="pln"><a href="#n1394">1394</a></p>
<p id="n1395" class="pln"><a href="#n1395">1395</a></p>
<p id="n1396" class="pln"><a href="#n1396">1396</a></p>
<p id="n1397" class="pln"><a href="#n1397">1397</a></p>
<p id="n1398" class="pln"><a href="#n1398">1398</a></p>
<p id="n1399" class="pln"><a href="#n1399">1399</a></p>
<p id="n1400" class="pln"><a href="#n1400">1400</a></p>
<p id="n1401" class="pln"><a href="#n1401">1401</a></p>
<p id="n1402" class="pln"><a href="#n1402">1402</a></p>
<p id="n1403" class="stm par run hide_run"><a href="#n1403">1403</a></p>
<p id="n1404" class="stm mis"><a href="#n1404">1404</a></p>
<p id="n1405" class="pln"><a href="#n1405">1405</a></p>
<p id="n1406" class="pln"><a href="#n1406">1406</a></p>
<p id="n1407" class="pln"><a href="#n1407">1407</a></p>
<p id="n1408" class="pln"><a href="#n1408">1408</a></p>
<p id="n1409" class="pln"><a href="#n1409">1409</a></p>
<p id="n1410" class="pln"><a href="#n1410">1410</a></p>
<p id="n1411" class="pln"><a href="#n1411">1411</a></p>
<p id="n1412" class="stm par run hide_run"><a href="#n1412">1412</a></p>
<p id="n1413" class="stm mis"><a href="#n1413">1413</a></p>
<p id="n1414" class="pln"><a href="#n1414">1414</a></p>
<p id="n1415" class="pln"><a href="#n1415">1415</a></p>
<p id="n1416" class="pln"><a href="#n1416">1416</a></p>
<p id="n1417" class="pln"><a href="#n1417">1417</a></p>
<p id="n1418" class="pln"><a href="#n1418">1418</a></p>
<p id="n1419" class="pln"><a href="#n1419">1419</a></p>
<p id="n1420" class="pln"><a href="#n1420">1420</a></p>
<p id="n1421" class="stm par run hide_run"><a href="#n1421">1421</a></p>
<p id="n1422" class="stm mis"><a href="#n1422">1422</a></p>
<p id="n1423" class="pln"><a href="#n1423">1423</a></p>
<p id="n1424" class="pln"><a href="#n1424">1424</a></p>
<p id="n1425" class="pln"><a href="#n1425">1425</a></p>
<p id="n1426" class="pln"><a href="#n1426">1426</a></p>
<p id="n1427" class="pln"><a href="#n1427">1427</a></p>
<p id="n1428" class="pln"><a href="#n1428">1428</a></p>
<p id="n1429" class="pln"><a href="#n1429">1429</a></p>
<p id="n1430" class="stm run hide_run"><a href="#n1430">1430</a></p>
<p id="n1431" class="stm run hide_run"><a href="#n1431">1431</a></p>
<p id="n1432" class="pln"><a href="#n1432">1432</a></p>
<p id="n1433" class="pln"><a href="#n1433">1433</a></p>
<p id="n1434" class="pln"><a href="#n1434">1434</a></p>
<p id="n1435" class="pln"><a href="#n1435">1435</a></p>
<p id="n1436" class="pln"><a href="#n1436">1436</a></p>
<p id="n1437" class="pln"><a href="#n1437">1437</a></p>
<p id="n1438" class="stm par run hide_run"><a href="#n1438">1438</a></p>
<p id="n1439" class="stm mis"><a href="#n1439">1439</a></p>
<p id="n1440" class="pln"><a href="#n1440">1440</a></p>
<p id="n1441" class="pln"><a href="#n1441">1441</a></p>
<p id="n1442" class="pln"><a href="#n1442">1442</a></p>
<p id="n1443" class="pln"><a href="#n1443">1443</a></p>
<p id="n1444" class="pln"><a href="#n1444">1444</a></p>
<p id="n1445" class="pln"><a href="#n1445">1445</a></p>
<p id="n1446" class="stm par run hide_run"><a href="#n1446">1446</a></p>
<p id="n1447" class="stm mis"><a href="#n1447">1447</a></p>
<p id="n1448" class="pln"><a href="#n1448">1448</a></p>
<p id="n1449" class="pln"><a href="#n1449">1449</a></p>
<p id="n1450" class="pln"><a href="#n1450">1450</a></p>
<p id="n1451" class="pln"><a href="#n1451">1451</a></p>
<p id="n1452" class="pln"><a href="#n1452">1452</a></p>
<p id="n1453" class="pln"><a href="#n1453">1453</a></p>
<p id="n1454" class="stm run hide_run"><a href="#n1454">1454</a></p>
<p id="n1455" class="pln"><a href="#n1455">1455</a></p>
<p id="n1456" class="pln"><a href="#n1456">1456</a></p>
<p id="n1457" class="stm run hide_run"><a href="#n1457">1457</a></p>
<p id="n1458" class="pln"><a href="#n1458">1458</a></p>
<p id="n1459" class="pln"><a href="#n1459">1459</a></p>
<p id="n1460" class="pln"><a href="#n1460">1460</a></p>
<p id="n1461" class="pln"><a href="#n1461">1461</a></p>
<p id="n1462" class="pln"><a href="#n1462">1462</a></p>
<p id="n1463" class="pln"><a href="#n1463">1463</a></p>
<p id="n1464" class="pln"><a href="#n1464">1464</a></p>
<p id="n1465" class="pln"><a href="#n1465">1465</a></p>
<p id="n1466" class="pln"><a href="#n1466">1466</a></p>
<p id="n1467" class="pln"><a href="#n1467">1467</a></p>
<p id="n1468" class="pln"><a href="#n1468">1468</a></p>
<p id="n1469" class="pln"><a href="#n1469">1469</a></p>
<p id="n1470" class="pln"><a href="#n1470">1470</a></p>
<p id="n1471" class="pln"><a href="#n1471">1471</a></p>
<p id="n1472" class="pln"><a href="#n1472">1472</a></p>
<p id="n1473" class="pln"><a href="#n1473">1473</a></p>
<p id="n1474" class="pln"><a href="#n1474">1474</a></p>
<p id="n1475" class="pln"><a href="#n1475">1475</a></p>
<p id="n1476" class="pln"><a href="#n1476">1476</a></p>
<p id="n1477" class="pln"><a href="#n1477">1477</a></p>
<p id="n1478" class="pln"><a href="#n1478">1478</a></p>
<p id="n1479" class="pln"><a href="#n1479">1479</a></p>
<p id="n1480" class="pln"><a href="#n1480">1480</a></p>
<p id="n1481" class="pln"><a href="#n1481">1481</a></p>
<p id="n1482" class="pln"><a href="#n1482">1482</a></p>
<p id="n1483" class="pln"><a href="#n1483">1483</a></p>
<p id="n1484" class="pln"><a href="#n1484">1484</a></p>
<p id="n1485" class="pln"><a href="#n1485">1485</a></p>
<p id="n1486" class="pln"><a href="#n1486">1486</a></p>
<p id="n1487" class="pln"><a href="#n1487">1487</a></p>
<p id="n1488" class="pln"><a href="#n1488">1488</a></p>
<p id="n1489" class="pln"><a href="#n1489">1489</a></p>
<p id="n1490" class="pln"><a href="#n1490">1490</a></p>
<p id="n1491" class="pln"><a href="#n1491">1491</a></p>
<p id="n1492" class="pln"><a href="#n1492">1492</a></p>
<p id="n1493" class="pln"><a href="#n1493">1493</a></p>
<p id="n1494" class="pln"><a href="#n1494">1494</a></p>
<p id="n1495" class="pln"><a href="#n1495">1495</a></p>
<p id="n1496" class="pln"><a href="#n1496">1496</a></p>
<p id="n1497" class="stm run hide_run"><a href="#n1497">1497</a></p>
<p id="n1498" class="pln"><a href="#n1498">1498</a></p>
<p id="n1499" class="pln"><a href="#n1499">1499</a></p>
<p id="n1500" class="pln"><a href="#n1500">1500</a></p>
<p id="n1501" class="pln"><a href="#n1501">1501</a></p>
<p id="n1502" class="pln"><a href="#n1502">1502</a></p>
<p id="n1503" class="pln"><a href="#n1503">1503</a></p>
<p id="n1504" class="pln"><a href="#n1504">1504</a></p>
<p id="n1505" class="stm run hide_run"><a href="#n1505">1505</a></p>
<p id="n1506" class="stm run hide_run"><a href="#n1506">1506</a></p>
<p id="n1507" class="stm run hide_run"><a href="#n1507">1507</a></p>
<p id="n1508" class="pln"><a href="#n1508">1508</a></p>
<p id="n1509" class="stm run hide_run"><a href="#n1509">1509</a></p>
<p id="n1510" class="stm run hide_run"><a href="#n1510">1510</a></p>
<p id="n1511" class="stm run hide_run"><a href="#n1511">1511</a></p>
<p id="n1512" class="stm run hide_run"><a href="#n1512">1512</a></p>
<p id="n1513" class="stm run hide_run"><a href="#n1513">1513</a></p>
<p id="n1514" class="stm run hide_run"><a href="#n1514">1514</a></p>
<p id="n1515" class="stm run hide_run"><a href="#n1515">1515</a></p>
<p id="n1516" class="stm run hide_run"><a href="#n1516">1516</a></p>
<p id="n1517" class="stm run hide_run"><a href="#n1517">1517</a></p>
<p id="n1518" class="stm run hide_run"><a href="#n1518">1518</a></p>
<p id="n1519" class="pln"><a href="#n1519">1519</a></p>
<p id="n1520" class="stm run hide_run"><a href="#n1520">1520</a></p>
<p id="n1521" class="pln"><a href="#n1521">1521</a></p>
<p id="n1522" class="pln"><a href="#n1522">1522</a></p>
<p id="n1523" class="pln"><a href="#n1523">1523</a></p>
<p id="n1524" class="pln"><a href="#n1524">1524</a></p>
<p id="n1525" class="pln"><a href="#n1525">1525</a></p>
<p id="n1526" class="pln"><a href="#n1526">1526</a></p>
<p id="n1527" class="pln"><a href="#n1527">1527</a></p>
<p id="n1528" class="pln"><a href="#n1528">1528</a></p>
<p id="n1529" class="pln"><a href="#n1529">1529</a></p>
<p id="n1530" class="pln"><a href="#n1530">1530</a></p>
<p id="n1531" class="pln"><a href="#n1531">1531</a></p>
<p id="n1532" class="pln"><a href="#n1532">1532</a></p>
<p id="n1533" class="pln"><a href="#n1533">1533</a></p>
<p id="n1534" class="pln"><a href="#n1534">1534</a></p>
<p id="n1535" class="pln"><a href="#n1535">1535</a></p>
<p id="n1536" class="pln"><a href="#n1536">1536</a></p>
<p id="n1537" class="pln"><a href="#n1537">1537</a></p>
<p id="n1538" class="pln"><a href="#n1538">1538</a></p>
<p id="n1539" class="pln"><a href="#n1539">1539</a></p>
<p id="n1540" class="pln"><a href="#n1540">1540</a></p>
<p id="n1541" class="pln"><a href="#n1541">1541</a></p>
<p id="n1542" class="pln"><a href="#n1542">1542</a></p>
<p id="n1543" class="pln"><a href="#n1543">1543</a></p>
<p id="n1544" class="pln"><a href="#n1544">1544</a></p>
<p id="n1545" class="pln"><a href="#n1545">1545</a></p>
<p id="n1546" class="pln"><a href="#n1546">1546</a></p>
<p id="n1547" class="pln"><a href="#n1547">1547</a></p>
<p id="n1548" class="pln"><a href="#n1548">1548</a></p>
<p id="n1549" class="pln"><a href="#n1549">1549</a></p>
<p id="n1550" class="pln"><a href="#n1550">1550</a></p>
<p id="n1551" class="pln"><a href="#n1551">1551</a></p>
<p id="n1552" class="pln"><a href="#n1552">1552</a></p>
<p id="n1553" class="pln"><a href="#n1553">1553</a></p>
<p id="n1554" class="pln"><a href="#n1554">1554</a></p>
<p id="n1555" class="pln"><a href="#n1555">1555</a></p>
<p id="n1556" class="stm run hide_run"><a href="#n1556">1556</a></p>
<p id="n1557" class="stm run hide_run"><a href="#n1557">1557</a></p>
<p id="n1558" class="stm run hide_run"><a href="#n1558">1558</a></p>
<p id="n1559" class="stm run hide_run"><a href="#n1559">1559</a></p>
<p id="n1560" class="stm run hide_run"><a href="#n1560">1560</a></p>
<p id="n1561" class="stm run hide_run"><a href="#n1561">1561</a></p>
<p id="n1562" class="stm run hide_run"><a href="#n1562">1562</a></p>
<p id="n1563" class="stm run hide_run"><a href="#n1563">1563</a></p>
<p id="n1564" class="pln"><a href="#n1564">1564</a></p>
<p id="n1565" class="pln"><a href="#n1565">1565</a></p>
<p id="n1566" class="stm run hide_run"><a href="#n1566">1566</a></p>
<p id="n1567" class="stm run hide_run"><a href="#n1567">1567</a></p>
<p id="n1568" class="stm run hide_run"><a href="#n1568">1568</a></p>
<p id="n1569" class="pln"><a href="#n1569">1569</a></p>
<p id="n1570" class="pln"><a href="#n1570">1570</a></p>
<p id="n1571" class="stm run hide_run"><a href="#n1571">1571</a></p>
<p id="n1572" class="pln"><a href="#n1572">1572</a></p>
<p id="n1573" class="stm run hide_run"><a href="#n1573">1573</a></p>
<p id="n1574" class="stm mis"><a href="#n1574">1574</a></p>
<p id="n1575" class="pln"><a href="#n1575">1575</a></p>
<p id="n1576" class="pln"><a href="#n1576">1576</a></p>
<p id="n1577" class="stm run hide_run"><a href="#n1577">1577</a></p>
<p id="n1578" class="pln"><a href="#n1578">1578</a></p>
<p id="n1579" class="pln"><a href="#n1579">1579</a></p>
<p id="n1580" class="pln"><a href="#n1580">1580</a></p>
<p id="n1581" class="pln"><a href="#n1581">1581</a></p>
<p id="n1582" class="pln"><a href="#n1582">1582</a></p>
<p id="n1583" class="pln"><a href="#n1583">1583</a></p>
<p id="n1584" class="pln"><a href="#n1584">1584</a></p>
<p id="n1585" class="pln"><a href="#n1585">1585</a></p>
<p id="n1586" class="pln"><a href="#n1586">1586</a></p>
<p id="n1587" class="pln"><a href="#n1587">1587</a></p>
<p id="n1588" class="pln"><a href="#n1588">1588</a></p>
<p id="n1589" class="pln"><a href="#n1589">1589</a></p>
<p id="n1590" class="pln"><a href="#n1590">1590</a></p>
<p id="n1591" class="pln"><a href="#n1591">1591</a></p>
<p id="n1592" class="pln"><a href="#n1592">1592</a></p>
<p id="n1593" class="pln"><a href="#n1593">1593</a></p>
<p id="n1594" class="pln"><a href="#n1594">1594</a></p>
<p id="n1595" class="pln"><a href="#n1595">1595</a></p>
<p id="n1596" class="pln"><a href="#n1596">1596</a></p>
<p id="n1597" class="pln"><a href="#n1597">1597</a></p>
<p id="n1598" class="pln"><a href="#n1598">1598</a></p>
<p id="n1599" class="pln"><a href="#n1599">1599</a></p>
<p id="n1600" class="pln"><a href="#n1600">1600</a></p>
<p id="n1601" class="pln"><a href="#n1601">1601</a></p>
<p id="n1602" class="pln"><a href="#n1602">1602</a></p>
<p id="n1603" class="pln"><a href="#n1603">1603</a></p>
<p id="n1604" class="pln"><a href="#n1604">1604</a></p>
<p id="n1605" class="pln"><a href="#n1605">1605</a></p>
<p id="n1606" class="pln"><a href="#n1606">1606</a></p>
<p id="n1607" class="pln"><a href="#n1607">1607</a></p>
<p id="n1608" class="pln"><a href="#n1608">1608</a></p>
<p id="n1609" class="pln"><a href="#n1609">1609</a></p>
<p id="n1610" class="pln"><a href="#n1610">1610</a></p>
<p id="n1611" class="pln"><a href="#n1611">1611</a></p>
<p id="n1612" class="pln"><a href="#n1612">1612</a></p>
<p id="n1613" class="pln"><a href="#n1613">1613</a></p>
<p id="n1614" class="pln"><a href="#n1614">1614</a></p>
<p id="n1615" class="pln"><a href="#n1615">1615</a></p>
<p id="n1616" class="pln"><a href="#n1616">1616</a></p>
<p id="n1617" class="pln"><a href="#n1617">1617</a></p>
<p id="n1618" class="pln"><a href="#n1618">1618</a></p>
<p id="n1619" class="pln"><a href="#n1619">1619</a></p>
<p id="n1620" class="pln"><a href="#n1620">1620</a></p>
<p id="n1621" class="pln"><a href="#n1621">1621</a></p>
<p id="n1622" class="pln"><a href="#n1622">1622</a></p>
<p id="n1623" class="pln"><a href="#n1623">1623</a></p>
<p id="n1624" class="pln"><a href="#n1624">1624</a></p>
<p id="n1625" class="pln"><a href="#n1625">1625</a></p>
<p id="n1626" class="pln"><a href="#n1626">1626</a></p>
<p id="n1627" class="pln"><a href="#n1627">1627</a></p>
<p id="n1628" class="pln"><a href="#n1628">1628</a></p>
<p id="n1629" class="pln"><a href="#n1629">1629</a></p>
<p id="n1630" class="stm run hide_run"><a href="#n1630">1630</a></p>
<p id="n1631" class="pln"><a href="#n1631">1631</a></p>
<p id="n1632" class="pln"><a href="#n1632">1632</a></p>
<p id="n1633" class="pln"><a href="#n1633">1633</a></p>
<p id="n1634" class="pln"><a href="#n1634">1634</a></p>
<p id="n1635" class="pln"><a href="#n1635">1635</a></p>
<p id="n1636" class="pln"><a href="#n1636">1636</a></p>
<p id="n1637" class="pln"><a href="#n1637">1637</a></p>
<p id="n1638" class="pln"><a href="#n1638">1638</a></p>
<p id="n1639" class="pln"><a href="#n1639">1639</a></p>
<p id="n1640" class="stm run hide_run"><a href="#n1640">1640</a></p>
<p id="n1641" class="stm run hide_run"><a href="#n1641">1641</a></p>
<p id="n1642" class="stm run hide_run"><a href="#n1642">1642</a></p>
<p id="n1643" class="stm run hide_run"><a href="#n1643">1643</a></p>
<p id="n1644" class="stm run hide_run"><a href="#n1644">1644</a></p>
<p id="n1645" class="stm run hide_run"><a href="#n1645">1645</a></p>
<p id="n1646" class="stm run hide_run"><a href="#n1646">1646</a></p>
<p id="n1647" class="stm run hide_run"><a href="#n1647">1647</a></p>
<p id="n1648" class="stm run hide_run"><a href="#n1648">1648</a></p>
<p id="n1649" class="pln"><a href="#n1649">1649</a></p>
<p id="n1650" class="pln"><a href="#n1650">1650</a></p>
<p id="n1651" class="stm run hide_run"><a href="#n1651">1651</a></p>
<p id="n1652" class="stm run hide_run"><a href="#n1652">1652</a></p>
<p id="n1653" class="pln"><a href="#n1653">1653</a></p>
<p id="n1654" class="pln"><a href="#n1654">1654</a></p>
<p id="n1655" class="pln"><a href="#n1655">1655</a></p>
<p id="n1656" class="stm run hide_run"><a href="#n1656">1656</a></p>
<p id="n1657" class="pln"><a href="#n1657">1657</a></p>
<p id="n1658" class="pln"><a href="#n1658">1658</a></p>
<p id="n1659" class="pln"><a href="#n1659">1659</a></p>
<p id="n1660" class="stm run hide_run"><a href="#n1660">1660</a></p>
<p id="n1661" class="stm par run hide_run"><a href="#n1661">1661</a></p>
<p id="n1662" class="stm mis"><a href="#n1662">1662</a></p>
<p id="n1663" class="stm run hide_run"><a href="#n1663">1663</a></p>
<p id="n1664" class="stm run hide_run"><a href="#n1664">1664</a></p>
<p id="n1665" class="stm run hide_run"><a href="#n1665">1665</a></p>
<p id="n1666" class="stm run hide_run"><a href="#n1666">1666</a></p>
<p id="n1667" class="pln"><a href="#n1667">1667</a></p>
<p id="n1668" class="stm run hide_run"><a href="#n1668">1668</a></p>
<p id="n1669" class="stm run hide_run"><a href="#n1669">1669</a></p>
<p id="n1670" class="stm par run hide_run"><a href="#n1670">1670</a></p>
<p id="n1671" class="stm mis"><a href="#n1671">1671</a></p>
<p id="n1672" class="pln"><a href="#n1672">1672</a></p>
<p id="n1673" class="stm run hide_run"><a href="#n1673">1673</a></p>
<p id="n1674" class="stm par run hide_run"><a href="#n1674">1674</a></p>
<p id="n1675" class="stm mis"><a href="#n1675">1675</a></p>
<p id="n1676" class="stm run hide_run"><a href="#n1676">1676</a></p>
<p id="n1677" class="stm run hide_run"><a href="#n1677">1677</a></p>
<p id="n1678" class="stm mis"><a href="#n1678">1678</a></p>
<p id="n1679" class="stm mis"><a href="#n1679">1679</a></p>
<p id="n1680" class="stm run hide_run"><a href="#n1680">1680</a></p>
<p id="n1681" class="pln"><a href="#n1681">1681</a></p>
<p id="n1682" class="stm run hide_run"><a href="#n1682">1682</a></p>
<p id="n1683" class="pln"><a href="#n1683">1683</a></p>
<p id="n1684" class="pln"><a href="#n1684">1684</a></p>
<p id="n1685" class="pln"><a href="#n1685">1685</a></p>
<p id="n1686" class="pln"><a href="#n1686">1686</a></p>
<p id="n1687" class="pln"><a href="#n1687">1687</a></p>
<p id="n1688" class="pln"><a href="#n1688">1688</a></p>
<p id="n1689" class="pln"><a href="#n1689">1689</a></p>
<p id="n1690" class="pln"><a href="#n1690">1690</a></p>
<p id="n1691" class="pln"><a href="#n1691">1691</a></p>
<p id="n1692" class="pln"><a href="#n1692">1692</a></p>
<p id="n1693" class="pln"><a href="#n1693">1693</a></p>
<p id="n1694" class="pln"><a href="#n1694">1694</a></p>
<p id="n1695" class="pln"><a href="#n1695">1695</a></p>
<p id="n1696" class="pln"><a href="#n1696">1696</a></p>
<p id="n1697" class="pln"><a href="#n1697">1697</a></p>
<p id="n1698" class="pln"><a href="#n1698">1698</a></p>
<p id="n1699" class="pln"><a href="#n1699">1699</a></p>
<p id="n1700" class="pln"><a href="#n1700">1700</a></p>
<p id="n1701" class="pln"><a href="#n1701">1701</a></p>
<p id="n1702" class="pln"><a href="#n1702">1702</a></p>
<p id="n1703" class="pln"><a href="#n1703">1703</a></p>
<p id="n1704" class="pln"><a href="#n1704">1704</a></p>
<p id="n1705" class="pln"><a href="#n1705">1705</a></p>
<p id="n1706" class="pln"><a href="#n1706">1706</a></p>
<p id="n1707" class="pln"><a href="#n1707">1707</a></p>
<p id="n1708" class="pln"><a href="#n1708">1708</a></p>
<p id="n1709" class="pln"><a href="#n1709">1709</a></p>
<p id="n1710" class="pln"><a href="#n1710">1710</a></p>
<p id="n1711" class="pln"><a href="#n1711">1711</a></p>
<p id="n1712" class="pln"><a href="#n1712">1712</a></p>
<p id="n1713" class="pln"><a href="#n1713">1713</a></p>
<p id="n1714" class="pln"><a href="#n1714">1714</a></p>
<p id="n1715" class="pln"><a href="#n1715">1715</a></p>
<p id="n1716" class="pln"><a href="#n1716">1716</a></p>
<p id="n1717" class="pln"><a href="#n1717">1717</a></p>
<p id="n1718" class="pln"><a href="#n1718">1718</a></p>
<p id="n1719" class="pln"><a href="#n1719">1719</a></p>
<p id="n1720" class="pln"><a href="#n1720">1720</a></p>
<p id="n1721" class="pln"><a href="#n1721">1721</a></p>
<p id="n1722" class="pln"><a href="#n1722">1722</a></p>
<p id="n1723" class="pln"><a href="#n1723">1723</a></p>
<p id="n1724" class="pln"><a href="#n1724">1724</a></p>
<p id="n1725" class="pln"><a href="#n1725">1725</a></p>
<p id="n1726" class="pln"><a href="#n1726">1726</a></p>
<p id="n1727" class="pln"><a href="#n1727">1727</a></p>
<p id="n1728" class="pln"><a href="#n1728">1728</a></p>
<p id="n1729" class="pln"><a href="#n1729">1729</a></p>
<p id="n1730" class="pln"><a href="#n1730">1730</a></p>
<p id="n1731" class="pln"><a href="#n1731">1731</a></p>
<p id="n1732" class="pln"><a href="#n1732">1732</a></p>
<p id="n1733" class="pln"><a href="#n1733">1733</a></p>
<p id="n1734" class="pln"><a href="#n1734">1734</a></p>
<p id="n1735" class="pln"><a href="#n1735">1735</a></p>
<p id="n1736" class="pln"><a href="#n1736">1736</a></p>
<p id="n1737" class="pln"><a href="#n1737">1737</a></p>
<p id="n1738" class="pln"><a href="#n1738">1738</a></p>
<p id="n1739" class="pln"><a href="#n1739">1739</a></p>
<p id="n1740" class="pln"><a href="#n1740">1740</a></p>
<p id="n1741" class="pln"><a href="#n1741">1741</a></p>
<p id="n1742" class="pln"><a href="#n1742">1742</a></p>
<p id="n1743" class="pln"><a href="#n1743">1743</a></p>
<p id="n1744" class="pln"><a href="#n1744">1744</a></p>
<p id="n1745" class="pln"><a href="#n1745">1745</a></p>
<p id="n1746" class="pln"><a href="#n1746">1746</a></p>
<p id="n1747" class="pln"><a href="#n1747">1747</a></p>
<p id="n1748" class="pln"><a href="#n1748">1748</a></p>
<p id="n1749" class="pln"><a href="#n1749">1749</a></p>
<p id="n1750" class="pln"><a href="#n1750">1750</a></p>
<p id="n1751" class="pln"><a href="#n1751">1751</a></p>
<p id="n1752" class="pln"><a href="#n1752">1752</a></p>
<p id="n1753" class="pln"><a href="#n1753">1753</a></p>
<p id="n1754" class="pln"><a href="#n1754">1754</a></p>
<p id="n1755" class="pln"><a href="#n1755">1755</a></p>
<p id="n1756" class="pln"><a href="#n1756">1756</a></p>
<p id="n1757" class="pln"><a href="#n1757">1757</a></p>
<p id="n1758" class="stm run hide_run"><a href="#n1758">1758</a></p>
<p id="n1759" class="stm run hide_run"><a href="#n1759">1759</a></p>
<p id="n1760" class="stm run hide_run"><a href="#n1760">1760</a></p>
<p id="n1761" class="stm run hide_run"><a href="#n1761">1761</a></p>
<p id="n1762" class="stm run hide_run"><a href="#n1762">1762</a></p>
<p id="n1763" class="stm run hide_run"><a href="#n1763">1763</a></p>
<p id="n1764" class="stm run hide_run"><a href="#n1764">1764</a></p>
<p id="n1765" class="stm run hide_run"><a href="#n1765">1765</a></p>
<p id="n1766" class="stm run hide_run"><a href="#n1766">1766</a></p>
<p id="n1767" class="stm run hide_run"><a href="#n1767">1767</a></p>
<p id="n1768" class="stm run hide_run"><a href="#n1768">1768</a></p>
<p id="n1769" class="stm par run hide_run"><a href="#n1769">1769</a></p>
<p id="n1770" class="pln"><a href="#n1770">1770</a></p>
<p id="n1771" class="pln"><a href="#n1771">1771</a></p>
<p id="n1772" class="pln"><a href="#n1772">1772</a></p>
<p id="n1773" class="pln"><a href="#n1773">1773</a></p>
<p id="n1774" class="stm run hide_run"><a href="#n1774">1774</a></p>
<p id="n1775" class="pln"><a href="#n1775">1775</a></p>
<p id="n1776" class="pln"><a href="#n1776">1776</a></p>
<p id="n1777" class="stm run hide_run"><a href="#n1777">1777</a></p>
<p id="n1778" class="stm run hide_run"><a href="#n1778">1778</a></p>
<p id="n1779" class="stm run hide_run"><a href="#n1779">1779</a></p>
<p id="n1780" class="pln"><a href="#n1780">1780</a></p>
<p id="n1781" class="pln"><a href="#n1781">1781</a></p>
<p id="n1782" class="stm run hide_run"><a href="#n1782">1782</a></p>
<p id="n1783" class="pln"><a href="#n1783">1783</a></p>
<p id="n1784" class="stm run hide_run"><a href="#n1784">1784</a></p>
<p id="n1785" class="stm mis"><a href="#n1785">1785</a></p>
<p id="n1786" class="pln"><a href="#n1786">1786</a></p>
<p id="n1787" class="pln"><a href="#n1787">1787</a></p>
<p id="n1788" class="stm run hide_run"><a href="#n1788">1788</a></p>
<p id="n1789" class="pln"><a href="#n1789">1789</a></p>
<p id="n1790" class="pln"><a href="#n1790">1790</a></p>
<p id="n1791" class="pln"><a href="#n1791">1791</a></p>
<p id="n1792" class="pln"><a href="#n1792">1792</a></p>
<p id="n1793" class="pln"><a href="#n1793">1793</a></p>
<p id="n1794" class="pln"><a href="#n1794">1794</a></p>
<p id="n1795" class="pln"><a href="#n1795">1795</a></p>
<p id="n1796" class="pln"><a href="#n1796">1796</a></p>
<p id="n1797" class="pln"><a href="#n1797">1797</a></p>
<p id="n1798" class="pln"><a href="#n1798">1798</a></p>
<p id="n1799" class="pln"><a href="#n1799">1799</a></p>
<p id="n1800" class="pln"><a href="#n1800">1800</a></p>
<p id="n1801" class="pln"><a href="#n1801">1801</a></p>
<p id="n1802" class="pln"><a href="#n1802">1802</a></p>
<p id="n1803" class="pln"><a href="#n1803">1803</a></p>
<p id="n1804" class="pln"><a href="#n1804">1804</a></p>
<p id="n1805" class="pln"><a href="#n1805">1805</a></p>
<p id="n1806" class="pln"><a href="#n1806">1806</a></p>
<p id="n1807" class="pln"><a href="#n1807">1807</a></p>
<p id="n1808" class="pln"><a href="#n1808">1808</a></p>
<p id="n1809" class="pln"><a href="#n1809">1809</a></p>
<p id="n1810" class="pln"><a href="#n1810">1810</a></p>
<p id="n1811" class="pln"><a href="#n1811">1811</a></p>
<p id="n1812" class="pln"><a href="#n1812">1812</a></p>
<p id="n1813" class="pln"><a href="#n1813">1813</a></p>
<p id="n1814" class="pln"><a href="#n1814">1814</a></p>
<p id="n1815" class="pln"><a href="#n1815">1815</a></p>
<p id="n1816" class="pln"><a href="#n1816">1816</a></p>
<p id="n1817" class="pln"><a href="#n1817">1817</a></p>
<p id="n1818" class="pln"><a href="#n1818">1818</a></p>
<p id="n1819" class="pln"><a href="#n1819">1819</a></p>
<p id="n1820" class="pln"><a href="#n1820">1820</a></p>
<p id="n1821" class="pln"><a href="#n1821">1821</a></p>
<p id="n1822" class="pln"><a href="#n1822">1822</a></p>
<p id="n1823" class="pln"><a href="#n1823">1823</a></p>
<p id="n1824" class="pln"><a href="#n1824">1824</a></p>
<p id="n1825" class="pln"><a href="#n1825">1825</a></p>
<p id="n1826" class="pln"><a href="#n1826">1826</a></p>
<p id="n1827" class="pln"><a href="#n1827">1827</a></p>
<p id="n1828" class="pln"><a href="#n1828">1828</a></p>
<p id="n1829" class="pln"><a href="#n1829">1829</a></p>
<p id="n1830" class="pln"><a href="#n1830">1830</a></p>
<p id="n1831" class="pln"><a href="#n1831">1831</a></p>
<p id="n1832" class="pln"><a href="#n1832">1832</a></p>
<p id="n1833" class="pln"><a href="#n1833">1833</a></p>
<p id="n1834" class="pln"><a href="#n1834">1834</a></p>
<p id="n1835" class="pln"><a href="#n1835">1835</a></p>
<p id="n1836" class="pln"><a href="#n1836">1836</a></p>
<p id="n1837" class="pln"><a href="#n1837">1837</a></p>
<p id="n1838" class="pln"><a href="#n1838">1838</a></p>
<p id="n1839" class="pln"><a href="#n1839">1839</a></p>
<p id="n1840" class="pln"><a href="#n1840">1840</a></p>
<p id="n1841" class="stm run hide_run"><a href="#n1841">1841</a></p>
<p id="n1842" class="pln"><a href="#n1842">1842</a></p>
<p id="n1843" class="pln"><a href="#n1843">1843</a></p>
<p id="n1844" class="pln"><a href="#n1844">1844</a></p>
<p id="n1845" class="pln"><a href="#n1845">1845</a></p>
<p id="n1846" class="pln"><a href="#n1846">1846</a></p>
<p id="n1847" class="pln"><a href="#n1847">1847</a></p>
<p id="n1848" class="pln"><a href="#n1848">1848</a></p>
<p id="n1849" class="stm run hide_run"><a href="#n1849">1849</a></p>
<p id="n1850" class="stm run hide_run"><a href="#n1850">1850</a></p>
<p id="n1851" class="stm run hide_run"><a href="#n1851">1851</a></p>
<p id="n1852" class="pln"><a href="#n1852">1852</a></p>
<p id="n1853" class="stm run hide_run"><a href="#n1853">1853</a></p>
<p id="n1854" class="pln"><a href="#n1854">1854</a></p>
<p id="n1855" class="stm run hide_run"><a href="#n1855">1855</a></p>
<p id="n1856" class="stm run hide_run"><a href="#n1856">1856</a></p>
<p id="n1857" class="stm run hide_run"><a href="#n1857">1857</a></p>
<p id="n1858" class="stm run hide_run"><a href="#n1858">1858</a></p>
<p id="n1859" class="stm run hide_run"><a href="#n1859">1859</a></p>
<p id="n1860" class="pln"><a href="#n1860">1860</a></p>
<p id="n1861" class="stm run hide_run"><a href="#n1861">1861</a></p>
<p id="n1862" class="stm run hide_run"><a href="#n1862">1862</a></p>
<p id="n1863" class="stm run hide_run"><a href="#n1863">1863</a></p>
<p id="n1864" class="pln"><a href="#n1864">1864</a></p>
<p id="n1865" class="stm run hide_run"><a href="#n1865">1865</a></p>
<p id="n1866" class="pln"><a href="#n1866">1866</a></p>
<p id="n1867" class="stm run hide_run"><a href="#n1867">1867</a></p>
<p id="n1868" class="pln"><a href="#n1868">1868</a></p>
<p id="n1869" class="pln"><a href="#n1869">1869</a></p>
<p id="n1870" class="pln"><a href="#n1870">1870</a></p>
<p id="n1871" class="pln"><a href="#n1871">1871</a></p>
<p id="n1872" class="pln"><a href="#n1872">1872</a></p>
<p id="n1873" class="pln"><a href="#n1873">1873</a></p>
<p id="n1874" class="pln"><a href="#n1874">1874</a></p>
<p id="n1875" class="pln"><a href="#n1875">1875</a></p>
<p id="n1876" class="pln"><a href="#n1876">1876</a></p>
<p id="n1877" class="pln"><a href="#n1877">1877</a></p>
<p id="n1878" class="pln"><a href="#n1878">1878</a></p>
<p id="n1879" class="pln"><a href="#n1879">1879</a></p>
<p id="n1880" class="pln"><a href="#n1880">1880</a></p>
<p id="n1881" class="pln"><a href="#n1881">1881</a></p>
<p id="n1882" class="pln"><a href="#n1882">1882</a></p>
<p id="n1883" class="pln"><a href="#n1883">1883</a></p>
<p id="n1884" class="pln"><a href="#n1884">1884</a></p>
<p id="n1885" class="pln"><a href="#n1885">1885</a></p>
<p id="n1886" class="pln"><a href="#n1886">1886</a></p>
<p id="n1887" class="pln"><a href="#n1887">1887</a></p>
<p id="n1888" class="pln"><a href="#n1888">1888</a></p>
<p id="n1889" class="stm par run hide_run"><a href="#n1889">1889</a></p>
<p id="n1890" class="stm mis"><a href="#n1890">1890</a></p>
<p id="n1891" class="pln"><a href="#n1891">1891</a></p>
<p id="n1892" class="pln"><a href="#n1892">1892</a></p>
<p id="n1893" class="stm par run hide_run"><a href="#n1893">1893</a></p>
<p id="n1894" class="stm run hide_run"><a href="#n1894">1894</a></p>
<p id="n1895" class="stm run hide_run"><a href="#n1895">1895</a></p>
<p id="n1896" class="pln"><a href="#n1896">1896</a></p>
<p id="n1897" class="stm mis"><a href="#n1897">1897</a></p>
<p id="n1898" class="stm run hide_run"><a href="#n1898">1898</a></p>
<p id="n1899" class="stm par run hide_run"><a href="#n1899">1899</a></p>
<p id="n1900" class="stm mis"><a href="#n1900">1900</a></p>
<p id="n1901" class="stm mis"><a href="#n1901">1901</a></p>
<p id="n1902" class="stm mis"><a href="#n1902">1902</a></p>
<p id="n1903" class="stm mis"><a href="#n1903">1903</a></p>
<p id="n1904" class="pln"><a href="#n1904">1904</a></p>
<p id="n1905" class="pln"><a href="#n1905">1905</a></p>
<p id="n1906" class="pln"><a href="#n1906">1906</a></p>
<p id="n1907" class="pln"><a href="#n1907">1907</a></p>
<p id="n1908" class="stm run hide_run"><a href="#n1908">1908</a></p>
<p id="n1909" class="stm run hide_run"><a href="#n1909">1909</a></p>
<p id="n1910" class="stm run hide_run"><a href="#n1910">1910</a></p>
<p id="n1911" class="stm run hide_run"><a href="#n1911">1911</a></p>
<p id="n1912" class="pln"><a href="#n1912">1912</a></p>
<p id="n1913" class="pln"><a href="#n1913">1913</a></p>
<p id="n1914" class="pln"><a href="#n1914">1914</a></p>
<p id="n1915" class="stm run hide_run"><a href="#n1915">1915</a></p>
<p id="n1916" class="stm run hide_run"><a href="#n1916">1916</a></p>
<p id="n1917" class="stm run hide_run"><a href="#n1917">1917</a></p>
<p id="n1918" class="pln"><a href="#n1918">1918</a></p>
<p id="n1919" class="stm run hide_run"><a href="#n1919">1919</a></p>
<p id="n1920" class="stm mis"><a href="#n1920">1920</a></p>
<p id="n1921" class="pln"><a href="#n1921">1921</a></p>
<p id="n1922" class="pln"><a href="#n1922">1922</a></p>
<p id="n1923" class="stm run hide_run"><a href="#n1923">1923</a></p>
<p id="n1924" class="pln"><a href="#n1924">1924</a></p>
<p id="n1925" class="pln"><a href="#n1925">1925</a></p>
<p id="n1926" class="stm run hide_run"><a href="#n1926">1926</a></p>
<p id="n1927" class="stm par run hide_run"><a href="#n1927">1927</a></p>
<p id="n1928" class="stm mis"><a href="#n1928">1928</a></p>
<p id="n1929" class="stm par run hide_run"><a href="#n1929">1929</a></p>
<p id="n1930" class="stm run hide_run"><a href="#n1930">1930</a></p>
<p id="n1931" class="pln"><a href="#n1931">1931</a></p>
<p id="n1932" class="stm mis"><a href="#n1932">1932</a></p>
<p id="n1933" class="stm run hide_run"><a href="#n1933">1933</a></p>
<p id="n1934" class="pln"><a href="#n1934">1934</a></p>
<p id="n1935" class="pln"><a href="#n1935">1935</a></p>
<p id="n1936" class="stm run hide_run"><a href="#n1936">1936</a></p>
<p id="n1937" class="pln"><a href="#n1937">1937</a></p>
<p id="n1938" class="pln"><a href="#n1938">1938</a></p>
<p id="n1939" class="pln"><a href="#n1939">1939</a></p>
<p id="n1940" class="pln"><a href="#n1940">1940</a></p>
<p id="n1941" class="pln"><a href="#n1941">1941</a></p>
<p id="n1942" class="pln"><a href="#n1942">1942</a></p>
<p id="n1943" class="pln"><a href="#n1943">1943</a></p>
<p id="n1944" class="pln"><a href="#n1944">1944</a></p>
<p id="n1945" class="pln"><a href="#n1945">1945</a></p>
<p id="n1946" class="pln"><a href="#n1946">1946</a></p>
<p id="n1947" class="pln"><a href="#n1947">1947</a></p>
<p id="n1948" class="pln"><a href="#n1948">1948</a></p>
<p id="n1949" class="pln"><a href="#n1949">1949</a></p>
<p id="n1950" class="pln"><a href="#n1950">1950</a></p>
<p id="n1951" class="pln"><a href="#n1951">1951</a></p>
<p id="n1952" class="pln"><a href="#n1952">1952</a></p>
<p id="n1953" class="pln"><a href="#n1953">1953</a></p>
<p id="n1954" class="pln"><a href="#n1954">1954</a></p>
<p id="n1955" class="pln"><a href="#n1955">1955</a></p>
<p id="n1956" class="pln"><a href="#n1956">1956</a></p>
<p id="n1957" class="pln"><a href="#n1957">1957</a></p>
<p id="n1958" class="pln"><a href="#n1958">1958</a></p>
<p id="n1959" class="pln"><a href="#n1959">1959</a></p>
<p id="n1960" class="pln"><a href="#n1960">1960</a></p>
<p id="n1961" class="pln"><a href="#n1961">1961</a></p>
<p id="n1962" class="pln"><a href="#n1962">1962</a></p>
<p id="n1963" class="pln"><a href="#n1963">1963</a></p>
<p id="n1964" class="pln"><a href="#n1964">1964</a></p>
<p id="n1965" class="pln"><a href="#n1965">1965</a></p>
<p id="n1966" class="pln"><a href="#n1966">1966</a></p>
<p id="n1967" class="pln"><a href="#n1967">1967</a></p>
<p id="n1968" class="pln"><a href="#n1968">1968</a></p>
<p id="n1969" class="pln"><a href="#n1969">1969</a></p>
<p id="n1970" class="pln"><a href="#n1970">1970</a></p>
<p id="n1971" class="pln"><a href="#n1971">1971</a></p>
<p id="n1972" class="pln"><a href="#n1972">1972</a></p>
<p id="n1973" class="pln"><a href="#n1973">1973</a></p>
<p id="n1974" class="pln"><a href="#n1974">1974</a></p>
<p id="n1975" class="pln"><a href="#n1975">1975</a></p>
<p id="n1976" class="pln"><a href="#n1976">1976</a></p>
<p id="n1977" class="pln"><a href="#n1977">1977</a></p>
<p id="n1978" class="stm run hide_run"><a href="#n1978">1978</a></p>
<p id="n1979" class="exc"><a href="#n1979">1979</a></p>
<p id="n1980" class="pln"><a href="#n1980">1980</a></p>
<p id="n1981" class="stm run hide_run"><a href="#n1981">1981</a></p>
<p id="n1982" class="pln"><a href="#n1982">1982</a></p>
<p id="n1983" class="pln"><a href="#n1983">1983</a></p>
<p id="n1984" class="pln"><a href="#n1984">1984</a></p>
<p id="n1985" class="pln"><a href="#n1985">1985</a></p>
<p id="n1986" class="pln"><a href="#n1986">1986</a></p>
<p id="n1987" class="pln"><a href="#n1987">1987</a></p>
<p id="n1988" class="pln"><a href="#n1988">1988</a></p>
<p id="n1989" class="stm run hide_run"><a href="#n1989">1989</a></p>
<p id="n1990" class="stm run hide_run"><a href="#n1990">1990</a></p>
<p id="n1991" class="stm run hide_run"><a href="#n1991">1991</a></p>
<p id="n1992" class="pln"><a href="#n1992">1992</a></p>
<p id="n1993" class="stm run hide_run"><a href="#n1993">1993</a></p>
<p id="n1994" class="stm par run hide_run"><a href="#n1994">1994</a></p>
<p id="n1995" class="stm mis"><a href="#n1995">1995</a></p>
<p id="n1996" class="stm par run hide_run"><a href="#n1996">1996</a></p>
<p id="n1997" class="stm mis"><a href="#n1997">1997</a></p>
<p id="n1998" class="pln"><a href="#n1998">1998</a></p>
<p id="n1999" class="pln"><a href="#n1999">1999</a></p>
<p id="n2000" class="pln"><a href="#n2000">2000</a></p>
<p id="n2001" class="stm run hide_run"><a href="#n2001">2001</a></p>
<p id="n2002" class="stm run hide_run"><a href="#n2002">2002</a></p>
<p id="n2003" class="stm run hide_run"><a href="#n2003">2003</a></p>
<p id="n2004" class="stm run hide_run"><a href="#n2004">2004</a></p>
<p id="n2005" class="stm run hide_run"><a href="#n2005">2005</a></p>
<p id="n2006" class="pln"><a href="#n2006">2006</a></p>
<p id="n2007" class="pln"><a href="#n2007">2007</a></p>
<p id="n2008" class="stm run hide_run"><a href="#n2008">2008</a></p>
<p id="n2009" class="pln"><a href="#n2009">2009</a></p>
<p id="n2010" class="pln"><a href="#n2010">2010</a></p>
<p id="n2011" class="pln"><a href="#n2011">2011</a></p>
<p id="n2012" class="pln"><a href="#n2012">2012</a></p>
<p id="n2013" class="pln"><a href="#n2013">2013</a></p>
<p id="n2014" class="pln"><a href="#n2014">2014</a></p>
<p id="n2015" class="pln"><a href="#n2015">2015</a></p>
<p id="n2016" class="pln"><a href="#n2016">2016</a></p>
<p id="n2017" class="pln"><a href="#n2017">2017</a></p>
<p id="n2018" class="pln"><a href="#n2018">2018</a></p>
<p id="n2019" class="pln"><a href="#n2019">2019</a></p>
<p id="n2020" class="pln"><a href="#n2020">2020</a></p>
<p id="n2021" class="pln"><a href="#n2021">2021</a></p>
<p id="n2022" class="pln"><a href="#n2022">2022</a></p>
<p id="n2023" class="pln"><a href="#n2023">2023</a></p>
<p id="n2024" class="pln"><a href="#n2024">2024</a></p>
<p id="n2025" class="pln"><a href="#n2025">2025</a></p>
<p id="n2026" class="pln"><a href="#n2026">2026</a></p>
<p id="n2027" class="pln"><a href="#n2027">2027</a></p>
<p id="n2028" class="pln"><a href="#n2028">2028</a></p>
<p id="n2029" class="pln"><a href="#n2029">2029</a></p>
<p id="n2030" class="pln"><a href="#n2030">2030</a></p>
<p id="n2031" class="pln"><a href="#n2031">2031</a></p>
<p id="n2032" class="pln"><a href="#n2032">2032</a></p>
<p id="n2033" class="pln"><a href="#n2033">2033</a></p>
<p id="n2034" class="pln"><a href="#n2034">2034</a></p>
<p id="n2035" class="pln"><a href="#n2035">2035</a></p>
<p id="n2036" class="pln"><a href="#n2036">2036</a></p>
<p id="n2037" class="pln"><a href="#n2037">2037</a></p>
<p id="n2038" class="pln"><a href="#n2038">2038</a></p>
<p id="n2039" class="pln"><a href="#n2039">2039</a></p>
<p id="n2040" class="pln"><a href="#n2040">2040</a></p>
<p id="n2041" class="pln"><a href="#n2041">2041</a></p>
<p id="n2042" class="pln"><a href="#n2042">2042</a></p>
<p id="n2043" class="pln"><a href="#n2043">2043</a></p>
<p id="n2044" class="pln"><a href="#n2044">2044</a></p>
<p id="n2045" class="pln"><a href="#n2045">2045</a></p>
<p id="n2046" class="pln"><a href="#n2046">2046</a></p>
<p id="n2047" class="pln"><a href="#n2047">2047</a></p>
<p id="n2048" class="pln"><a href="#n2048">2048</a></p>
<p id="n2049" class="pln"><a href="#n2049">2049</a></p>
<p id="n2050" class="pln"><a href="#n2050">2050</a></p>
<p id="n2051" class="pln"><a href="#n2051">2051</a></p>
<p id="n2052" class="pln"><a href="#n2052">2052</a></p>
<p id="n2053" class="pln"><a href="#n2053">2053</a></p>
<p id="n2054" class="pln"><a href="#n2054">2054</a></p>
<p id="n2055" class="pln"><a href="#n2055">2055</a></p>
<p id="n2056" class="pln"><a href="#n2056">2056</a></p>
<p id="n2057" class="pln"><a href="#n2057">2057</a></p>
<p id="n2058" class="pln"><a href="#n2058">2058</a></p>
<p id="n2059" class="pln"><a href="#n2059">2059</a></p>
<p id="n2060" class="pln"><a href="#n2060">2060</a></p>
<p id="n2061" class="pln"><a href="#n2061">2061</a></p>
<p id="n2062" class="pln"><a href="#n2062">2062</a></p>
<p id="n2063" class="pln"><a href="#n2063">2063</a></p>
<p id="n2064" class="pln"><a href="#n2064">2064</a></p>
<p id="n2065" class="pln"><a href="#n2065">2065</a></p>
<p id="n2066" class="pln"><a href="#n2066">2066</a></p>
<p id="n2067" class="pln"><a href="#n2067">2067</a></p>
<p id="n2068" class="pln"><a href="#n2068">2068</a></p>
<p id="n2069" class="pln"><a href="#n2069">2069</a></p>
<p id="n2070" class="pln"><a href="#n2070">2070</a></p>
<p id="n2071" class="pln"><a href="#n2071">2071</a></p>
<p id="n2072" class="pln"><a href="#n2072">2072</a></p>
<p id="n2073" class="pln"><a href="#n2073">2073</a></p>
<p id="n2074" class="pln"><a href="#n2074">2074</a></p>
<p id="n2075" class="pln"><a href="#n2075">2075</a></p>
<p id="n2076" class="pln"><a href="#n2076">2076</a></p>
<p id="n2077" class="pln"><a href="#n2077">2077</a></p>
<p id="n2078" class="pln"><a href="#n2078">2078</a></p>
<p id="n2079" class="pln"><a href="#n2079">2079</a></p>
<p id="n2080" class="stm run hide_run"><a href="#n2080">2080</a></p>
<p id="n2081" class="pln"><a href="#n2081">2081</a></p>
<p id="n2082" class="pln"><a href="#n2082">2082</a></p>
<p id="n2083" class="pln"><a href="#n2083">2083</a></p>
<p id="n2084" class="pln"><a href="#n2084">2084</a></p>
<p id="n2085" class="pln"><a href="#n2085">2085</a></p>
<p id="n2086" class="pln"><a href="#n2086">2086</a></p>
<p id="n2087" class="pln"><a href="#n2087">2087</a></p>
<p id="n2088" class="pln"><a href="#n2088">2088</a></p>
<p id="n2089" class="pln"><a href="#n2089">2089</a></p>
<p id="n2090" class="pln"><a href="#n2090">2090</a></p>
<p id="n2091" class="pln"><a href="#n2091">2091</a></p>
<p id="n2092" class="pln"><a href="#n2092">2092</a></p>
<p id="n2093" class="pln"><a href="#n2093">2093</a></p>
<p id="n2094" class="pln"><a href="#n2094">2094</a></p>
<p id="n2095" class="pln"><a href="#n2095">2095</a></p>
<p id="n2096" class="pln"><a href="#n2096">2096</a></p>
<p id="n2097" class="pln"><a href="#n2097">2097</a></p>
<p id="n2098" class="pln"><a href="#n2098">2098</a></p>
<p id="n2099" class="pln"><a href="#n2099">2099</a></p>
<p id="n2100" class="pln"><a href="#n2100">2100</a></p>
<p id="n2101" class="pln"><a href="#n2101">2101</a></p>
<p id="n2102" class="pln"><a href="#n2102">2102</a></p>
<p id="n2103" class="pln"><a href="#n2103">2103</a></p>
<p id="n2104" class="pln"><a href="#n2104">2104</a></p>
<p id="n2105" class="pln"><a href="#n2105">2105</a></p>
<p id="n2106" class="pln"><a href="#n2106">2106</a></p>
<p id="n2107" class="pln"><a href="#n2107">2107</a></p>
<p id="n2108" class="pln"><a href="#n2108">2108</a></p>
<p id="n2109" class="pln"><a href="#n2109">2109</a></p>
<p id="n2110" class="pln"><a href="#n2110">2110</a></p>
<p id="n2111" class="pln"><a href="#n2111">2111</a></p>
<p id="n2112" class="pln"><a href="#n2112">2112</a></p>
<p id="n2113" class="pln"><a href="#n2113">2113</a></p>
<p id="n2114" class="stm run hide_run"><a href="#n2114">2114</a></p>
<p id="n2115" class="stm run hide_run"><a href="#n2115">2115</a></p>
<p id="n2116" class="stm run hide_run"><a href="#n2116">2116</a></p>
<p id="n2117" class="stm par run hide_run"><a href="#n2117">2117</a></p>
<p id="n2118" class="stm run hide_run"><a href="#n2118">2118</a></p>
<p id="n2119" class="pln"><a href="#n2119">2119</a></p>
<p id="n2120" class="pln"><a href="#n2120">2120</a></p>
<p id="n2121" class="pln"><a href="#n2121">2121</a></p>
<p id="n2122" class="pln"><a href="#n2122">2122</a></p>
<p id="n2123" class="stm mis"><a href="#n2123">2123</a></p>
<p id="n2124" class="stm mis"><a href="#n2124">2124</a></p>
<p id="n2125" class="pln"><a href="#n2125">2125</a></p>
<p id="n2126" class="pln"><a href="#n2126">2126</a></p>
<p id="n2127" class="pln"><a href="#n2127">2127</a></p>
<p id="n2128" class="pln"><a href="#n2128">2128</a></p>
<p id="n2129" class="stm mis"><a href="#n2129">2129</a></p>
<p id="n2130" class="pln"><a href="#n2130">2130</a></p>
<p id="n2131" class="pln"><a href="#n2131">2131</a></p>
<p id="n2132" class="pln"><a href="#n2132">2132</a></p>
<p id="n2133" class="pln"><a href="#n2133">2133</a></p>
<p id="n2134" class="stm run hide_run"><a href="#n2134">2134</a></p>
<p id="n2135" class="stm run hide_run"><a href="#n2135">2135</a></p>
<p id="n2136" class="stm run hide_run"><a href="#n2136">2136</a></p>
<p id="n2137" class="stm run hide_run"><a href="#n2137">2137</a></p>
<p id="n2138" class="stm run hide_run"><a href="#n2138">2138</a></p>
<p id="n2139" class="stm par run hide_run"><a href="#n2139">2139</a></p>
<p id="n2140" class="stm mis"><a href="#n2140">2140</a></p>
<p id="n2141" class="stm par run hide_run"><a href="#n2141">2141</a></p>
<p id="n2142" class="stm mis"><a href="#n2142">2142</a></p>
<p id="n2143" class="stm par run hide_run"><a href="#n2143">2143</a></p>
<p id="n2144" class="stm run hide_run"><a href="#n2144">2144</a></p>
<p id="n2145" class="pln"><a href="#n2145">2145</a></p>
<p id="n2146" class="stm mis"><a href="#n2146">2146</a></p>
<p id="n2147" class="stm run hide_run"><a href="#n2147">2147</a></p>
<p id="n2148" class="pln"><a href="#n2148">2148</a></p>
<p id="n2149" class="pln"><a href="#n2149">2149</a></p>
<p id="n2150" class="stm run hide_run"><a href="#n2150">2150</a></p>
<p id="n2151" class="stm run hide_run"><a href="#n2151">2151</a></p>
<p id="n2152" class="stm run hide_run"><a href="#n2152">2152</a></p>
<p id="n2153" class="pln"><a href="#n2153">2153</a></p>
<p id="n2154" class="stm run hide_run"><a href="#n2154">2154</a></p>
<p id="n2155" class="pln"><a href="#n2155">2155</a></p>
<p id="n2156" class="pln"><a href="#n2156">2156</a></p>
<p id="n2157" class="pln"><a href="#n2157">2157</a></p>
<p id="n2158" class="pln"><a href="#n2158">2158</a></p>
<p id="n2159" class="pln"><a href="#n2159">2159</a></p>
<p id="n2160" class="pln"><a href="#n2160">2160</a></p>
<p id="n2161" class="pln"><a href="#n2161">2161</a></p>
<p id="n2162" class="pln"><a href="#n2162">2162</a></p>
<p id="n2163" class="pln"><a href="#n2163">2163</a></p>
<p id="n2164" class="pln"><a href="#n2164">2164</a></p>
<p id="n2165" class="pln"><a href="#n2165">2165</a></p>
<p id="n2166" class="stm run hide_run"><a href="#n2166">2166</a></p>
<p id="n2167" class="stm run hide_run"><a href="#n2167">2167</a></p>
<p id="n2168" class="stm run hide_run"><a href="#n2168">2168</a></p>
<p id="n2169" class="stm run hide_run"><a href="#n2169">2169</a></p>
<p id="n2170" class="stm run hide_run"><a href="#n2170">2170</a></p>
<p id="n2171" class="stm run hide_run"><a href="#n2171">2171</a></p>
<p id="n2172" class="stm run hide_run"><a href="#n2172">2172</a></p>
<p id="n2173" class="pln"><a href="#n2173">2173</a></p>
<p id="n2174" class="stm run hide_run"><a href="#n2174">2174</a></p>
<p id="n2175" class="stm par run hide_run"><a href="#n2175">2175</a></p>
<p id="n2176" class="stm run hide_run"><a href="#n2176">2176</a></p>
<p id="n2177" class="pln"><a href="#n2177">2177</a></p>
<p id="n2178" class="stm run hide_run"><a href="#n2178">2178</a></p>
<p id="n2179" class="stm run hide_run"><a href="#n2179">2179</a></p>
<p id="n2180" class="stm run hide_run"><a href="#n2180">2180</a></p>
<p id="n2181" class="stm run hide_run"><a href="#n2181">2181</a></p>
<p id="n2182" class="stm run hide_run"><a href="#n2182">2182</a></p>
<p id="n2183" class="pln"><a href="#n2183">2183</a></p>
<p id="n2184" class="pln"><a href="#n2184">2184</a></p>
<p id="n2185" class="pln"><a href="#n2185">2185</a></p>
<p id="n2186" class="stm run hide_run"><a href="#n2186">2186</a></p>
<p id="n2187" class="pln"><a href="#n2187">2187</a></p>
<p id="n2188" class="pln"><a href="#n2188">2188</a></p>
<p id="n2189" class="stm run hide_run"><a href="#n2189">2189</a></p>
<p id="n2190" class="stm run hide_run"><a href="#n2190">2190</a></p>
<p id="n2191" class="pln"><a href="#n2191">2191</a></p>
<p id="n2192" class="stm run hide_run"><a href="#n2192">2192</a></p>
<p id="n2193" class="pln"><a href="#n2193">2193</a></p>
<p id="n2194" class="stm run hide_run"><a href="#n2194">2194</a></p>
<p id="n2195" class="stm run hide_run"><a href="#n2195">2195</a></p>
<p id="n2196" class="stm run hide_run"><a href="#n2196">2196</a></p>
<p id="n2197" class="pln"><a href="#n2197">2197</a></p>
<p id="n2198" class="pln"><a href="#n2198">2198</a></p>
<p id="n2199" class="stm run hide_run"><a href="#n2199">2199</a></p>
<p id="n2200" class="pln"><a href="#n2200">2200</a></p>
<p id="n2201" class="stm run hide_run"><a href="#n2201">2201</a></p>
<p id="n2202" class="stm mis"><a href="#n2202">2202</a></p>
<p id="n2203" class="stm mis"><a href="#n2203">2203</a></p>
<p id="n2204" class="stm mis"><a href="#n2204">2204</a></p>
<p id="n2205" class="pln"><a href="#n2205">2205</a></p>
<p id="n2206" class="stm mis"><a href="#n2206">2206</a></p>
<p id="n2207" class="pln"><a href="#n2207">2207</a></p>
<p id="n2208" class="stm run hide_run"><a href="#n2208">2208</a></p>
<p id="n2209" class="pln"><a href="#n2209">2209</a></p>
<p id="n2210" class="pln"><a href="#n2210">2210</a></p>
<p id="n2211" class="stm run hide_run"><a href="#n2211">2211</a></p>
<p id="n2212" class="pln"><a href="#n2212">2212</a></p>
<p id="n2213" class="pln"><a href="#n2213">2213</a></p>
<p id="n2214" class="pln"><a href="#n2214">2214</a></p>
<p id="n2215" class="pln"><a href="#n2215">2215</a></p>
<p id="n2216" class="pln"><a href="#n2216">2216</a></p>
<p id="n2217" class="pln"><a href="#n2217">2217</a></p>
<p id="n2218" class="pln"><a href="#n2218">2218</a></p>
<p id="n2219" class="pln"><a href="#n2219">2219</a></p>
<p id="n2220" class="pln"><a href="#n2220">2220</a></p>
<p id="n2221" class="pln"><a href="#n2221">2221</a></p>
<p id="n2222" class="stm run hide_run"><a href="#n2222">2222</a></p>
<p id="n2223" class="exc"><a href="#n2223">2223</a></p>
<p id="n2224" class="pln"><a href="#n2224">2224</a></p>
<p id="n2225" class="stm run hide_run"><a href="#n2225">2225</a></p>
<p id="n2226" class="pln"><a href="#n2226">2226</a></p>
<p id="n2227" class="pln"><a href="#n2227">2227</a></p>
<p id="n2228" class="pln"><a href="#n2228">2228</a></p>
<p id="n2229" class="pln"><a href="#n2229">2229</a></p>
<p id="n2230" class="pln"><a href="#n2230">2230</a></p>
<p id="n2231" class="pln"><a href="#n2231">2231</a></p>
<p id="n2232" class="pln"><a href="#n2232">2232</a></p>
<p id="n2233" class="pln"><a href="#n2233">2233</a></p>
<p id="n2234" class="stm mis"><a href="#n2234">2234</a></p>
<p id="n2235" class="stm mis"><a href="#n2235">2235</a></p>
<p id="n2236" class="stm mis"><a href="#n2236">2236</a></p>
<p id="n2237" class="stm mis"><a href="#n2237">2237</a></p>
<p id="n2238" class="pln"><a href="#n2238">2238</a></p>
<p id="n2239" class="stm run hide_run"><a href="#n2239">2239</a></p>
<p id="n2240" class="stm mis"><a href="#n2240">2240</a></p>
<p id="n2241" class="stm mis"><a href="#n2241">2241</a></p>
<p id="n2242" class="stm mis"><a href="#n2242">2242</a></p>
<p id="n2243" class="stm mis"><a href="#n2243">2243</a></p>
<p id="n2244" class="pln"><a href="#n2244">2244</a></p>
<p id="n2245" class="pln"><a href="#n2245">2245</a></p>
<p id="n2246" class="pln"><a href="#n2246">2246</a></p>
<p id="n2247" class="stm mis"><a href="#n2247">2247</a></p>
<p id="n2248" class="stm mis"><a href="#n2248">2248</a></p>
<p id="n2249" class="stm mis"><a href="#n2249">2249</a></p>
<p id="n2250" class="stm mis"><a href="#n2250">2250</a></p>
<p id="n2251" class="stm mis"><a href="#n2251">2251</a></p>
<p id="n2252" class="pln"><a href="#n2252">2252</a></p>
<p id="n2253" class="pln"><a href="#n2253">2253</a></p>
<p id="n2254" class="stm run hide_run"><a href="#n2254">2254</a></p>
<p id="n2255" class="pln"><a href="#n2255">2255</a></p>
<p id="n2256" class="pln"><a href="#n2256">2256</a></p>
<p id="n2257" class="pln"><a href="#n2257">2257</a></p>
<p id="n2258" class="pln"><a href="#n2258">2258</a></p>
<p id="n2259" class="pln"><a href="#n2259">2259</a></p>
<p id="n2260" class="pln"><a href="#n2260">2260</a></p>
<p id="n2261" class="pln"><a href="#n2261">2261</a></p>
<p id="n2262" class="pln"><a href="#n2262">2262</a></p>
<p id="n2263" class="pln"><a href="#n2263">2263</a></p>
<p id="n2264" class="stm run hide_run"><a href="#n2264">2264</a></p>
<p id="n2265" class="pln"><a href="#n2265">2265</a></p>
<p id="n2266" class="pln"><a href="#n2266">2266</a></p>
<p id="n2267" class="pln"><a href="#n2267">2267</a></p>
<p id="n2268" class="pln"><a href="#n2268">2268</a></p>
<p id="n2269" class="pln"><a href="#n2269">2269</a></p>
<p id="n2270" class="pln"><a href="#n2270">2270</a></p>
<p id="n2271" class="pln"><a href="#n2271">2271</a></p>
<p id="n2272" class="stm mis"><a href="#n2272">2272</a></p>
<p id="n2273" class="stm mis"><a href="#n2273">2273</a></p>
<p id="n2274" class="stm mis"><a href="#n2274">2274</a></p>
<p id="n2275" class="stm mis"><a href="#n2275">2275</a></p>
<p id="n2276" class="stm mis"><a href="#n2276">2276</a></p>
<p id="n2277" class="pln"><a href="#n2277">2277</a></p>
<p id="n2278" class="stm run hide_run"><a href="#n2278">2278</a></p>
<p id="n2279" class="pln"><a href="#n2279">2279</a></p>
<p id="n2280" class="pln"><a href="#n2280">2280</a></p>
<p id="n2281" class="pln"><a href="#n2281">2281</a></p>
<p id="n2282" class="pln"><a href="#n2282">2282</a></p>
<p id="n2283" class="pln"><a href="#n2283">2283</a></p>
<p id="n2284" class="pln"><a href="#n2284">2284</a></p>
<p id="n2285" class="pln"><a href="#n2285">2285</a></p>
<p id="n2286" class="pln"><a href="#n2286">2286</a></p>
<p id="n2287" class="pln"><a href="#n2287">2287</a></p>
<p id="n2288" class="pln"><a href="#n2288">2288</a></p>
<p id="n2289" class="pln"><a href="#n2289">2289</a></p>
<p id="n2290" class="pln"><a href="#n2290">2290</a></p>
<p id="n2291" class="pln"><a href="#n2291">2291</a></p>
<p id="n2292" class="pln"><a href="#n2292">2292</a></p>
<p id="n2293" class="pln"><a href="#n2293">2293</a></p>
<p id="n2294" class="stm mis"><a href="#n2294">2294</a></p>
<p id="n2295" class="stm mis"><a href="#n2295">2295</a></p>
<p id="n2296" class="stm mis"><a href="#n2296">2296</a></p>
<p id="n2297" class="stm mis"><a href="#n2297">2297</a></p>
<p id="n2298" class="stm mis"><a href="#n2298">2298</a></p>
<p id="n2299" class="stm mis"><a href="#n2299">2299</a></p>
<p id="n2300" class="stm mis"><a href="#n2300">2300</a></p>
<p id="n2301" class="stm mis"><a href="#n2301">2301</a></p>
<p id="n2302" class="pln"><a href="#n2302">2302</a></p>
<p id="n2303" class="stm mis"><a href="#n2303">2303</a></p>
<p id="n2304" class="stm mis"><a href="#n2304">2304</a></p>
<p id="n2305" class="pln"><a href="#n2305">2305</a></p>
<p id="n2306" class="stm run hide_run"><a href="#n2306">2306</a></p>
<p id="n2307" class="stm mis"><a href="#n2307">2307</a></p>
<p id="n2308" class="pln"><a href="#n2308">2308</a></p>
<p id="n2309" class="stm mis"><a href="#n2309">2309</a></p>
<p id="n2310" class="stm mis"><a href="#n2310">2310</a></p>
<p id="n2311" class="stm mis"><a href="#n2311">2311</a></p>
<p id="n2312" class="pln"><a href="#n2312">2312</a></p>
<p id="n2313" class="pln"><a href="#n2313">2313</a></p>
<p id="n2314" class="stm run hide_run"><a href="#n2314">2314</a></p>
<p id="n2315" class="pln"><a href="#n2315">2315</a></p>
<p id="n2316" class="pln"><a href="#n2316">2316</a></p>
<p id="n2317" class="pln"><a href="#n2317">2317</a></p>
<p id="n2318" class="pln"><a href="#n2318">2318</a></p>
<p id="n2319" class="pln"><a href="#n2319">2319</a></p>
<p id="n2320" class="pln"><a href="#n2320">2320</a></p>
<p id="n2321" class="pln"><a href="#n2321">2321</a></p>
<p id="n2322" class="pln"><a href="#n2322">2322</a></p>
<p id="n2323" class="pln"><a href="#n2323">2323</a></p>
<p id="n2324" class="stm run hide_run"><a href="#n2324">2324</a></p>
<p id="n2325" class="pln"><a href="#n2325">2325</a></p>
<p id="n2326" class="pln"><a href="#n2326">2326</a></p>
<p id="n2327" class="pln"><a href="#n2327">2327</a></p>
<p id="n2328" class="pln"><a href="#n2328">2328</a></p>
<p id="n2329" class="pln"><a href="#n2329">2329</a></p>
<p id="n2330" class="pln"><a href="#n2330">2330</a></p>
<p id="n2331" class="pln"><a href="#n2331">2331</a></p>
<p id="n2332" class="stm mis"><a href="#n2332">2332</a></p>
<p id="n2333" class="stm mis"><a href="#n2333">2333</a></p>
<p id="n2334" class="stm mis"><a href="#n2334">2334</a></p>
<p id="n2335" class="pln"><a href="#n2335">2335</a></p>
<p id="n2336" class="stm run hide_run"><a href="#n2336">2336</a></p>
<p id="n2337" class="pln"><a href="#n2337">2337</a></p>
<p id="n2338" class="pln"><a href="#n2338">2338</a></p>
<p id="n2339" class="pln"><a href="#n2339">2339</a></p>
<p id="n2340" class="pln"><a href="#n2340">2340</a></p>
<p id="n2341" class="pln"><a href="#n2341">2341</a></p>
<p id="n2342" class="pln"><a href="#n2342">2342</a></p>
<p id="n2343" class="pln"><a href="#n2343">2343</a></p>
<p id="n2344" class="pln"><a href="#n2344">2344</a></p>
<p id="n2345" class="pln"><a href="#n2345">2345</a></p>
<p id="n2346" class="pln"><a href="#n2346">2346</a></p>
<p id="n2347" class="pln"><a href="#n2347">2347</a></p>
<p id="n2348" class="pln"><a href="#n2348">2348</a></p>
<p id="n2349" class="pln"><a href="#n2349">2349</a></p>
<p id="n2350" class="pln"><a href="#n2350">2350</a></p>
<p id="n2351" class="pln"><a href="#n2351">2351</a></p>
<p id="n2352" class="stm mis"><a href="#n2352">2352</a></p>
<p id="n2353" class="stm mis"><a href="#n2353">2353</a></p>
<p id="n2354" class="stm mis"><a href="#n2354">2354</a></p>
<p id="n2355" class="pln"><a href="#n2355">2355</a></p>
<p id="n2356" class="stm run hide_run"><a href="#n2356">2356</a></p>
<p id="n2357" class="exc"><a href="#n2357">2357</a></p>
<p id="n2358" class="pln"><a href="#n2358">2358</a></p>
<p id="n2359" class="pln"><a href="#n2359">2359</a></p>
<p id="n2360" class="stm run hide_run"><a href="#n2360">2360</a></p>
<p id="n2361" class="pln"><a href="#n2361">2361</a></p>
<p id="n2362" class="pln"><a href="#n2362">2362</a></p>
<p id="n2363" class="pln"><a href="#n2363">2363</a></p>
<p id="n2364" class="pln"><a href="#n2364">2364</a></p>
<p id="n2365" class="pln"><a href="#n2365">2365</a></p>
<p id="n2366" class="pln"><a href="#n2366">2366</a></p>
<p id="n2367" class="pln"><a href="#n2367">2367</a></p>
<p id="n2368" class="pln"><a href="#n2368">2368</a></p>
<p id="n2369" class="pln"><a href="#n2369">2369</a></p>
<p id="n2370" class="pln"><a href="#n2370">2370</a></p>
<p id="n2371" class="pln"><a href="#n2371">2371</a></p>
<p id="n2372" class="pln"><a href="#n2372">2372</a></p>
<p id="n2373" class="pln"><a href="#n2373">2373</a></p>
<p id="n2374" class="pln"><a href="#n2374">2374</a></p>
<p id="n2375" class="pln"><a href="#n2375">2375</a></p>
<p id="n2376" class="pln"><a href="#n2376">2376</a></p>
<p id="n2377" class="pln"><a href="#n2377">2377</a></p>
<p id="n2378" class="pln"><a href="#n2378">2378</a></p>
<p id="n2379" class="pln"><a href="#n2379">2379</a></p>
<p id="n2380" class="pln"><a href="#n2380">2380</a></p>
<p id="n2381" class="pln"><a href="#n2381">2381</a></p>
<p id="n2382" class="pln"><a href="#n2382">2382</a></p>
<p id="n2383" class="pln"><a href="#n2383">2383</a></p>
<p id="n2384" class="pln"><a href="#n2384">2384</a></p>
<p id="n2385" class="pln"><a href="#n2385">2385</a></p>
<p id="n2386" class="stm run hide_run"><a href="#n2386">2386</a></p>
<p id="n2387" class="pln"><a href="#n2387">2387</a></p>
<p id="n2388" class="pln"><a href="#n2388">2388</a></p>
<p id="n2389" class="pln"><a href="#n2389">2389</a></p>
<p id="n2390" class="pln"><a href="#n2390">2390</a></p>
<p id="n2391" class="pln"><a href="#n2391">2391</a></p>
<p id="n2392" class="pln"><a href="#n2392">2392</a></p>
<p id="n2393" class="pln"><a href="#n2393">2393</a></p>
<p id="n2394" class="pln"><a href="#n2394">2394</a></p>
<p id="n2395" class="stm run hide_run"><a href="#n2395">2395</a></p>
<p id="n2396" class="stm run hide_run"><a href="#n2396">2396</a></p>
<p id="n2397" class="pln"><a href="#n2397">2397</a></p>
<p id="n2398" class="pln"><a href="#n2398">2398</a></p>
<p id="n2399" class="pln"><a href="#n2399">2399</a></p>
<p id="n2400" class="stm par run hide_run"><a href="#n2400">2400</a></p>
<p id="n2401" class="stm mis"><a href="#n2401">2401</a></p>
<p id="n2402" class="pln"><a href="#n2402">2402</a></p>
<p id="n2403" class="pln"><a href="#n2403">2403</a></p>
<p id="n2404" class="stm run hide_run"><a href="#n2404">2404</a></p>
<p id="n2405" class="pln"><a href="#n2405">2405</a></p>
<p id="n2406" class="stm run hide_run"><a href="#n2406">2406</a></p>
<p id="n2407" class="stm par run hide_run"><a href="#n2407">2407</a></p>
<p id="n2408" class="stm run hide_run"><a href="#n2408">2408</a></p>
<p id="n2409" class="pln"><a href="#n2409">2409</a></p>
<p id="n2410" class="stm mis"><a href="#n2410">2410</a></p>
<p id="n2411" class="pln"><a href="#n2411">2411</a></p>
<p id="n2412" class="stm run hide_run"><a href="#n2412">2412</a></p>
<p id="n2413" class="pln"><a href="#n2413">2413</a></p>
<p id="n2414" class="stm run hide_run"><a href="#n2414">2414</a></p>
<p id="n2415" class="stm run hide_run"><a href="#n2415">2415</a></p>
<p id="n2416" class="pln"><a href="#n2416">2416</a></p>
<p id="n2417" class="pln"><a href="#n2417">2417</a></p>
<p id="n2418" class="stm run hide_run"><a href="#n2418">2418</a></p>
<p id="n2419" class="stm run hide_run"><a href="#n2419">2419</a></p>
<p id="n2420" class="stm run hide_run"><a href="#n2420">2420</a></p>
<p id="n2421" class="pln"><a href="#n2421">2421</a></p>
<p id="n2422" class="pln"><a href="#n2422">2422</a></p>
<p id="n2423" class="pln"><a href="#n2423">2423</a></p>
<p id="n2424" class="stm run hide_run"><a href="#n2424">2424</a></p>
<p id="n2425" class="pln"><a href="#n2425">2425</a></p>
<p id="n2426" class="stm run hide_run"><a href="#n2426">2426</a></p>
<p id="n2427" class="pln"><a href="#n2427">2427</a></p>
<p id="n2428" class="pln"><a href="#n2428">2428</a></p>
<p id="n2429" class="pln"><a href="#n2429">2429</a></p>
<p id="n2430" class="pln"><a href="#n2430">2430</a></p>
<p id="n2431" class="pln"><a href="#n2431">2431</a></p>
<p id="n2432" class="pln"><a href="#n2432">2432</a></p>
<p id="n2433" class="pln"><a href="#n2433">2433</a></p>
<p id="n2434" class="pln"><a href="#n2434">2434</a></p>
<p id="n2435" class="stm run hide_run"><a href="#n2435">2435</a></p>
<p id="n2436" class="pln"><a href="#n2436">2436</a></p>
<p id="n2437" class="stm run hide_run"><a href="#n2437">2437</a></p>
<p id="n2438" class="stm run hide_run"><a href="#n2438">2438</a></p>
<p id="n2439" class="pln"><a href="#n2439">2439</a></p>
<p id="n2440" class="pln"><a href="#n2440">2440</a></p>
<p id="n2441" class="pln"><a href="#n2441">2441</a></p>
<p id="n2442" class="pln"><a href="#n2442">2442</a></p>
<p id="n2443" class="pln"><a href="#n2443">2443</a></p>
<p id="n2444" class="pln"><a href="#n2444">2444</a></p>
<p id="n2445" class="pln"><a href="#n2445">2445</a></p>
<p id="n2446" class="pln"><a href="#n2446">2446</a></p>
<p id="n2447" class="pln"><a href="#n2447">2447</a></p>
<p id="n2448" class="pln"><a href="#n2448">2448</a></p>
<p id="n2449" class="pln"><a href="#n2449">2449</a></p>
<p id="n2450" class="pln"><a href="#n2450">2450</a></p>
<p id="n2451" class="pln"><a href="#n2451">2451</a></p>
<p id="n2452" class="pln"><a href="#n2452">2452</a></p>
<p id="n2453" class="pln"><a href="#n2453">2453</a></p>
<p id="n2454" class="pln"><a href="#n2454">2454</a></p>
<p id="n2455" class="pln"><a href="#n2455">2455</a></p>
<p id="n2456" class="pln"><a href="#n2456">2456</a></p>
<p id="n2457" class="pln"><a href="#n2457">2457</a></p>
<p id="n2458" class="pln"><a href="#n2458">2458</a></p>
<p id="n2459" class="pln"><a href="#n2459">2459</a></p>
<p id="n2460" class="pln"><a href="#n2460">2460</a></p>
<p id="n2461" class="pln"><a href="#n2461">2461</a></p>
<p id="n2462" class="pln"><a href="#n2462">2462</a></p>
<p id="n2463" class="pln"><a href="#n2463">2463</a></p>
<p id="n2464" class="pln"><a href="#n2464">2464</a></p>
<p id="n2465" class="pln"><a href="#n2465">2465</a></p>
<p id="n2466" class="pln"><a href="#n2466">2466</a></p>
<p id="n2467" class="pln"><a href="#n2467">2467</a></p>
<p id="n2468" class="pln"><a href="#n2468">2468</a></p>
<p id="n2469" class="pln"><a href="#n2469">2469</a></p>
<p id="n2470" class="pln"><a href="#n2470">2470</a></p>
<p id="n2471" class="pln"><a href="#n2471">2471</a></p>
<p id="n2472" class="pln"><a href="#n2472">2472</a></p>
<p id="n2473" class="pln"><a href="#n2473">2473</a></p>
<p id="n2474" class="pln"><a href="#n2474">2474</a></p>
<p id="n2475" class="pln"><a href="#n2475">2475</a></p>
<p id="n2476" class="pln"><a href="#n2476">2476</a></p>
<p id="n2477" class="pln"><a href="#n2477">2477</a></p>
<p id="n2478" class="stm par run hide_run"><a href="#n2478">2478</a></p>
<p id="n2479" class="stm run hide_run"><a href="#n2479">2479</a></p>
<p id="n2480" class="pln"><a href="#n2480">2480</a></p>
<p id="n2481" class="pln"><a href="#n2481">2481</a></p>
<p id="n2482" class="pln"><a href="#n2482">2482</a></p>
<p id="n2483" class="pln"><a href="#n2483">2483</a></p>
<p id="n2484" class="pln"><a href="#n2484">2484</a></p>
<p id="n2485" class="pln"><a href="#n2485">2485</a></p>
<p id="n2486" class="stm mis"><a href="#n2486">2486</a></p>
<p id="n2487" class="pln"><a href="#n2487">2487</a></p>
<p id="n2488" class="pln"><a href="#n2488">2488</a></p>
<p id="n2489" class="pln"><a href="#n2489">2489</a></p>
<p id="n2490" class="pln"><a href="#n2490">2490</a></p>
<p id="n2491" class="pln"><a href="#n2491">2491</a></p>
<p id="n2492" class="pln"><a href="#n2492">2492</a></p>
<p id="n2493" class="pln"><a href="#n2493">2493</a></p>
<p id="n2494" class="stm run hide_run"><a href="#n2494">2494</a></p>
<p id="n2495" class="stm run hide_run"><a href="#n2495">2495</a></p>
<p id="n2496" class="pln"><a href="#n2496">2496</a></p>
<p id="n2497" class="pln"><a href="#n2497">2497</a></p>
<p id="n2498" class="pln"><a href="#n2498">2498</a></p>
<p id="n2499" class="pln"><a href="#n2499">2499</a></p>
<p id="n2500" class="pln"><a href="#n2500">2500</a></p>
<p id="n2501" class="pln"><a href="#n2501">2501</a></p>
<p id="n2502" class="pln"><a href="#n2502">2502</a></p>
<p id="n2503" class="pln"><a href="#n2503">2503</a></p>
<p id="n2504" class="pln"><a href="#n2504">2504</a></p>
<p id="n2505" class="pln"><a href="#n2505">2505</a></p>
<p id="n2506" class="pln"><a href="#n2506">2506</a></p>
<p id="n2507" class="pln"><a href="#n2507">2507</a></p>
<p id="n2508" class="pln"><a href="#n2508">2508</a></p>
<p id="n2509" class="pln"><a href="#n2509">2509</a></p>
<p id="n2510" class="pln"><a href="#n2510">2510</a></p>
<p id="n2511" class="pln"><a href="#n2511">2511</a></p>
<p id="n2512" class="pln"><a href="#n2512">2512</a></p>
<p id="n2513" class="pln"><a href="#n2513">2513</a></p>
<p id="n2514" class="pln"><a href="#n2514">2514</a></p>
<p id="n2515" class="pln"><a href="#n2515">2515</a></p>
<p id="n2516" class="pln"><a href="#n2516">2516</a></p>
<p id="n2517" class="pln"><a href="#n2517">2517</a></p>
<p id="n2518" class="pln"><a href="#n2518">2518</a></p>
<p id="n2519" class="pln"><a href="#n2519">2519</a></p>
<p id="n2520" class="pln"><a href="#n2520">2520</a></p>
<p id="n2521" class="pln"><a href="#n2521">2521</a></p>
<p id="n2522" class="pln"><a href="#n2522">2522</a></p>
<p id="n2523" class="pln"><a href="#n2523">2523</a></p>
<p id="n2524" class="pln"><a href="#n2524">2524</a></p>
<p id="n2525" class="pln"><a href="#n2525">2525</a></p>
<p id="n2526" class="pln"><a href="#n2526">2526</a></p>
<p id="n2527" class="pln"><a href="#n2527">2527</a></p>
<p id="n2528" class="pln"><a href="#n2528">2528</a></p>
<p id="n2529" class="pln"><a href="#n2529">2529</a></p>
<p id="n2530" class="pln"><a href="#n2530">2530</a></p>
<p id="n2531" class="pln"><a href="#n2531">2531</a></p>
<p id="n2532" class="pln"><a href="#n2532">2532</a></p>
<p id="n2533" class="pln"><a href="#n2533">2533</a></p>
<p id="n2534" class="pln"><a href="#n2534">2534</a></p>
<p id="n2535" class="stm run hide_run"><a href="#n2535">2535</a></p>
<p id="n2536" class="stm par run hide_run"><a href="#n2536">2536</a></p>
<p id="n2537" class="stm mis"><a href="#n2537">2537</a></p>
<p id="n2538" class="stm par run hide_run"><a href="#n2538">2538</a></p>
<p id="n2539" class="stm run hide_run"><a href="#n2539">2539</a></p>
<p id="n2540" class="pln"><a href="#n2540">2540</a></p>
<p id="n2541" class="stm mis"><a href="#n2541">2541</a></p>
<p id="n2542" class="pln"><a href="#n2542">2542</a></p>
<p id="n2543" class="pln"><a href="#n2543">2543</a></p>
<p id="n2544" class="pln"><a href="#n2544">2544</a></p>
<p id="n2545" class="stm run hide_run"><a href="#n2545">2545</a></p>
<p id="n2546" class="pln"><a href="#n2546">2546</a></p>
<p id="n2547" class="pln"><a href="#n2547">2547</a></p>
<p id="n2548" class="pln"><a href="#n2548">2548</a></p>
<p id="n2549" class="pln"><a href="#n2549">2549</a></p>
<p id="n2550" class="pln"><a href="#n2550">2550</a></p>
<p id="n2551" class="pln"><a href="#n2551">2551</a></p>
<p id="n2552" class="pln"><a href="#n2552">2552</a></p>
<p id="n2553" class="pln"><a href="#n2553">2553</a></p>
<p id="n2554" class="stm run hide_run"><a href="#n2554">2554</a></p>
<p id="n2555" class="stm run hide_run"><a href="#n2555">2555</a></p>
<p id="n2556" class="pln"><a href="#n2556">2556</a></p>
<p id="n2557" class="stm run hide_run"><a href="#n2557">2557</a></p>
<p id="n2558" class="pln"><a href="#n2558">2558</a></p>
<p id="n2559" class="pln"><a href="#n2559">2559</a></p>
<p id="n2560" class="pln"><a href="#n2560">2560</a></p>
<p id="n2561" class="pln"><a href="#n2561">2561</a></p>
<p id="n2562" class="pln"><a href="#n2562">2562</a></p>
<p id="n2563" class="pln"><a href="#n2563">2563</a></p>
<p id="n2564" class="pln"><a href="#n2564">2564</a></p>
<p id="n2565" class="pln"><a href="#n2565">2565</a></p>
<p id="n2566" class="pln"><a href="#n2566">2566</a></p>
<p id="n2567" class="pln"><a href="#n2567">2567</a></p>
<p id="n2568" class="pln"><a href="#n2568">2568</a></p>
<p id="n2569" class="pln"><a href="#n2569">2569</a></p>
<p id="n2570" class="pln"><a href="#n2570">2570</a></p>
<p id="n2571" class="pln"><a href="#n2571">2571</a></p>
<p id="n2572" class="pln"><a href="#n2572">2572</a></p>
<p id="n2573" class="pln"><a href="#n2573">2573</a></p>
<p id="n2574" class="pln"><a href="#n2574">2574</a></p>
<p id="n2575" class="stm run hide_run"><a href="#n2575">2575</a></p>
<p id="n2576" class="pln"><a href="#n2576">2576</a></p>
<p id="n2577" class="pln"><a href="#n2577">2577</a></p>
<p id="n2578" class="pln"><a href="#n2578">2578</a></p>
<p id="n2579" class="stm run hide_run"><a href="#n2579">2579</a></p>
<p id="n2580" class="pln"><a href="#n2580">2580</a></p>
<p id="n2581" class="pln"><a href="#n2581">2581</a></p>
<p id="n2582" class="pln"><a href="#n2582">2582</a></p>
<p id="n2583" class="pln"><a href="#n2583">2583</a></p>
<p id="n2584" class="pln"><a href="#n2584">2584</a></p>
<p id="n2585" class="pln"><a href="#n2585">2585</a></p>
<p id="n2586" class="pln"><a href="#n2586">2586</a></p>
<p id="n2587" class="pln"><a href="#n2587">2587</a></p>
<p id="n2588" class="pln"><a href="#n2588">2588</a></p>
<p id="n2589" class="pln"><a href="#n2589">2589</a></p>
<p id="n2590" class="pln"><a href="#n2590">2590</a></p>
<p id="n2591" class="pln"><a href="#n2591">2591</a></p>
<p id="n2592" class="pln"><a href="#n2592">2592</a></p>
<p id="n2593" class="pln"><a href="#n2593">2593</a></p>
<p id="n2594" class="pln"><a href="#n2594">2594</a></p>
<p id="n2595" class="pln"><a href="#n2595">2595</a></p>
<p id="n2596" class="pln"><a href="#n2596">2596</a></p>
<p id="n2597" class="pln"><a href="#n2597">2597</a></p>
<p id="n2598" class="pln"><a href="#n2598">2598</a></p>
<p id="n2599" class="pln"><a href="#n2599">2599</a></p>
<p id="n2600" class="pln"><a href="#n2600">2600</a></p>
<p id="n2601" class="pln"><a href="#n2601">2601</a></p>
<p id="n2602" class="pln"><a href="#n2602">2602</a></p>
<p id="n2603" class="pln"><a href="#n2603">2603</a></p>
<p id="n2604" class="pln"><a href="#n2604">2604</a></p>
<p id="n2605" class="pln"><a href="#n2605">2605</a></p>
<p id="n2606" class="pln"><a href="#n2606">2606</a></p>
<p id="n2607" class="pln"><a href="#n2607">2607</a></p>
<p id="n2608" class="pln"><a href="#n2608">2608</a></p>
<p id="n2609" class="pln"><a href="#n2609">2609</a></p>
<p id="n2610" class="pln"><a href="#n2610">2610</a></p>
<p id="n2611" class="pln"><a href="#n2611">2611</a></p>
<p id="n2612" class="pln"><a href="#n2612">2612</a></p>
<p id="n2613" class="pln"><a href="#n2613">2613</a></p>
<p id="n2614" class="pln"><a href="#n2614">2614</a></p>
<p id="n2615" class="pln"><a href="#n2615">2615</a></p>
<p id="n2616" class="pln"><a href="#n2616">2616</a></p>
<p id="n2617" class="pln"><a href="#n2617">2617</a></p>
<p id="n2618" class="stm run hide_run"><a href="#n2618">2618</a></p>
<p id="n2619" class="stm run hide_run"><a href="#n2619">2619</a></p>
<p id="n2620" class="stm run hide_run"><a href="#n2620">2620</a></p>
<p id="n2621" class="pln"><a href="#n2621">2621</a></p>
<p id="n2622" class="stm run hide_run"><a href="#n2622">2622</a></p>
<p id="n2623" class="pln"><a href="#n2623">2623</a></p>
<p id="n2624" class="pln"><a href="#n2624">2624</a></p>
<p id="n2625" class="pln"><a href="#n2625">2625</a></p>
<p id="n2626" class="pln"><a href="#n2626">2626</a></p>
<p id="n2627" class="pln"><a href="#n2627">2627</a></p>
<p id="n2628" class="pln"><a href="#n2628">2628</a></p>
<p id="n2629" class="pln"><a href="#n2629">2629</a></p>
<p id="n2630" class="pln"><a href="#n2630">2630</a></p>
<p id="n2631" class="pln"><a href="#n2631">2631</a></p>
<p id="n2632" class="pln"><a href="#n2632">2632</a></p>
<p id="n2633" class="pln"><a href="#n2633">2633</a></p>
<p id="n2634" class="pln"><a href="#n2634">2634</a></p>
<p id="n2635" class="pln"><a href="#n2635">2635</a></p>
<p id="n2636" class="pln"><a href="#n2636">2636</a></p>
<p id="n2637" class="pln"><a href="#n2637">2637</a></p>
<p id="n2638" class="stm par run hide_run"><a href="#n2638">2638</a></p>
<p id="n2639" class="stm mis"><a href="#n2639">2639</a></p>
<p id="n2640" class="stm run hide_run"><a href="#n2640">2640</a></p>
<p id="n2641" class="stm run hide_run"><a href="#n2641">2641</a></p>
<p id="n2642" class="stm run hide_run"><a href="#n2642">2642</a></p>
<p id="n2643" class="pln"><a href="#n2643">2643</a></p>
<p id="n2644" class="stm run hide_run"><a href="#n2644">2644</a></p>
<p id="n2645" class="exc"><a href="#n2645">2645</a></p>
<p id="n2646" class="pln"><a href="#n2646">2646</a></p>
<p id="n2647" class="pln"><a href="#n2647">2647</a></p>
<p id="n2648" class="stm run hide_run"><a href="#n2648">2648</a></p>
<p id="n2649" class="pln"><a href="#n2649">2649</a></p>
<p id="n2650" class="pln"><a href="#n2650">2650</a></p>
<p id="n2651" class="pln"><a href="#n2651">2651</a></p>
<p id="n2652" class="pln"><a href="#n2652">2652</a></p>
<p id="n2653" class="pln"><a href="#n2653">2653</a></p>
<p id="n2654" class="pln"><a href="#n2654">2654</a></p>
<p id="n2655" class="pln"><a href="#n2655">2655</a></p>
<p id="n2656" class="pln"><a href="#n2656">2656</a></p>
<p id="n2657" class="pln"><a href="#n2657">2657</a></p>
<p id="n2658" class="pln"><a href="#n2658">2658</a></p>
<p id="n2659" class="pln"><a href="#n2659">2659</a></p>
<p id="n2660" class="pln"><a href="#n2660">2660</a></p>
<p id="n2661" class="stm run hide_run"><a href="#n2661">2661</a></p>
<p id="n2662" class="stm run hide_run"><a href="#n2662">2662</a></p>
<p id="n2663" class="stm run hide_run"><a href="#n2663">2663</a></p>
<p id="n2664" class="stm run hide_run"><a href="#n2664">2664</a></p>
<p id="n2665" class="stm run hide_run"><a href="#n2665">2665</a></p>
<p id="n2666" class="stm run hide_run"><a href="#n2666">2666</a></p>
<p id="n2667" class="stm run hide_run"><a href="#n2667">2667</a></p>
<p id="n2668" class="pln"><a href="#n2668">2668</a></p>
<p id="n2669" class="stm run hide_run"><a href="#n2669">2669</a></p>
<p id="n2670" class="stm run hide_run"><a href="#n2670">2670</a></p>
<p id="n2671" class="stm run hide_run"><a href="#n2671">2671</a></p>
<p id="n2672" class="stm run hide_run"><a href="#n2672">2672</a></p>
<p id="n2673" class="stm run hide_run"><a href="#n2673">2673</a></p>
<p id="n2674" class="stm run hide_run"><a href="#n2674">2674</a></p>
<p id="n2675" class="stm run hide_run"><a href="#n2675">2675</a></p>
<p id="n2676" class="stm run hide_run"><a href="#n2676">2676</a></p>
<p id="n2677" class="pln"><a href="#n2677">2677</a></p>
<p id="n2678" class="stm run hide_run"><a href="#n2678">2678</a></p>
<p id="n2679" class="stm par run hide_run"><a href="#n2679">2679</a></p>
<p id="n2680" class="stm run hide_run"><a href="#n2680">2680</a></p>
<p id="n2681" class="pln"><a href="#n2681">2681</a></p>
<p id="n2682" class="stm run hide_run"><a href="#n2682">2682</a></p>
<p id="n2683" class="stm par run hide_run"><a href="#n2683">2683</a></p>
<p id="n2684" class="stm run hide_run"><a href="#n2684">2684</a></p>
<p id="n2685" class="stm run hide_run"><a href="#n2685">2685</a></p>
<p id="n2686" class="stm mis"><a href="#n2686">2686</a></p>
<p id="n2687" class="stm mis"><a href="#n2687">2687</a></p>
<p id="n2688" class="pln"><a href="#n2688">2688</a></p>
<p id="n2689" class="stm run hide_run"><a href="#n2689">2689</a></p>
<p id="n2690" class="pln"><a href="#n2690">2690</a></p>
<p id="n2691" class="pln"><a href="#n2691">2691</a></p>
<p id="n2692" class="pln"><a href="#n2692">2692</a></p>
<p id="n2693" class="stm run hide_run"><a href="#n2693">2693</a></p>
<p id="n2694" class="stm run hide_run"><a href="#n2694">2694</a></p>
<p id="n2695" class="pln"><a href="#n2695">2695</a></p>
<p id="n2696" class="pln"><a href="#n2696">2696</a></p>
<p id="n2697" class="stm run hide_run"><a href="#n2697">2697</a></p>
<p id="n2698" class="pln"><a href="#n2698">2698</a></p>
<p id="n2699" class="stm run hide_run"><a href="#n2699">2699</a></p>
<p id="n2700" class="stm run hide_run"><a href="#n2700">2700</a></p>
<p id="n2701" class="stm run hide_run"><a href="#n2701">2701</a></p>
<p id="n2702" class="stm run hide_run"><a href="#n2702">2702</a></p>
<p id="n2703" class="stm run hide_run"><a href="#n2703">2703</a></p>
<p id="n2704" class="stm run hide_run"><a href="#n2704">2704</a></p>
<p id="n2705" class="pln"><a href="#n2705">2705</a></p>
<p id="n2706" class="pln"><a href="#n2706">2706</a></p>
<p id="n2707" class="stm run hide_run"><a href="#n2707">2707</a></p>
<p id="n2708" class="pln"><a href="#n2708">2708</a></p>
<p id="n2709" class="pln"><a href="#n2709">2709</a></p>
<p id="n2710" class="pln"><a href="#n2710">2710</a></p>
<p id="n2711" class="pln"><a href="#n2711">2711</a></p>
<p id="n2712" class="pln"><a href="#n2712">2712</a></p>
<p id="n2713" class="pln"><a href="#n2713">2713</a></p>
<p id="n2714" class="pln"><a href="#n2714">2714</a></p>
<p id="n2715" class="pln"><a href="#n2715">2715</a></p>
<p id="n2716" class="pln"><a href="#n2716">2716</a></p>
<p id="n2717" class="pln"><a href="#n2717">2717</a></p>
<p id="n2718" class="pln"><a href="#n2718">2718</a></p>
<p id="n2719" class="pln"><a href="#n2719">2719</a></p>
<p id="n2720" class="pln"><a href="#n2720">2720</a></p>
<p id="n2721" class="pln"><a href="#n2721">2721</a></p>
<p id="n2722" class="pln"><a href="#n2722">2722</a></p>
<p id="n2723" class="pln"><a href="#n2723">2723</a></p>
<p id="n2724" class="pln"><a href="#n2724">2724</a></p>
<p id="n2725" class="pln"><a href="#n2725">2725</a></p>
<p id="n2726" class="pln"><a href="#n2726">2726</a></p>
<p id="n2727" class="pln"><a href="#n2727">2727</a></p>
<p id="n2728" class="pln"><a href="#n2728">2728</a></p>
<p id="n2729" class="stm run hide_run"><a href="#n2729">2729</a></p>
<p id="n2730" class="stm par run hide_run"><a href="#n2730">2730</a></p>
<p id="n2731" class="stm mis"><a href="#n2731">2731</a></p>
<p id="n2732" class="stm par run hide_run"><a href="#n2732">2732</a></p>
<p id="n2733" class="stm run hide_run"><a href="#n2733">2733</a></p>
<p id="n2734" class="pln"><a href="#n2734">2734</a></p>
<p id="n2735" class="pln"><a href="#n2735">2735</a></p>
<p id="n2736" class="stm par run hide_run"><a href="#n2736">2736</a></p>
<p id="n2737" class="stm mis"><a href="#n2737">2737</a></p>
<p id="n2738" class="stm mis"><a href="#n2738">2738</a></p>
<p id="n2739" class="stm mis"><a href="#n2739">2739</a></p>
<p id="n2740" class="pln"><a href="#n2740">2740</a></p>
<p id="n2741" class="pln"><a href="#n2741">2741</a></p>
<p id="n2742" class="stm run hide_run"><a href="#n2742">2742</a></p>
<p id="n2743" class="stm run hide_run"><a href="#n2743">2743</a></p>
<p id="n2744" class="pln"><a href="#n2744">2744</a></p>
<p id="n2745" class="pln"><a href="#n2745">2745</a></p>
<p id="n2746" class="stm run hide_run"><a href="#n2746">2746</a></p>
<p id="n2747" class="pln"><a href="#n2747">2747</a></p>
<p id="n2748" class="pln"><a href="#n2748">2748</a></p>
<p id="n2749" class="pln"><a href="#n2749">2749</a></p>
<p id="n2750" class="pln"><a href="#n2750">2750</a></p>
<p id="n2751" class="pln"><a href="#n2751">2751</a></p>
<p id="n2752" class="pln"><a href="#n2752">2752</a></p>
<p id="n2753" class="pln"><a href="#n2753">2753</a></p>
<p id="n2754" class="pln"><a href="#n2754">2754</a></p>
<p id="n2755" class="pln"><a href="#n2755">2755</a></p>
<p id="n2756" class="pln"><a href="#n2756">2756</a></p>
<p id="n2757" class="pln"><a href="#n2757">2757</a></p>
<p id="n2758" class="pln"><a href="#n2758">2758</a></p>
<p id="n2759" class="pln"><a href="#n2759">2759</a></p>
<p id="n2760" class="pln"><a href="#n2760">2760</a></p>
<p id="n2761" class="pln"><a href="#n2761">2761</a></p>
<p id="n2762" class="pln"><a href="#n2762">2762</a></p>
<p id="n2763" class="pln"><a href="#n2763">2763</a></p>
<p id="n2764" class="pln"><a href="#n2764">2764</a></p>
<p id="n2765" class="pln"><a href="#n2765">2765</a></p>
<p id="n2766" class="stm mis"><a href="#n2766">2766</a></p>
<p id="n2767" class="stm mis"><a href="#n2767">2767</a></p>
<p id="n2768" class="stm mis"><a href="#n2768">2768</a></p>
<p id="n2769" class="stm mis"><a href="#n2769">2769</a></p>
<p id="n2770" class="stm mis"><a href="#n2770">2770</a></p>
<p id="n2771" class="stm mis"><a href="#n2771">2771</a></p>
<p id="n2772" class="stm mis"><a href="#n2772">2772</a></p>
<p id="n2773" class="stm mis"><a href="#n2773">2773</a></p>
<p id="n2774" class="stm mis"><a href="#n2774">2774</a></p>
<p id="n2775" class="stm mis"><a href="#n2775">2775</a></p>
<p id="n2776" class="stm mis"><a href="#n2776">2776</a></p>
<p id="n2777" class="stm mis"><a href="#n2777">2777</a></p>
<p id="n2778" class="pln"><a href="#n2778">2778</a></p>
<p id="n2779" class="stm mis"><a href="#n2779">2779</a></p>
<p id="n2780" class="pln"><a href="#n2780">2780</a></p>
<p id="n2781" class="pln"><a href="#n2781">2781</a></p>
<p id="n2782" class="pln"><a href="#n2782">2782</a></p>
<p id="n2783" class="pln"><a href="#n2783">2783</a></p>
<p id="n2784" class="stm mis"><a href="#n2784">2784</a></p>
<p id="n2785" class="stm mis"><a href="#n2785">2785</a></p>
<p id="n2786" class="pln"><a href="#n2786">2786</a></p>
<p id="n2787" class="pln"><a href="#n2787">2787</a></p>
<p id="n2788" class="pln"><a href="#n2788">2788</a></p>
<p id="n2789" class="pln"><a href="#n2789">2789</a></p>
<p id="n2790" class="pln"><a href="#n2790">2790</a></p>
<p id="n2791" class="pln"><a href="#n2791">2791</a></p>
<p id="n2792" class="pln"><a href="#n2792">2792</a></p>
<p id="n2793" class="pln"><a href="#n2793">2793</a></p>
<p id="n2794" class="stm mis"><a href="#n2794">2794</a></p>
<p id="n2795" class="pln"><a href="#n2795">2795</a></p>
<p id="n2796" class="pln"><a href="#n2796">2796</a></p>
<p id="n2797" class="pln"><a href="#n2797">2797</a></p>
<p id="n2798" class="pln"><a href="#n2798">2798</a></p>
<p id="n2799" class="pln"><a href="#n2799">2799</a></p>
<p id="n2800" class="pln"><a href="#n2800">2800</a></p>
<p id="n2801" class="stm mis"><a href="#n2801">2801</a></p>
<p id="n2802" class="stm mis"><a href="#n2802">2802</a></p>
<p id="n2803" class="stm mis"><a href="#n2803">2803</a></p>
<p id="n2804" class="stm mis"><a href="#n2804">2804</a></p>
<p id="n2805" class="pln"><a href="#n2805">2805</a></p>
<p id="n2806" class="pln"><a href="#n2806">2806</a></p>
<p id="n2807" class="pln"><a href="#n2807">2807</a></p>
<p id="n2808" class="pln"><a href="#n2808">2808</a></p>
<p id="n2809" class="pln"><a href="#n2809">2809</a></p>
<p id="n2810" class="pln"><a href="#n2810">2810</a></p>
<p id="n2811" class="pln"><a href="#n2811">2811</a></p>
<p id="n2812" class="pln"><a href="#n2812">2812</a></p>
<p id="n2813" class="stm mis"><a href="#n2813">2813</a></p>
<p id="n2814" class="pln"><a href="#n2814">2814</a></p>
<p id="n2815" class="pln"><a href="#n2815">2815</a></p>
<p id="n2816" class="pln"><a href="#n2816">2816</a></p>
<p id="n2817" class="pln"><a href="#n2817">2817</a></p>
<p id="n2818" class="pln"><a href="#n2818">2818</a></p>
<p id="n2819" class="pln"><a href="#n2819">2819</a></p>
<p id="n2820" class="pln"><a href="#n2820">2820</a></p>
<p id="n2821" class="pln"><a href="#n2821">2821</a></p>
<p id="n2822" class="stm run hide_run"><a href="#n2822">2822</a></p>
<p id="n2823" class="pln"><a href="#n2823">2823</a></p>
<p id="n2824" class="pln"><a href="#n2824">2824</a></p>
<p id="n2825" class="pln"><a href="#n2825">2825</a></p>
<p id="n2826" class="pln"><a href="#n2826">2826</a></p>
<p id="n2827" class="pln"><a href="#n2827">2827</a></p>
<p id="n2828" class="pln"><a href="#n2828">2828</a></p>
<p id="n2829" class="pln"><a href="#n2829">2829</a></p>
<p id="n2830" class="pln"><a href="#n2830">2830</a></p>
<p id="n2831" class="pln"><a href="#n2831">2831</a></p>
<p id="n2832" class="pln"><a href="#n2832">2832</a></p>
<p id="n2833" class="pln"><a href="#n2833">2833</a></p>
<p id="n2834" class="pln"><a href="#n2834">2834</a></p>
<p id="n2835" class="pln"><a href="#n2835">2835</a></p>
<p id="n2836" class="pln"><a href="#n2836">2836</a></p>
<p id="n2837" class="pln"><a href="#n2837">2837</a></p>
<p id="n2838" class="pln"><a href="#n2838">2838</a></p>
<p id="n2839" class="pln"><a href="#n2839">2839</a></p>
<p id="n2840" class="pln"><a href="#n2840">2840</a></p>
<p id="n2841" class="pln"><a href="#n2841">2841</a></p>
<p id="n2842" class="pln"><a href="#n2842">2842</a></p>
<p id="n2843" class="pln"><a href="#n2843">2843</a></p>
<p id="n2844" class="stm run hide_run"><a href="#n2844">2844</a></p>
<p id="n2845" class="pln"><a href="#n2845">2845</a></p>
<p id="n2846" class="stm run hide_run"><a href="#n2846">2846</a></p>
<p id="n2847" class="stm run hide_run"><a href="#n2847">2847</a></p>
<p id="n2848" class="stm run hide_run"><a href="#n2848">2848</a></p>
<p id="n2849" class="pln"><a href="#n2849">2849</a></p>
<p id="n2850" class="stm par run hide_run"><a href="#n2850">2850</a></p>
<p id="n2851" class="stm run hide_run"><a href="#n2851">2851</a></p>
<p id="n2852" class="pln"><a href="#n2852">2852</a></p>
<p id="n2853" class="pln"><a href="#n2853">2853</a></p>
<p id="n2854" class="pln"><a href="#n2854">2854</a></p>
<p id="n2855" class="pln"><a href="#n2855">2855</a></p>
<p id="n2856" class="pln"><a href="#n2856">2856</a></p>
<p id="n2857" class="stm run hide_run"><a href="#n2857">2857</a></p>
<p id="n2858" class="stm run hide_run"><a href="#n2858">2858</a></p>
<p id="n2859" class="stm par run hide_run"><a href="#n2859">2859</a></p>
<p id="n2860" class="stm mis"><a href="#n2860">2860</a></p>
<p id="n2861" class="stm mis"><a href="#n2861">2861</a></p>
<p id="n2862" class="stm mis"><a href="#n2862">2862</a></p>
<p id="n2863" class="pln"><a href="#n2863">2863</a></p>
<p id="n2864" class="stm par run hide_run"><a href="#n2864">2864</a></p>
<p id="n2865" class="stm mis"><a href="#n2865">2865</a></p>
<p id="n2866" class="stm par run hide_run"><a href="#n2866">2866</a></p>
<p id="n2867" class="stm mis"><a href="#n2867">2867</a></p>
<p id="n2868" class="stm mis"><a href="#n2868">2868</a></p>
<p id="n2869" class="stm run hide_run"><a href="#n2869">2869</a></p>
<p id="n2870" class="pln"><a href="#n2870">2870</a></p>
<p id="n2871" class="pln"><a href="#n2871">2871</a></p>
<p id="n2872" class="stm run hide_run"><a href="#n2872">2872</a></p>
<p id="n2873" class="pln"><a href="#n2873">2873</a></p>
<p id="n2874" class="pln"><a href="#n2874">2874</a></p>
<p id="n2875" class="stm run hide_run"><a href="#n2875">2875</a></p>
<p id="n2876" class="stm mis"><a href="#n2876">2876</a></p>
<p id="n2877" class="stm mis"><a href="#n2877">2877</a></p>
<p id="n2878" class="pln"><a href="#n2878">2878</a></p>
<p id="n2879" class="pln"><a href="#n2879">2879</a></p>
<p id="n2880" class="pln"><a href="#n2880">2880</a></p>
<p id="n2881" class="pln"><a href="#n2881">2881</a></p>
<p id="n2882" class="stm mis"><a href="#n2882">2882</a></p>
<p id="n2883" class="stm mis"><a href="#n2883">2883</a></p>
<p id="n2884" class="pln"><a href="#n2884">2884</a></p>
<p id="n2885" class="stm run hide_run"><a href="#n2885">2885</a></p>
<p id="n2886" class="stm mis"><a href="#n2886">2886</a></p>
<p id="n2887" class="pln"><a href="#n2887">2887</a></p>
<p id="n2888" class="stm run hide_run"><a href="#n2888">2888</a></p>
<p id="n2889" class="stm mis"><a href="#n2889">2889</a></p>
<p id="n2890" class="pln"><a href="#n2890">2890</a></p>
<p id="n2891" class="pln"><a href="#n2891">2891</a></p>
<p id="n2892" class="stm run hide_run"><a href="#n2892">2892</a></p>
<p id="n2893" class="pln"><a href="#n2893">2893</a></p>
<p id="n2894" class="pln"><a href="#n2894">2894</a></p>
<p id="n2895" class="pln"><a href="#n2895">2895</a></p>
<p id="n2896" class="pln"><a href="#n2896">2896</a></p>
<p id="n2897" class="pln"><a href="#n2897">2897</a></p>
<p id="n2898" class="pln"><a href="#n2898">2898</a></p>
<p id="n2899" class="pln"><a href="#n2899">2899</a></p>
<p id="n2900" class="pln"><a href="#n2900">2900</a></p>
<p id="n2901" class="pln"><a href="#n2901">2901</a></p>
<p id="n2902" class="pln"><a href="#n2902">2902</a></p>
<p id="n2903" class="pln"><a href="#n2903">2903</a></p>
<p id="n2904" class="pln"><a href="#n2904">2904</a></p>
<p id="n2905" class="pln"><a href="#n2905">2905</a></p>
<p id="n2906" class="pln"><a href="#n2906">2906</a></p>
<p id="n2907" class="pln"><a href="#n2907">2907</a></p>
<p id="n2908" class="pln"><a href="#n2908">2908</a></p>
<p id="n2909" class="pln"><a href="#n2909">2909</a></p>
<p id="n2910" class="pln"><a href="#n2910">2910</a></p>
<p id="n2911" class="pln"><a href="#n2911">2911</a></p>
<p id="n2912" class="pln"><a href="#n2912">2912</a></p>
<p id="n2913" class="pln"><a href="#n2913">2913</a></p>
<p id="n2914" class="pln"><a href="#n2914">2914</a></p>
<p id="n2915" class="stm par run hide_run"><a href="#n2915">2915</a></p>
<p id="n2916" class="stm run hide_run"><a href="#n2916">2916</a></p>
<p id="n2917" class="pln"><a href="#n2917">2917</a></p>
<p id="n2918" class="pln"><a href="#n2918">2918</a></p>
<p id="n2919" class="pln"><a href="#n2919">2919</a></p>
<p id="n2920" class="pln"><a href="#n2920">2920</a></p>
<p id="n2921" class="pln"><a href="#n2921">2921</a></p>
<p id="n2922" class="pln"><a href="#n2922">2922</a></p>
<p id="n2923" class="stm run hide_run"><a href="#n2923">2923</a></p>
<p id="n2924" class="stm run hide_run"><a href="#n2924">2924</a></p>
<p id="n2925" class="stm par run hide_run"><a href="#n2925">2925</a></p>
<p id="n2926" class="stm mis"><a href="#n2926">2926</a></p>
<p id="n2927" class="stm par run hide_run"><a href="#n2927">2927</a></p>
<p id="n2928" class="stm mis"><a href="#n2928">2928</a></p>
<p id="n2929" class="stm run hide_run"><a href="#n2929">2929</a></p>
<p id="n2930" class="stm run hide_run"><a href="#n2930">2930</a></p>
<p id="n2931" class="stm run hide_run"><a href="#n2931">2931</a></p>
<p id="n2932" class="stm run hide_run"><a href="#n2932">2932</a></p>
<p id="n2933" class="stm run hide_run"><a href="#n2933">2933</a></p>

            </td>
            <td class="text">
<p id="t1" class="pln"><span class="str">r"""Models basic types of utility functions.</span><span class="strut">&nbsp;</span></p>
<p id="t2" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t3" class="pln"><span class="str">Utility functions are at the core of negotiation. Agents engage in negotiations with the goal of maximizing some utility</span><span class="strut">&nbsp;</span></p>
<p id="t4" class="pln"><span class="str">function. In most cases, these utility functions are assumed to be known a-periori and static for the duration of a</span><span class="strut">&nbsp;</span></p>
<p id="t5" class="pln"><span class="str">single negotiations.</span><span class="strut">&nbsp;</span></p>
<p id="t6" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t7" class="pln"><span class="str">Notes:</span><span class="strut">&nbsp;</span></p>
<p id="t8" class="pln"><span class="str">    We try to allow for applications that do not necessary have these two assumptions in the following ways:</span><span class="strut">&nbsp;</span></p>
<p id="t9" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t10" class="pln"><span class="str">    * A utility_function *value* (\ `UtilityValue`\ ) can always represent represent a utility_function distribution over all</span><span class="strut">&nbsp;</span></p>
<p id="t11" class="pln"><span class="str">      possible utility_function values (\ `UtilityDistribution`\ ) or a `KnownUtilityValue` which is a real number.</span><span class="strut">&nbsp;</span></p>
<p id="t12" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t13" class="pln"><span class="str">    * The base class of all utility_function *functions* is</span><span class="strut">&nbsp;</span></p>
<p id="t14" class="pln"><span class="str">      `UtilityFunction` and is assumed to map outcomes (\ `Outcome` objects) to the aforementioned generic utility *values*</span><span class="strut">&nbsp;</span></p>
<p id="t15" class="pln"><span class="str">      (\ `UtilityValue` objects).</span><span class="strut">&nbsp;</span></p>
<p id="t16" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t17" class="pln"><span class="str">    * Utility functions can be constructed using any `Callable` which makes it possible to construct them so that</span><span class="strut">&nbsp;</span></p>
<p id="t18" class="pln"><span class="str">      they change depending on the context or the progression of the negotiation.</span><span class="strut">&nbsp;</span></p>
<p id="t19" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t20" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t21" class="pln"><span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t22" class="stm run hide_run"><span class="key">import</span> <span class="nam">itertools</span><span class="strut">&nbsp;</span></p>
<p id="t23" class="stm run hide_run"><span class="key">import</span> <span class="nam">pprint</span><span class="strut">&nbsp;</span></p>
<p id="t24" class="stm run hide_run"><span class="key">import</span> <span class="nam">random</span><span class="strut">&nbsp;</span></p>
<p id="t25" class="stm run hide_run"><span class="key">import</span> <span class="nam">xml</span><span class="op">.</span><span class="nam">etree</span><span class="op">.</span><span class="nam">ElementTree</span> <span class="key">as</span> <span class="nam">ET</span><span class="strut">&nbsp;</span></p>
<p id="t26" class="stm run hide_run"><span class="key">from</span> <span class="nam">abc</span> <span class="key">import</span> <span class="nam">ABC</span><span class="op">,</span> <span class="nam">abstractmethod</span><span class="strut">&nbsp;</span></p>
<p id="t27" class="stm run hide_run"><span class="key">from</span> <span class="nam">functools</span> <span class="key">import</span> <span class="nam">reduce</span><span class="strut">&nbsp;</span></p>
<p id="t28" class="stm run hide_run"><span class="key">from</span> <span class="nam">operator</span> <span class="key">import</span> <span class="nam">mul</span><span class="strut">&nbsp;</span></p>
<p id="t29" class="stm run hide_run"><span class="key">from</span> <span class="nam">typing</span> <span class="key">import</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t30" class="pln">    <span class="nam">MutableMapping</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t31" class="pln">    <span class="nam">Mapping</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t32" class="pln">    <span class="nam">Union</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t33" class="pln">    <span class="nam">Optional</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t34" class="pln">    <span class="nam">Any</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t35" class="pln">    <span class="nam">Sequence</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t36" class="pln">    <span class="nam">Callable</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t37" class="pln">    <span class="nam">Dict</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t38" class="pln">    <span class="nam">List</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t39" class="pln">    <span class="nam">Iterable</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t40" class="pln">    <span class="nam">Tuple</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t41" class="pln">    <span class="nam">Collection</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t42" class="pln">    <span class="nam">Type</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t43" class="pln"><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t44" class="stm run hide_run"><span class="key">from</span> <span class="nam">typing</span> <span class="key">import</span> <span class="nam">TYPE_CHECKING</span><span class="strut">&nbsp;</span></p>
<p id="t45" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t46" class="stm run hide_run"><span class="key">import</span> <span class="nam">numpy</span> <span class="key">as</span> <span class="nam">np</span><span class="strut">&nbsp;</span></p>
<p id="t47" class="stm run hide_run"><span class="key">import</span> <span class="nam">pkg_resources</span><span class="strut">&nbsp;</span></p>
<p id="t48" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t49" class="stm run hide_run"><span class="key">from</span> <span class="nam">negmas</span><span class="op">.</span><span class="nam">common</span> <span class="key">import</span> <span class="nam">NamedObject</span><span class="strut">&nbsp;</span></p>
<p id="t50" class="stm run hide_run"><span class="key">from</span> <span class="nam">negmas</span><span class="op">.</span><span class="nam">common</span> <span class="key">import</span> <span class="nam">AgentMechanismInterface</span><span class="strut">&nbsp;</span></p>
<p id="t51" class="stm run hide_run"><span class="key">from</span> <span class="nam">negmas</span><span class="op">.</span><span class="nam">generics</span> <span class="key">import</span> <span class="nam">GenericMapping</span><span class="op">,</span> <span class="nam">ienumerate</span><span class="op">,</span> <span class="nam">iget</span><span class="op">,</span> <span class="nam">ivalues</span><span class="strut">&nbsp;</span></p>
<p id="t52" class="stm run hide_run"><span class="key">from</span> <span class="nam">negmas</span><span class="op">.</span><span class="nam">helpers</span> <span class="key">import</span> <span class="nam">Distribution</span><span class="strut">&nbsp;</span></p>
<p id="t53" class="stm run hide_run"><span class="key">from</span> <span class="nam">negmas</span><span class="op">.</span><span class="nam">helpers</span> <span class="key">import</span> <span class="nam">snake_case</span><span class="op">,</span> <span class="nam">gmap</span><span class="op">,</span> <span class="nam">ikeys</span><span class="op">,</span> <span class="nam">Floats</span><span class="strut">&nbsp;</span></p>
<p id="t54" class="stm run hide_run"><span class="key">from</span> <span class="nam">negmas</span><span class="op">.</span><span class="nam">java</span> <span class="key">import</span> <span class="nam">JavaCallerMixin</span><span class="op">,</span> <span class="nam">to_java</span><span class="strut">&nbsp;</span></p>
<p id="t55" class="stm run hide_run"><span class="key">from</span> <span class="nam">negmas</span><span class="op">.</span><span class="nam">outcomes</span> <span class="key">import</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t56" class="pln">    <span class="nam">sample_outcomes</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t57" class="pln">    <span class="nam">OutcomeRange</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t58" class="pln">    <span class="nam">Outcome</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t59" class="pln">    <span class="nam">outcome_in_range</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t60" class="pln">    <span class="nam">Issue</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t61" class="pln">    <span class="nam">outcome_is_valid</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t62" class="pln">    <span class="nam">OutcomeType</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t63" class="pln">    <span class="nam">outcome_as_dict</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t64" class="pln">    <span class="nam">outcome_as_tuple</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t65" class="pln"><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t66" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t67" class="stm par run hide_run"><span class="annotate short">67&#x202F;&#x219B;&#x202F;68</span><span class="annotate long">line 67 didn't jump to line 68, because the condition on line 67 was never true</span><span class="key">if</span> <span class="nam">TYPE_CHECKING</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t68" class="stm mis">    <span class="key">from</span> <span class="nam">negmas</span><span class="op">.</span><span class="nam">outcomes</span> <span class="key">import</span> <span class="nam">OutcomeRange</span><span class="op">,</span> <span class="nam">Outcome</span><span class="strut">&nbsp;</span></p>
<p id="t69" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t70" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t71" class="stm run hide_run"><span class="nam">__all__</span> <span class="op">=</span> <span class="op">[</span><span class="strut">&nbsp;</span></p>
<p id="t72" class="pln">    <span class="str">"UtilityDistribution"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t73" class="pln">    <span class="str">"UtilityValue"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t74" class="pln">    <span class="str">"UtilityFunction"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t75" class="pln">    <span class="str">"ConstUFun"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t76" class="pln">    <span class="str">"LinDiscountedUFun"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t77" class="pln">    <span class="str">"ExpDiscountedUFun"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t78" class="pln">    <span class="str">"MappingUtilityFunction"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t79" class="pln">    <span class="str">"LinearUtilityAggregationFunction"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t80" class="pln">    <span class="str">"NonLinearUtilityAggregationFunction"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t81" class="pln">    <span class="str">"HyperRectangleUtilityFunction"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t82" class="pln">    <span class="str">"NonlinearHyperRectangleUtilityFunction"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t83" class="pln">    <span class="str">"ComplexWeightedUtilityFunction"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t84" class="pln">    <span class="str">"ComplexNonlinearUtilityFunction"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t85" class="pln">    <span class="str">"LinearUtilityFunction"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t86" class="pln">    <span class="str">"IPUtilityFunction"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t87" class="pln">    <span class="str">"pareto_frontier"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t88" class="pln">    <span class="str">"make_discounted_ufun"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t89" class="pln">    <span class="str">"normalize"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t90" class="pln">    <span class="str">"JavaUtilityFunction"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t91" class="pln">    <span class="str">"RandomUtilityFunction"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t92" class="pln">    <span class="str">"INVALID_UTILITY"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t93" class="pln">    <span class="str">"outcome_with_utility"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t94" class="pln">    <span class="str">"utility_range"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t95" class="pln"><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t96" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t97" class="stm run hide_run"><span class="nam">INVALID_UTILITY</span> <span class="op">=</span> <span class="nam">float</span><span class="op">(</span><span class="str">"-inf"</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t98" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t99" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t100" class="pln"><span class="com"># Helper Types just used to make type hinting more readable</span><span class="strut">&nbsp;</span></p>
<p id="t101" class="stm run hide_run"><span class="nam">OutcomeUtilityMapping</span> <span class="op">=</span> <span class="nam">Union</span><span class="op">[</span><span class="strut">&nbsp;</span></p>
<p id="t102" class="pln">    <span class="nam">Callable</span><span class="op">[</span><span class="op">[</span><span class="nam">Union</span><span class="op">[</span><span class="str">"Outcome"</span><span class="op">,</span> <span class="nam">int</span><span class="op">,</span> <span class="nam">str</span><span class="op">,</span> <span class="nam">float</span><span class="op">]</span><span class="op">]</span><span class="op">,</span> <span class="str">"UtilityValue"</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t103" class="pln">    <span class="nam">Mapping</span><span class="op">[</span><span class="nam">Union</span><span class="op">[</span><span class="nam">Sequence</span><span class="op">,</span> <span class="nam">Mapping</span><span class="op">,</span> <span class="nam">int</span><span class="op">,</span> <span class="nam">str</span><span class="op">,</span> <span class="nam">float</span><span class="op">]</span><span class="op">,</span> <span class="str">"UtilityValue"</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t104" class="pln"><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t105" class="stm run hide_run"><span class="nam">OutcomeUtilityMappings</span> <span class="op">=</span> <span class="nam">List</span><span class="op">[</span><span class="nam">OutcomeUtilityMapping</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t106" class="pln"><span class="str">"""Maps from multi-issue or single-issue outcomes to Negotiator values."""</span><span class="strut">&nbsp;</span></p>
<p id="t107" class="stm run hide_run"><span class="nam">IssueUtilityFunctionMapping</span> <span class="op">=</span> <span class="nam">Union</span><span class="op">[</span>  <span class="com"># type: ignore</span><span class="strut">&nbsp;</span></p>
<p id="t108" class="pln">    <span class="nam">Callable</span><span class="op">[</span><span class="op">[</span><span class="str">"Issue"</span><span class="op">]</span><span class="op">,</span> <span class="str">"UtilityFunction"</span><span class="op">]</span><span class="op">,</span>  <span class="com"># type: ignore</span><span class="strut">&nbsp;</span></p>
<p id="t109" class="pln">    <span class="nam">Mapping</span><span class="op">[</span><span class="str">"Issue"</span><span class="op">,</span> <span class="str">"UtilityFunction"</span><span class="op">]</span><span class="op">,</span>  <span class="com"># type: ignore</span><span class="strut">&nbsp;</span></p>
<p id="t110" class="pln"><span class="op">]</span>  <span class="com"># type: ignore</span><span class="strut">&nbsp;</span></p>
<p id="t111" class="stm run hide_run"><span class="nam">IssueUtilityFunctionMappings</span> <span class="op">=</span> <span class="nam">List</span><span class="op">[</span><span class="nam">IssueUtilityFunctionMapping</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t112" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t113" class="stm run hide_run"><span class="nam">UtilityDistribution</span> <span class="op">=</span> <span class="nam">Distribution</span><span class="strut">&nbsp;</span></p>
<p id="t114" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t115" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t116" class="stm run hide_run"><span class="key">class</span> <span class="nam">ExactUtilityValue</span><span class="op">(</span><span class="nam">float</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t117" class="pln">    <span class="str">"""Encapsulates a single offerable_outcomes utility_function value."""</span><span class="strut">&nbsp;</span></p>
<p id="t118" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t119" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t120" class="stm run hide_run"><span class="nam">UtilityValue</span> <span class="op">=</span> <span class="nam">Union</span><span class="op">[</span><span class="nam">UtilityDistribution</span><span class="op">,</span> <span class="nam">float</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t121" class="pln"><span class="str">"""Either a utility_function distribution or an exact offerable_outcomes utility_function value.</span><span class="strut">&nbsp;</span></p>
<p id="t122" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t123" class="pln"><span class="str">`UtilityFunction`s always return a `UtilityValue` which makes it easier to implement algorithms relying  on </span><span class="strut">&nbsp;</span></p>
<p id="t124" class="pln"><span class="str">probabilistic modeling of utility_function values."""</span><span class="strut">&nbsp;</span></p>
<p id="t125" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t126" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t127" class="stm run hide_run"><span class="key">class</span> <span class="nam">UtilityFunction</span><span class="op">(</span><span class="nam">ABC</span><span class="op">,</span> <span class="nam">NamedObject</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t128" class="pln">    <span class="str">"""The abstract base class for all utility functions.</span><span class="strut">&nbsp;</span></p>
<p id="t129" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t130" class="pln"><span class="str">    A utility function encapsulates a mapping from outcomes to UtilityValue(s). This is a generalization of standard</span><span class="strut">&nbsp;</span></p>
<p id="t131" class="pln"><span class="str">    utility functions that are expected to always return a real-value. This generalization is useful for modeling cases</span><span class="strut">&nbsp;</span></p>
<p id="t132" class="pln"><span class="str">    in which only partial knowledge of the utility function is available.</span><span class="strut">&nbsp;</span></p>
<p id="t133" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t134" class="pln"><span class="str">    Args:</span><span class="strut">&nbsp;</span></p>
<p id="t135" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t136" class="pln"><span class="str">        name (str): Name of the utility function. If None, a random name will be given.</span><span class="strut">&nbsp;</span></p>
<p id="t137" class="pln"><span class="str">        reserved_value(float): The value to return if the input offer to `apply` is None</span><span class="strut">&nbsp;</span></p>
<p id="t138" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t139" class="pln"><span class="str">    """</span><span class="strut">&nbsp;</span></p>
<p id="t140" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t141" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t142" class="pln">        <span class="nam">self</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t143" class="pln">        <span class="nam">name</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">str</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t144" class="pln">        <span class="nam">ami</span><span class="op">:</span> <span class="nam">AgentMechanismInterface</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t145" class="pln">        <span class="nam">reserved_value</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">UtilityValue</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t146" class="pln">    <span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t147" class="stm run hide_run">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">__init__</span><span class="op">(</span><span class="nam">name</span><span class="op">=</span><span class="nam">name</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t148" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">reserved_value</span> <span class="op">=</span> <span class="nam">reserved_value</span><span class="strut">&nbsp;</span></p>
<p id="t149" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">ami</span> <span class="op">=</span> <span class="nam">ami</span><span class="strut">&nbsp;</span></p>
<p id="t150" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t151" class="stm run hide_run">    <span class="op">@</span><span class="nam">property</span><span class="strut">&nbsp;</span></p>
<p id="t152" class="pln">    <span class="key">def</span> <span class="nam">is_dynamic</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t153" class="pln">        <span class="str">"""Whether the utility function can potentially depend on negotiation state (mechanism information).</span><span class="strut">&nbsp;</span></p>
<p id="t154" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t155" class="pln"><span class="str">        - If this property is `False`,  the ufun can safely be assumed to be static (not dependent on negotiation</span><span class="strut">&nbsp;</span></p>
<p id="t156" class="pln"><span class="str">          state).</span><span class="strut">&nbsp;</span></p>
<p id="t157" class="pln"><span class="str">        - If this property is `True`, the ufun may depend on negotiation state but it may also not depend on it.</span><span class="strut">&nbsp;</span></p>
<p id="t158" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t159" class="stm mis">        <span class="key">return</span> <span class="nam">self</span><span class="op">.</span><span class="nam">ami</span> <span class="key">is</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t160" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t161" class="stm run hide_run">    <span class="op">@</span><span class="nam">classmethod</span><span class="strut">&nbsp;</span></p>
<p id="t162" class="stm run hide_run">    <span class="key">def</span> <span class="nam">from_genius</span><span class="op">(</span><span class="nam">cls</span><span class="op">,</span> <span class="nam">file_name</span><span class="op">:</span> <span class="nam">str</span><span class="op">,</span> <span class="op">**</span><span class="nam">kwargs</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t163" class="pln">        <span class="str">"""Imports a utility function from a GENIUS XML file.</span><span class="strut">&nbsp;</span></p>
<p id="t164" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t165" class="pln"><span class="str">        Args:</span><span class="strut">&nbsp;</span></p>
<p id="t166" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t167" class="pln"><span class="str">            file_name (str): File name to import from</span><span class="strut">&nbsp;</span></p>
<p id="t168" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t169" class="pln"><span class="str">        Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t170" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t171" class="pln"><span class="str">            A utility function object (depending on the input file)</span><span class="strut">&nbsp;</span></p>
<p id="t172" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t173" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t174" class="pln"><span class="str">        Examples:</span><span class="strut">&nbsp;</span></p>
<p id="t175" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t176" class="pln"><span class="str">            >>> from negmas import UtilityFunction</span><span class="strut">&nbsp;</span></p>
<p id="t177" class="pln"><span class="str">            >>> u, d = UtilityFunction.from_genius(file_name = pkg_resources.resource_filename('negmas'</span><span class="strut">&nbsp;</span></p>
<p id="t178" class="pln"><span class="str">            ...                                      , resource_name='tests/data/Laptop/Laptop-C-prof1.xml'))</span><span class="strut">&nbsp;</span></p>
<p id="t179" class="pln"><span class="str">            >>> u.__class__.__name__</span><span class="strut">&nbsp;</span></p>
<p id="t180" class="pln"><span class="str">            'LinearUtilityAggregationFunction'</span><span class="strut">&nbsp;</span></p>
<p id="t181" class="pln"><span class="str">            >>> u.reserved_value</span><span class="strut">&nbsp;</span></p>
<p id="t182" class="pln"><span class="str">            0.0</span><span class="strut">&nbsp;</span></p>
<p id="t183" class="pln"><span class="str">            >>> d</span><span class="strut">&nbsp;</span></p>
<p id="t184" class="pln"><span class="str">            1.0</span><span class="strut">&nbsp;</span></p>
<p id="t185" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t186" class="pln"><span class="str">        Remarks:</span><span class="strut">&nbsp;</span></p>
<p id="t187" class="pln"><span class="str">            See ``from_xml_str`` for all the parameters</span><span class="strut">&nbsp;</span></p>
<p id="t188" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t189" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t190" class="stm run hide_run">        <span class="key">with</span> <span class="nam">open</span><span class="op">(</span><span class="nam">file_name</span><span class="op">,</span> <span class="str">"r"</span><span class="op">)</span> <span class="key">as</span> <span class="nam">f</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t191" class="stm run hide_run">            <span class="nam">xml_str</span> <span class="op">=</span> <span class="nam">f</span><span class="op">.</span><span class="nam">read</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t192" class="stm run hide_run">            <span class="key">return</span> <span class="nam">cls</span><span class="op">.</span><span class="nam">from_xml_str</span><span class="op">(</span><span class="nam">xml_str</span><span class="op">=</span><span class="nam">xml_str</span><span class="op">,</span> <span class="op">**</span><span class="nam">kwargs</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t193" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t194" class="stm run hide_run">    <span class="op">@</span><span class="nam">classmethod</span><span class="strut">&nbsp;</span></p>
<p id="t195" class="stm run hide_run">    <span class="key">def</span> <span class="nam">to_genius</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t196" class="pln">        <span class="nam">cls</span><span class="op">,</span> <span class="nam">u</span><span class="op">:</span> <span class="str">"UtilityFunction"</span><span class="op">,</span> <span class="nam">issues</span><span class="op">:</span> <span class="nam">List</span><span class="op">[</span><span class="nam">Issue</span><span class="op">]</span><span class="op">,</span> <span class="nam">file_name</span><span class="op">:</span> <span class="nam">str</span><span class="op">,</span> <span class="op">**</span><span class="nam">kwargs</span><span class="strut">&nbsp;</span></p>
<p id="t197" class="pln">    <span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t198" class="pln">        <span class="str">"""Exports a utility function to a GENIUS XML file.</span><span class="strut">&nbsp;</span></p>
<p id="t199" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t200" class="pln"><span class="str">        Args:</span><span class="strut">&nbsp;</span></p>
<p id="t201" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t202" class="pln"><span class="str">            file_name (str): File name to export to</span><span class="strut">&nbsp;</span></p>
<p id="t203" class="pln"><span class="str">            u: utility function</span><span class="strut">&nbsp;</span></p>
<p id="t204" class="pln"><span class="str">            issues: The issues being considered as defined in the domain</span><span class="strut">&nbsp;</span></p>
<p id="t205" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t206" class="pln"><span class="str">        Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t207" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t208" class="pln"><span class="str">            None</span><span class="strut">&nbsp;</span></p>
<p id="t209" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t210" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t211" class="pln"><span class="str">        Examples:</span><span class="strut">&nbsp;</span></p>
<p id="t212" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t213" class="pln"><span class="str">            >>> from negmas import UtilityFunction</span><span class="strut">&nbsp;</span></p>
<p id="t214" class="pln"><span class="str">            >>> from negmas import load_genius_domain</span><span class="strut">&nbsp;</span></p>
<p id="t215" class="pln"><span class="str">            >>> _, _, issues = load_genius_domain(domain_file_name=pkg_resources.resource_filename('negmas'</span><span class="strut">&nbsp;</span></p>
<p id="t216" class="pln"><span class="str">            ...                                             , resource_name='tests/data/Laptop/Laptop-C-domain.xml')</span><span class="strut">&nbsp;</span></p>
<p id="t217" class="pln"><span class="str">            ...             , keep_issue_names=False)</span><span class="strut">&nbsp;</span></p>
<p id="t218" class="pln"><span class="str">            >>> u, discount = UtilityFunction.from_genius(file_name=pkg_resources.resource_filename('negmas'</span><span class="strut">&nbsp;</span></p>
<p id="t219" class="pln"><span class="str">            ...                                             , resource_name='tests/data/Laptop/Laptop-C-prof1.xml')</span><span class="strut">&nbsp;</span></p>
<p id="t220" class="pln"><span class="str">            ...             , keep_issue_names=False)</span><span class="strut">&nbsp;</span></p>
<p id="t221" class="pln"><span class="str">            >>> UtilityFunction.to_genius(u=u, issues=issues, discount_factor=discount</span><span class="strut">&nbsp;</span></p>
<p id="t222" class="pln"><span class="str">            ...     , file_name = pkg_resources.resource_filename('negmas'</span><span class="strut">&nbsp;</span></p>
<p id="t223" class="pln"><span class="str">            ...                                             , resource_name='tests/data/LaptopConv/Laptop-C-prof1.xml'))</span><span class="strut">&nbsp;</span></p>
<p id="t224" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t225" class="pln"><span class="str">        Remarks:</span><span class="strut">&nbsp;</span></p>
<p id="t226" class="pln"><span class="str">            See ``to_xml_str`` for all the parameters</span><span class="strut">&nbsp;</span></p>
<p id="t227" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t228" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t229" class="stm run hide_run">        <span class="key">with</span> <span class="nam">open</span><span class="op">(</span><span class="nam">file_name</span><span class="op">,</span> <span class="str">"w"</span><span class="op">)</span> <span class="key">as</span> <span class="nam">f</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t230" class="stm run hide_run">            <span class="nam">f</span><span class="op">.</span><span class="nam">write</span><span class="op">(</span><span class="nam">cls</span><span class="op">.</span><span class="nam">to_xml_str</span><span class="op">(</span><span class="nam">u</span><span class="op">=</span><span class="nam">u</span><span class="op">,</span> <span class="nam">issues</span><span class="op">=</span><span class="nam">issues</span><span class="op">,</span> <span class="op">**</span><span class="nam">kwargs</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t231" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t232" class="stm run hide_run">    <span class="op">@</span><span class="nam">classmethod</span><span class="strut">&nbsp;</span></p>
<p id="t233" class="stm run hide_run">    <span class="key">def</span> <span class="nam">to_xml_str</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t234" class="pln">        <span class="nam">cls</span><span class="op">,</span> <span class="nam">u</span><span class="op">:</span> <span class="str">"UtilityFunction"</span><span class="op">,</span> <span class="nam">issues</span><span class="op">:</span> <span class="nam">List</span><span class="op">[</span><span class="nam">Issue</span><span class="op">]</span><span class="op">,</span> <span class="nam">discount_factor</span><span class="op">=</span><span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t235" class="pln">    <span class="op">)</span> <span class="op">-></span> <span class="nam">str</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t236" class="pln">        <span class="str">"""Exports a utility function to a well formatted string</span><span class="strut">&nbsp;</span></p>
<p id="t237" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t238" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t239" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t240" class="stm par run hide_run"><span class="annotate short">240&#x202F;&#x219B;&#x202F;243</span><span class="annotate long">line 240 didn't jump to line 243, because the condition on line 240 was never false</span>        <span class="key">if</span> <span class="nam">issues</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t241" class="stm run hide_run">            <span class="nam">n_issues</span> <span class="op">=</span> <span class="nam">len</span><span class="op">(</span><span class="nam">issues</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t242" class="pln">        <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t243" class="stm mis">            <span class="nam">n_issues</span> <span class="op">=</span> <span class="num">0</span><span class="strut">&nbsp;</span></p>
<p id="t244" class="stm run hide_run">        <span class="nam">output</span> <span class="op">=</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t245" class="pln">            <span class="str">f'&lt;utility_space type="any" number_of_issues="{n_issues}">\n'</span><span class="strut">&nbsp;</span></p>
<p id="t246" class="pln">            <span class="str">f'&lt;objective index="1" etype="objective" type="objective" description="" name="any">\n'</span><span class="strut">&nbsp;</span></p>
<p id="t247" class="pln">        <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t248" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t249" class="stm run hide_run">        <span class="nam">output</span> <span class="op">+=</span> <span class="nam">u</span><span class="op">.</span><span class="nam">xml</span><span class="op">(</span><span class="nam">issues</span><span class="op">=</span><span class="nam">issues</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t250" class="stm par run hide_run"><span class="annotate short">250&#x202F;&#x219B;&#x202F;254</span><span class="annotate long">line 250 didn't jump to line 254, because the condition on line 250 was never false</span>        <span class="key">if</span> <span class="str">"&lt;/objective>"</span> <span class="key">not</span> <span class="key">in</span> <span class="nam">output</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t251" class="stm run hide_run">            <span class="nam">output</span> <span class="op">+=</span> <span class="str">"&lt;/objective>\n"</span><span class="strut">&nbsp;</span></p>
<p id="t252" class="stm par run hide_run"><span class="annotate short">252&#x202F;&#x219B;&#x202F;254</span><span class="annotate long">line 252 didn't jump to line 254, because the condition on line 252 was never false</span>            <span class="key">if</span> <span class="nam">discount_factor</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t253" class="stm run hide_run">                <span class="nam">output</span> <span class="op">+=</span> <span class="str">f'&lt;discount_factor value="{discount_factor}" />\n'</span><span class="strut">&nbsp;</span></p>
<p id="t254" class="stm par run hide_run"><span class="annotate short">254&#x202F;&#x219B;&#x202F;256</span><span class="annotate long">line 254 didn't jump to line 256, because the condition on line 254 was never false</span>        <span class="key">if</span> <span class="nam">u</span><span class="op">.</span><span class="nam">reserved_value</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span> <span class="key">and</span> <span class="str">"&lt;reservation value"</span> <span class="key">not</span> <span class="key">in</span> <span class="nam">output</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t255" class="stm run hide_run">            <span class="nam">output</span> <span class="op">+=</span> <span class="str">f'&lt;reservation value="{u.reserved_value}" />\n'</span><span class="strut">&nbsp;</span></p>
<p id="t256" class="stm par run hide_run"><span class="annotate short">256&#x202F;&#x219B;&#x202F;258</span><span class="annotate long">line 256 didn't jump to line 258, because the condition on line 256 was never false</span>        <span class="key">if</span> <span class="str">"&lt;/utility_space>"</span> <span class="key">not</span> <span class="key">in</span> <span class="nam">output</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t257" class="stm run hide_run">            <span class="nam">output</span> <span class="op">+=</span> <span class="str">"&lt;/utility_space>\n"</span><span class="strut">&nbsp;</span></p>
<p id="t258" class="stm run hide_run">        <span class="key">return</span> <span class="nam">output</span><span class="strut">&nbsp;</span></p>
<p id="t259" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t260" class="stm run hide_run">    <span class="op">@</span><span class="nam">classmethod</span><span class="strut">&nbsp;</span></p>
<p id="t261" class="stm run hide_run">    <span class="key">def</span> <span class="nam">from_xml_str</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t262" class="pln">        <span class="nam">cls</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t263" class="pln">        <span class="nam">xml_str</span><span class="op">:</span> <span class="nam">str</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t264" class="pln">        <span class="nam">domain_issues</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">List</span><span class="op">[</span><span class="nam">Issue</span><span class="op">]</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t265" class="pln">        <span class="nam">force_single_issue</span><span class="op">=</span><span class="key">False</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t266" class="pln">        <span class="nam">force_numeric</span><span class="op">=</span><span class="key">False</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t267" class="pln">        <span class="nam">keep_issue_names</span><span class="op">=</span><span class="key">True</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t268" class="pln">        <span class="nam">keep_value_names</span><span class="op">=</span><span class="key">True</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t269" class="pln">        <span class="nam">safe_parsing</span><span class="op">=</span><span class="key">True</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t270" class="pln">        <span class="nam">normalize_utility</span><span class="op">=</span><span class="key">True</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t271" class="pln">        <span class="nam">max_n_outcomes</span><span class="op">:</span> <span class="nam">int</span> <span class="op">=</span> <span class="num">1e6</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t272" class="pln">        <span class="nam">ignore_discount</span><span class="op">=</span><span class="key">False</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t273" class="pln">        <span class="nam">ignore_reserved</span><span class="op">=</span><span class="key">False</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t274" class="pln">    <span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t275" class="pln">        <span class="str">"""Imports a utility function from a GENIUS XML string.</span><span class="strut">&nbsp;</span></p>
<p id="t276" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t277" class="pln"><span class="str">                Args:</span><span class="strut">&nbsp;</span></p>
<p id="t278" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t279" class="pln"><span class="str">                    xml_str (str): The string containing GENIUS style XML utility function definition</span><span class="strut">&nbsp;</span></p>
<p id="t280" class="pln"><span class="str">                    domain_issues (List[Issue]): Optional issue space to confirm that the utility function is valid</span><span class="strut">&nbsp;</span></p>
<p id="t281" class="pln"><span class="str">                    force_single_issue (bool): Tries to generate a MappingUtility function with a single issue which is the</span><span class="strut">&nbsp;</span></p>
<p id="t282" class="pln"><span class="str">                    product of all issues in the input</span><span class="strut">&nbsp;</span></p>
<p id="t283" class="pln"><span class="str">                    keep_issue_names (bool): Keep names of issues</span><span class="strut">&nbsp;</span></p>
<p id="t284" class="pln"><span class="str">                    keep_value_names (bool): Keep names of values</span><span class="strut">&nbsp;</span></p>
<p id="t285" class="pln"><span class="str">                    safe_parsing (bool): Turn on extra checks</span><span class="strut">&nbsp;</span></p>
<p id="t286" class="pln"><span class="str">                    normalize_utility (bool): Normalize the output utilities to the range from 0 to 1</span><span class="strut">&nbsp;</span></p>
<p id="t287" class="pln"><span class="str">                    max_n_outcomes (int): Maximum number of outcomes allowed (effective only if force_single_issue is True)</span><span class="strut">&nbsp;</span></p>
<p id="t288" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t289" class="pln"><span class="str">                Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t290" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t291" class="pln"><span class="str">                    A utility function object (depending on the input file)</span><span class="strut">&nbsp;</span></p>
<p id="t292" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t293" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t294" class="pln"><span class="str">                Examples:</span><span class="strut">&nbsp;</span></p>
<p id="t295" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t296" class="pln"><span class="str">                    >>> u, _ = UtilityFunction.from_xml_str(open(pkg_resources.resource_filename('negmas'</span><span class="strut">&nbsp;</span></p>
<p id="t297" class="pln"><span class="str">                    ...                                      , resource_name='tests/data/Laptop/Laptop-C-prof1.xml')</span><span class="strut">&nbsp;</span></p>
<p id="t298" class="pln"><span class="str">                    ...                                      , 'r').read(), force_single_issue=False</span><span class="strut">&nbsp;</span></p>
<p id="t299" class="pln"><span class="str">                    ... , normalize_utility=True, keep_issue_names=False, keep_value_names=True)</span><span class="strut">&nbsp;</span></p>
<p id="t300" class="pln"><span class="str">                    >>> assert abs(u(('Dell', '60 Gb', "19'' LCD")) - 0.599329436957658) &lt; 0.1</span><span class="strut">&nbsp;</span></p>
<p id="t301" class="pln"><span class="str">                    >>> assert abs(u(('HP', '80 Gb', "20'' LCD")) - 0.6342209804130308) &lt; 0.01</span><span class="strut">&nbsp;</span></p>
<p id="t302" class="pln"><span class="str">                    >>> assert abs(u(('HP', '60 Gb', "19'' LCD")) - 1.0) &lt; 0.0001</span><span class="strut">&nbsp;</span></p>
<p id="t303" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t304" class="pln"><span class="str">                    >>> u, _ = UtilityFunction.from_xml_str(open(pkg_resources.resource_filename('negmas'</span><span class="strut">&nbsp;</span></p>
<p id="t305" class="pln"><span class="str">                    ...                                      , resource_name='tests/data/Laptop/Laptop-C-prof1.xml')</span><span class="strut">&nbsp;</span></p>
<p id="t306" class="pln"><span class="str">                    ...                                      , 'r').read()</span><span class="strut">&nbsp;</span></p>
<p id="t307" class="pln"><span class="str">                    ...                                      , force_single_issue=True, normalize_utility=False)</span><span class="strut">&nbsp;</span></p>
<p id="t308" class="pln"><span class="str">                    >>> assert abs(u(("Dell+60 Gb+19'' LCD",)) - 21.987727736172488) &lt; 0.000001</span><span class="strut">&nbsp;</span></p>
<p id="t309" class="pln"><span class="str">                    >>> assert abs(u(("HP+80 Gb+20'' LCD",)) - 22.68559475583014) &lt; 0.000001</span><span class="strut">&nbsp;</span></p>
<p id="t310" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t311" class="pln"><span class="str">                    >>> u, _ = UtilityFunction.from_xml_str(open(pkg_resources.resource_filename('negmas'</span><span class="strut">&nbsp;</span></p>
<p id="t312" class="pln"><span class="str">                    ...                                      , resource_name='tests/data/Laptop/Laptop-C-prof1.xml')</span><span class="strut">&nbsp;</span></p>
<p id="t313" class="pln"><span class="str">                    ...                                      , 'r').read(), force_single_issue=True</span><span class="strut">&nbsp;</span></p>
<p id="t314" class="pln"><span class="str">                    ... , keep_issue_names=False, keep_value_names=False, normalize_utility=False)</span><span class="strut">&nbsp;</span></p>
<p id="t315" class="pln"><span class="str">                    >>> assert abs(u((0,)) - 21.987727736172488) &lt; 0.000001</span><span class="strut">&nbsp;</span></p>
<p id="t316" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t317" class="pln"><span class="str">                    >>> u, _ = UtilityFunction.from_xml_str(open(pkg_resources.resource_filename('negmas'</span><span class="strut">&nbsp;</span></p>
<p id="t318" class="pln"><span class="str">                    ...                                      , resource_name='tests/data/Laptop/Laptop-C-prof1.xml')</span><span class="strut">&nbsp;</span></p>
<p id="t319" class="pln"><span class="str">                    ...                 , 'r').read(), force_single_issue=False, normalize_utility=False)</span><span class="strut">&nbsp;</span></p>
<p id="t320" class="pln"><span class="str">                    >>> assert abs(u({'Laptop': 'Dell', 'Harddisk': '60 Gb', 'External Monitor': "19'' LCD"}) - 21.987727736172488) &lt; 0.000001</span><span class="strut">&nbsp;</span></p>
<p id="t321" class="pln"><span class="str">                    >>> assert abs(u({'Laptop': 'HP', 'Harddisk': '80 Gb', 'External Monitor': "20'' LCD"}) - 22.68559475583014) &lt; 0.000001</span><span class="strut">&nbsp;</span></p>
<p id="t322" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t323" class="pln"><span class="str">                    >>> u, _ = UtilityFunction.from_xml_str(open(pkg_resources.resource_filename('negmas'</span><span class="strut">&nbsp;</span></p>
<p id="t324" class="pln"><span class="str">                    ...                                      , resource_name='tests/data/Laptop/Laptop-C-prof1.xml')</span><span class="strut">&nbsp;</span></p>
<p id="t325" class="pln"><span class="str">                    ...                                      , 'r').read()</span><span class="strut">&nbsp;</span></p>
<p id="t326" class="pln"><span class="str">                    ...                                      , force_single_issue=True, normalize_utility=True)</span><span class="strut">&nbsp;</span></p>
<p id="t327" class="pln"><span class="str">                    >>> assert abs(u(("Dell+60 Gb+19'' LCD",)) - 0.599329436957658) &lt; 0.1</span><span class="strut">&nbsp;</span></p>
<p id="t328" class="pln"><span class="str">                    >>> assert abs(u(("HP+80 Gb+20'' LCD",)) - 0.6342209804130308) &lt; 0.01</span><span class="strut">&nbsp;</span></p>
<p id="t329" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t330" class="pln"><span class="str">                    >>> u, _ = UtilityFunction.from_xml_str(open(pkg_resources.resource_filename('negmas'</span><span class="strut">&nbsp;</span></p>
<p id="t331" class="pln"><span class="str">                    ...                                      , resource_name='tests/data/Laptop/Laptop-C-prof1.xml')</span><span class="strut">&nbsp;</span></p>
<p id="t332" class="pln"><span class="str">                    ...                                      , 'r').read(), force_single_issue=True</span><span class="strut">&nbsp;</span></p>
<p id="t333" class="pln"><span class="str">                    ... , keep_issue_names=False, keep_value_names=False, normalize_utility=True)</span><span class="strut">&nbsp;</span></p>
<p id="t334" class="pln"><span class="str">                    >>> assert abs(u((0,)) - 0.599329436957658) &lt; 0.1</span><span class="strut">&nbsp;</span></p>
<p id="t335" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t336" class="pln"><span class="str">                    >>> u, _ = UtilityFunction.from_xml_str(open(pkg_resources.resource_filename('negmas'</span><span class="strut">&nbsp;</span></p>
<p id="t337" class="pln"><span class="str">                    ...                                      , resource_name='tests/data/Laptop/Laptop-C-prof1.xml')</span><span class="strut">&nbsp;</span></p>
<p id="t338" class="pln"><span class="str">                    ...         , 'r').read(), force_single_issue=False, normalize_utility=True)</span><span class="strut">&nbsp;</span></p>
<p id="t339" class="pln"><span class="str">                    >>> assert abs(u({'Laptop': 'Dell', 'Harddisk': '60 Gb', 'External Monitor': "19'' LCD"}) - 0.599329436957658) &lt; 0.1</span><span class="strut">&nbsp;</span></p>
<p id="t340" class="pln"><span class="str">                    >>> assert abs(u({'Laptop': 'HP', 'Harddisk': '80 Gb', 'External Monitor': "20'' LCD"}) - 0.6342209804130308) &lt; 0.01</span><span class="strut">&nbsp;</span></p>
<p id="t341" class="pln"><span class="str">                    >>> assert abs(u({'Laptop': 'HP', 'Harddisk': '60 Gb', 'External Monitor': "19'' LCD"}) - 1.0) &lt; 0.0001</span><span class="strut">&nbsp;</span></p>
<p id="t342" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t343" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t344" class="stm run hide_run">        <span class="nam">root</span> <span class="op">=</span> <span class="nam">ET</span><span class="op">.</span><span class="nam">fromstring</span><span class="op">(</span><span class="nam">xml_str</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t345" class="stm par run hide_run"><span class="annotate short">345&#x202F;&#x219B;&#x202F;346</span><span class="annotate long">line 345 didn't jump to line 346, because the condition on line 345 was never true</span>        <span class="key">if</span> <span class="nam">safe_parsing</span> <span class="key">and</span> <span class="nam">root</span><span class="op">.</span><span class="nam">tag</span> <span class="op">!=</span> <span class="str">"utility_space"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t346" class="stm mis">            <span class="key">raise</span> <span class="nam">ValueError</span><span class="op">(</span><span class="str">f"Root tag is {root.tag}: Expected utility_space"</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t347" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t348" class="stm run hide_run">        <span class="key">if</span> <span class="nam">domain_issues</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t349" class="stm par run hide_run"><span class="annotate short">349&#x202F;&#x219B;&#x202F;353</span><span class="annotate long">line 349 didn't jump to line 353, because the condition on line 349 was never false</span>            <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">domain_issues</span><span class="op">,</span> <span class="nam">list</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t350" class="stm run hide_run">                <span class="nam">domain_issues</span><span class="op">:</span> <span class="nam">Dict</span><span class="op">[</span><span class="nam">str</span><span class="op">,</span> <span class="nam">Issue</span><span class="op">]</span> <span class="op">=</span> <span class="nam">dict</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t351" class="pln">                    <span class="nam">zip</span><span class="op">(</span><span class="op">[</span><span class="nam">_</span><span class="op">.</span><span class="nam">name</span> <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">domain_issues</span><span class="op">]</span><span class="op">,</span> <span class="nam">domain_issues</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t352" class="pln">                <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t353" class="stm mis">            <span class="key">elif</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">domain_issues</span><span class="op">,</span> <span class="nam">Issue</span><span class="op">)</span> <span class="key">and</span> <span class="nam">force_single_issue</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t354" class="stm mis">                <span class="nam">domain_issues</span> <span class="op">=</span> <span class="nam">dict</span><span class="op">(</span><span class="nam">zip</span><span class="op">(</span><span class="op">[</span><span class="nam">domain_issues</span><span class="op">.</span><span class="nam">name</span><span class="op">]</span><span class="op">,</span> <span class="op">[</span><span class="nam">domain_issues</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t355" class="stm run hide_run">        <span class="nam">objective</span> <span class="op">=</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t356" class="stm run hide_run">        <span class="nam">reserved_value</span> <span class="op">=</span> <span class="num">0.0</span><span class="strut">&nbsp;</span></p>
<p id="t357" class="stm run hide_run">        <span class="nam">discount_factor</span> <span class="op">=</span> <span class="num">0.0</span><span class="strut">&nbsp;</span></p>
<p id="t358" class="stm run hide_run">        <span class="key">for</span> <span class="nam">child</span> <span class="key">in</span> <span class="nam">root</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t359" class="stm run hide_run">            <span class="key">if</span> <span class="nam">child</span><span class="op">.</span><span class="nam">tag</span> <span class="op">==</span> <span class="str">"objective"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t360" class="stm run hide_run">                <span class="nam">objective</span> <span class="op">=</span> <span class="nam">child</span><span class="strut">&nbsp;</span></p>
<p id="t361" class="stm run hide_run">            <span class="key">elif</span> <span class="nam">child</span><span class="op">.</span><span class="nam">tag</span> <span class="op">==</span> <span class="str">"reservation"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t362" class="stm run hide_run">                <span class="nam">reserved_value</span> <span class="op">=</span> <span class="nam">float</span><span class="op">(</span><span class="nam">child</span><span class="op">.</span><span class="nam">attrib</span><span class="op">[</span><span class="str">"value"</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t363" class="stm par run hide_run"><span class="annotate short">363&#x202F;&#x219B;&#x202F;358</span><span class="annotate long">line 363 didn't jump to line 358, because the condition on line 363 was never false</span>            <span class="key">elif</span> <span class="nam">child</span><span class="op">.</span><span class="nam">tag</span> <span class="op">==</span> <span class="str">"discount_factor"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t364" class="stm run hide_run">                <span class="nam">discount_factor</span> <span class="op">=</span> <span class="nam">float</span><span class="op">(</span><span class="nam">child</span><span class="op">.</span><span class="nam">attrib</span><span class="op">[</span><span class="str">"value"</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t365" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t366" class="stm par run hide_run"><span class="annotate short">366&#x202F;&#x219B;&#x202F;367</span><span class="annotate long">line 366 didn't jump to line 367, because the condition on line 366 was never true</span>        <span class="key">if</span> <span class="nam">objective</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t367" class="stm mis">            <span class="key">if</span> <span class="nam">safe_parsing</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t368" class="pln">                <span class="key">pass</span><span class="strut">&nbsp;</span></p>
<p id="t369" class="pln">                <span class="com"># raise ValueError(f'No objective child was found in the root')</span><span class="strut">&nbsp;</span></p>
<p id="t370" class="stm mis">            <span class="nam">objective</span> <span class="op">=</span> <span class="nam">root</span><span class="strut">&nbsp;</span></p>
<p id="t371" class="stm run hide_run">        <span class="nam">weights</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span><span class="strut">&nbsp;</span></p>
<p id="t372" class="stm run hide_run">        <span class="nam">issues</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span><span class="strut">&nbsp;</span></p>
<p id="t373" class="stm run hide_run">        <span class="nam">real_issues</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span><span class="strut">&nbsp;</span></p>
<p id="t374" class="stm run hide_run">        <span class="nam">issue_info</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span><span class="strut">&nbsp;</span></p>
<p id="t375" class="stm run hide_run">        <span class="nam">issue_keys</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span><span class="strut">&nbsp;</span></p>
<p id="t376" class="stm run hide_run">        <span class="nam">rects</span><span class="op">,</span> <span class="nam">rect_utils</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span><span class="op">,</span> <span class="op">[</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t377" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t378" class="stm run hide_run">        <span class="key">def</span> <span class="nam">_get_hyperrects</span><span class="op">(</span><span class="nam">ufun</span><span class="op">,</span> <span class="nam">max_utility</span><span class="op">,</span> <span class="nam">utiltype</span><span class="op">=</span><span class="nam">float</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t379" class="stm run hide_run">            <span class="nam">utype</span> <span class="op">=</span> <span class="nam">ufun</span><span class="op">.</span><span class="nam">attrib</span><span class="op">.</span><span class="nam">get</span><span class="op">(</span><span class="str">"type"</span><span class="op">,</span> <span class="str">"none"</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t380" class="stm run hide_run">            <span class="nam">uweight</span> <span class="op">=</span> <span class="nam">float</span><span class="op">(</span><span class="nam">ufun</span><span class="op">.</span><span class="nam">attrib</span><span class="op">.</span><span class="nam">get</span><span class="op">(</span><span class="str">"weight"</span><span class="op">,</span> <span class="num">1</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t381" class="stm run hide_run">            <span class="nam">uagg</span> <span class="op">=</span> <span class="nam">ufun</span><span class="op">.</span><span class="nam">attrib</span><span class="op">.</span><span class="nam">get</span><span class="op">(</span><span class="str">"aggregation"</span><span class="op">,</span> <span class="str">"sum"</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t382" class="stm par run hide_run"><span class="annotate short">382&#x202F;&#x219B;&#x202F;383</span><span class="annotate long">line 382 didn't jump to line 383, because the condition on line 382 was never true</span>            <span class="key">if</span> <span class="nam">uagg</span> <span class="op">!=</span> <span class="str">"sum"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t383" class="stm mis">                <span class="key">raise</span> <span class="nam">ValueError</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t384" class="pln">                    <span class="str">f"Hypervolumes combined using {uagg} are not supported (only sum is supported)"</span><span class="strut">&nbsp;</span></p>
<p id="t385" class="pln">                <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t386" class="stm run hide_run">            <span class="nam">total_util</span> <span class="op">=</span> <span class="nam">utiltype</span><span class="op">(</span><span class="num">0</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t387" class="stm run hide_run">            <span class="nam">rects</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t388" class="stm run hide_run">            <span class="nam">rect_utils</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t389" class="stm par run hide_run"><span class="annotate short">389&#x202F;&#x219B;&#x202F;403</span><span class="annotate long">line 389 didn't jump to line 403, because the condition on line 389 was never false</span>            <span class="key">if</span> <span class="nam">utype</span> <span class="op">==</span> <span class="str">"PlainUfun"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t390" class="stm run hide_run">                <span class="key">for</span> <span class="nam">rect</span> <span class="key">in</span> <span class="nam">ufun</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t391" class="stm run hide_run">                    <span class="nam">util</span> <span class="op">=</span> <span class="nam">utiltype</span><span class="op">(</span><span class="nam">rect</span><span class="op">.</span><span class="nam">attrib</span><span class="op">.</span><span class="nam">get</span><span class="op">(</span><span class="str">"utility"</span><span class="op">,</span> <span class="num">0</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t392" class="stm run hide_run">                    <span class="nam">total_util</span> <span class="op">+=</span> <span class="nam">util</span> <span class="key">if</span> <span class="nam">util</span> <span class="op">></span> <span class="num">0</span> <span class="key">else</span> <span class="num">0</span><span class="strut">&nbsp;</span></p>
<p id="t393" class="stm run hide_run">                    <span class="nam">ranges</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span><span class="strut">&nbsp;</span></p>
<p id="t394" class="stm run hide_run">                    <span class="nam">rect_utils</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">util</span> <span class="op">*</span> <span class="nam">uweight</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t395" class="stm run hide_run">                    <span class="key">for</span> <span class="nam">r</span> <span class="key">in</span> <span class="nam">rect</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t396" class="stm run hide_run">                        <span class="nam">key</span> <span class="op">=</span> <span class="nam">issue_keys</span><span class="op">[</span><span class="nam">int</span><span class="op">(</span><span class="nam">r</span><span class="op">.</span><span class="nam">attrib</span><span class="op">[</span><span class="str">"index"</span><span class="op">]</span><span class="op">)</span> <span class="op">-</span> <span class="num">1</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t397" class="stm run hide_run">                        <span class="nam">ranges</span><span class="op">[</span><span class="nam">key</span><span class="op">]</span> <span class="op">=</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t398" class="pln">                            <span class="nam">utiltype</span><span class="op">(</span><span class="nam">r</span><span class="op">.</span><span class="nam">attrib</span><span class="op">[</span><span class="str">"min"</span><span class="op">]</span><span class="op">)</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t399" class="pln">                            <span class="nam">utiltype</span><span class="op">(</span><span class="nam">r</span><span class="op">.</span><span class="nam">attrib</span><span class="op">[</span><span class="str">"max"</span><span class="op">]</span><span class="op">)</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t400" class="pln">                        <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t401" class="stm run hide_run">                    <span class="nam">rects</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">ranges</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t402" class="pln">            <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t403" class="stm mis">                <span class="key">raise</span> <span class="nam">ValueError</span><span class="op">(</span><span class="str">f"Unknown ufun type {utype}"</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t404" class="stm run hide_run">            <span class="nam">total_util</span> <span class="op">=</span> <span class="nam">total_util</span> <span class="key">if</span> <span class="nam">max_utility</span> <span class="key">is</span> <span class="key">None</span> <span class="key">else</span> <span class="nam">max_utility</span><span class="strut">&nbsp;</span></p>
<p id="t405" class="stm run hide_run">            <span class="key">if</span> <span class="nam">normalize_utility</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t406" class="stm run hide_run">                <span class="key">for</span> <span class="nam">i</span><span class="op">,</span> <span class="nam">u</span> <span class="key">in</span> <span class="nam">enumerate</span><span class="op">(</span><span class="nam">rect_utils</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t407" class="stm run hide_run">                    <span class="nam">rect_utils</span><span class="op">[</span><span class="nam">i</span><span class="op">]</span> <span class="op">=</span> <span class="nam">u</span> <span class="op">/</span> <span class="nam">total_util</span><span class="strut">&nbsp;</span></p>
<p id="t408" class="stm run hide_run">            <span class="key">return</span> <span class="nam">rects</span><span class="op">,</span> <span class="nam">rect_utils</span><span class="strut">&nbsp;</span></p>
<p id="t409" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t410" class="stm run hide_run">        <span class="key">for</span> <span class="nam">child</span> <span class="key">in</span> <span class="nam">objective</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t411" class="stm run hide_run">            <span class="key">if</span> <span class="nam">child</span><span class="op">.</span><span class="nam">tag</span> <span class="op">==</span> <span class="str">"weight"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t412" class="stm run hide_run">                <span class="nam">indx</span> <span class="op">=</span> <span class="nam">int</span><span class="op">(</span><span class="nam">child</span><span class="op">.</span><span class="nam">attrib</span><span class="op">[</span><span class="str">"index"</span><span class="op">]</span><span class="op">)</span> <span class="op">-</span> <span class="num">1</span><span class="strut">&nbsp;</span></p>
<p id="t413" class="stm run hide_run">                <span class="nam">weights</span><span class="op">[</span><span class="nam">indx</span><span class="op">]</span> <span class="op">=</span> <span class="nam">float</span><span class="op">(</span><span class="nam">child</span><span class="op">.</span><span class="nam">attrib</span><span class="op">[</span><span class="str">"value"</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t414" class="stm run hide_run">            <span class="key">elif</span> <span class="nam">child</span><span class="op">.</span><span class="nam">tag</span> <span class="op">==</span> <span class="str">"utility_function"</span> <span class="key">or</span> <span class="nam">child</span><span class="op">.</span><span class="nam">tag</span> <span class="op">==</span> <span class="str">"utility"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t415" class="stm run hide_run">                <span class="nam">utility_tag</span> <span class="op">=</span> <span class="nam">child</span><span class="strut">&nbsp;</span></p>
<p id="t416" class="stm run hide_run">                <span class="nam">max_utility</span> <span class="op">=</span> <span class="nam">child</span><span class="op">.</span><span class="nam">attrib</span><span class="op">.</span><span class="nam">get</span><span class="op">(</span><span class="str">"maxutility"</span><span class="op">,</span> <span class="key">None</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t417" class="stm par run hide_run"><span class="annotate short">417&#x202F;&#x219B;&#x202F;419</span><span class="annotate long">line 417 didn't jump to line 419, because the condition on line 417 was never false</span>                <span class="key">if</span> <span class="nam">max_utility</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t418" class="stm run hide_run">                    <span class="nam">max_utility</span> <span class="op">=</span> <span class="nam">float</span><span class="op">(</span><span class="nam">max_utility</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t419" class="stm run hide_run">                <span class="nam">ufun_found</span> <span class="op">=</span> <span class="key">False</span><span class="strut">&nbsp;</span></p>
<p id="t420" class="stm run hide_run">                <span class="key">for</span> <span class="nam">ufun</span> <span class="key">in</span> <span class="nam">utility_tag</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t421" class="stm par run hide_run"><span class="annotate short">421&#x202F;&#x219B;&#x202F;420</span><span class="annotate long">line 421 didn't jump to line 420, because the condition on line 421 was never false</span>                    <span class="key">if</span> <span class="nam">ufun</span><span class="op">.</span><span class="nam">tag</span> <span class="op">==</span> <span class="str">"ufun"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t422" class="stm run hide_run">                        <span class="nam">ufun_found</span> <span class="op">=</span> <span class="key">True</span><span class="strut">&nbsp;</span></p>
<p id="t423" class="stm run hide_run">                        <span class="nam">_r</span><span class="op">,</span> <span class="nam">_u</span> <span class="op">=</span> <span class="nam">_get_hyperrects</span><span class="op">(</span><span class="nam">ufun</span><span class="op">,</span> <span class="nam">max_utility</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t424" class="stm run hide_run">                        <span class="nam">rects</span> <span class="op">+=</span> <span class="nam">_r</span><span class="strut">&nbsp;</span></p>
<p id="t425" class="stm run hide_run">                        <span class="nam">rect_utils</span> <span class="op">+=</span> <span class="nam">_u</span><span class="strut">&nbsp;</span></p>
<p id="t426" class="stm par run hide_run"><span class="annotate short">426&#x202F;&#x219B;&#x202F;410,&nbsp;&nbsp; 426&#x202F;&#x219B;&#x202F;427</span><span class="annotate long">2 missed branches: 1) line 426 didn't jump to line 410, because the condition on line 426 was never false, 2) line 426 didn't jump to line 427, because the condition on line 426 was never true</span>                <span class="key">if</span> <span class="key">not</span> <span class="nam">ufun_found</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t427" class="stm mis">                    <span class="key">raise</span> <span class="nam">ValueError</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t428" class="pln">                        <span class="str">f"Cannot find ufun tag inside a utility_function tag"</span><span class="strut">&nbsp;</span></p>
<p id="t429" class="pln">                    <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t430" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t431" class="stm par run hide_run"><span class="annotate short">431&#x202F;&#x219B;&#x202F;410</span><span class="annotate long">line 431 didn't jump to line 410, because the condition on line 431 was never false</span>            <span class="key">elif</span> <span class="nam">child</span><span class="op">.</span><span class="nam">tag</span> <span class="op">==</span> <span class="str">"issue"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t432" class="stm run hide_run">                <span class="nam">indx</span> <span class="op">=</span> <span class="nam">int</span><span class="op">(</span><span class="nam">child</span><span class="op">.</span><span class="nam">attrib</span><span class="op">[</span><span class="str">"index"</span><span class="op">]</span><span class="op">)</span> <span class="op">-</span> <span class="num">1</span><span class="strut">&nbsp;</span></p>
<p id="t433" class="stm run hide_run">                <span class="nam">myname</span> <span class="op">=</span> <span class="nam">child</span><span class="op">.</span><span class="nam">attrib</span><span class="op">[</span><span class="str">"name"</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t434" class="stm run hide_run">                <span class="nam">issue_key</span> <span class="op">=</span> <span class="nam">myname</span> <span class="key">if</span> <span class="nam">keep_issue_names</span> <span class="key">else</span> <span class="nam">indx</span><span class="strut">&nbsp;</span></p>
<p id="t435" class="stm par run hide_run"><span class="annotate short">435&#x202F;&#x219B;&#x202F;436</span><span class="annotate long">line 435 didn't jump to line 436, because the condition on line 435 was never true</span>                <span class="key">if</span> <span class="nam">domain_issues</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span> <span class="key">and</span> <span class="nam">myname</span> <span class="key">not</span> <span class="key">in</span> <span class="nam">domain_issues</span><span class="op">.</span><span class="nam">keys</span><span class="op">(</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t436" class="stm mis">                    <span class="key">raise</span> <span class="nam">ValueError</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t437" class="pln">                        <span class="str">f"Issue {myname} is not in the input issue names ({domain_issues.keys()})"</span><span class="strut">&nbsp;</span></p>
<p id="t438" class="pln">                    <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t439" class="stm run hide_run">                <span class="nam">issue_info</span><span class="op">[</span><span class="nam">issue_key</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="str">"name"</span><span class="op">:</span> <span class="nam">myname</span><span class="op">,</span> <span class="str">"index"</span><span class="op">:</span> <span class="nam">indx</span><span class="op">}</span><span class="strut">&nbsp;</span></p>
<p id="t440" class="stm run hide_run">                <span class="nam">issue_keys</span><span class="op">[</span><span class="nam">indx</span><span class="op">]</span> <span class="op">=</span> <span class="nam">issue_key</span><span class="strut">&nbsp;</span></p>
<p id="t441" class="stm run hide_run">                <span class="nam">info</span> <span class="op">=</span> <span class="op">{</span><span class="str">"type"</span><span class="op">:</span> <span class="str">"discrete"</span><span class="op">,</span> <span class="str">"etype"</span><span class="op">:</span> <span class="str">"discrete"</span><span class="op">,</span> <span class="str">"vtype"</span><span class="op">:</span> <span class="str">"discrete"</span><span class="op">}</span><span class="strut">&nbsp;</span></p>
<p id="t442" class="stm run hide_run">                <span class="key">for</span> <span class="nam">a</span> <span class="key">in</span> <span class="op">(</span><span class="str">"type"</span><span class="op">,</span> <span class="str">"etype"</span><span class="op">,</span> <span class="str">"vtype"</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t443" class="stm run hide_run">                    <span class="nam">info</span><span class="op">[</span><span class="nam">a</span><span class="op">]</span> <span class="op">=</span> <span class="nam">child</span><span class="op">.</span><span class="nam">attrib</span><span class="op">.</span><span class="nam">get</span><span class="op">(</span><span class="nam">a</span><span class="op">,</span> <span class="nam">info</span><span class="op">[</span><span class="nam">a</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t444" class="stm run hide_run">                <span class="nam">mytype</span> <span class="op">=</span> <span class="nam">info</span><span class="op">[</span><span class="str">"type"</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t445" class="stm run hide_run">                <span class="nam">value_scale</span> <span class="op">=</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t446" class="stm run hide_run">                <span class="nam">value_shift</span> <span class="op">=</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t447" class="stm run hide_run">                <span class="key">if</span> <span class="nam">mytype</span> <span class="op">==</span> <span class="str">"discrete"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t448" class="stm run hide_run">                    <span class="nam">issues</span><span class="op">[</span><span class="nam">issue_key</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span><span class="strut">&nbsp;</span></p>
<p id="t449" class="stm par run hide_run"><span class="annotate short">449&#x202F;&#x219B;&#x202F;453</span><span class="annotate long">line 449 didn't jump to line 453</span>                    <span class="key">if</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t450" class="pln">                        <span class="nam">domain_issues</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t451" class="pln">                        <span class="key">and</span> <span class="nam">domain_issues</span><span class="op">[</span><span class="nam">myname</span><span class="op">]</span><span class="op">.</span><span class="nam">is_uncountable</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t452" class="pln">                    <span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t453" class="stm mis">                        <span class="key">raise</span> <span class="nam">ValueError</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t454" class="pln">                            <span class="str">f"Got a {mytype} issue but expected a continuous valued issue"</span><span class="strut">&nbsp;</span></p>
<p id="t455" class="pln">                        <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t456" class="pln">                    <span class="com"># issues[indx]['items'] = {}</span><span class="strut">&nbsp;</span></p>
<p id="t457" class="stm par run hide_run"><span class="annotate short">457&#x202F;&#x219B;&#x202F;509</span><span class="annotate long">line 457 didn't jump to line 509, because the condition on line 457 was never false</span>                <span class="key">elif</span> <span class="nam">mytype</span> <span class="key">in</span> <span class="op">(</span><span class="str">"integer"</span><span class="op">,</span> <span class="str">"real"</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t458" class="stm run hide_run">                    <span class="nam">lower</span><span class="op">,</span> <span class="nam">upper</span> <span class="op">=</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t459" class="pln">                        <span class="nam">child</span><span class="op">.</span><span class="nam">attrib</span><span class="op">.</span><span class="nam">get</span><span class="op">(</span><span class="str">"lowerbound"</span><span class="op">,</span> <span class="key">None</span><span class="op">)</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t460" class="pln">                        <span class="nam">child</span><span class="op">.</span><span class="nam">attrib</span><span class="op">.</span><span class="nam">get</span><span class="op">(</span><span class="str">"upperbound"</span><span class="op">,</span> <span class="key">None</span><span class="op">)</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t461" class="pln">                    <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t462" class="stm par run hide_run"><span class="annotate short">462&#x202F;&#x219B;&#x202F;463</span><span class="annotate long">line 462 didn't jump to line 463, because the loop on line 462 never started</span>                    <span class="key">for</span> <span class="nam">rng_child</span> <span class="key">in</span> <span class="nam">child</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t463" class="stm mis">                        <span class="key">if</span> <span class="nam">rng_child</span><span class="op">.</span><span class="nam">tag</span> <span class="op">==</span> <span class="str">"range"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t464" class="stm mis">                            <span class="nam">lower</span><span class="op">,</span> <span class="nam">upper</span> <span class="op">=</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t465" class="pln">                                <span class="nam">rng_child</span><span class="op">.</span><span class="nam">attrib</span><span class="op">.</span><span class="nam">get</span><span class="op">(</span><span class="str">"lowerbound"</span><span class="op">,</span> <span class="nam">lower</span><span class="op">)</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t466" class="pln">                                <span class="nam">rng_child</span><span class="op">.</span><span class="nam">attrib</span><span class="op">.</span><span class="nam">get</span><span class="op">(</span><span class="str">"upperbound"</span><span class="op">,</span> <span class="nam">upper</span><span class="op">)</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t467" class="pln">                            <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t468" class="stm par run hide_run"><span class="annotate short">468&#x202F;&#x219B;&#x202F;489</span><span class="annotate long">line 468 didn't jump to line 489, because the condition on line 468 was never false</span>                    <span class="key">if</span> <span class="nam">mytype</span> <span class="op">==</span> <span class="str">"integer"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t469" class="stm run hide_run">                        <span class="nam">issues</span><span class="op">[</span><span class="nam">issue_key</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span><span class="strut">&nbsp;</span></p>
<p id="t470" class="stm par run hide_run"><span class="annotate short">470&#x202F;&#x219B;&#x202F;474</span><span class="annotate long">line 470 didn't jump to line 474</span>                        <span class="key">if</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t471" class="pln">                            <span class="nam">domain_issues</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t472" class="pln">                            <span class="key">and</span> <span class="nam">domain_issues</span><span class="op">[</span><span class="nam">myname</span><span class="op">]</span><span class="op">.</span><span class="nam">is_uncountable</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t473" class="pln">                        <span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t474" class="stm mis">                            <span class="key">raise</span> <span class="nam">ValueError</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t475" class="pln">                                <span class="str">f"Got a {mytype} issue but expected a continuous valued issue"</span><span class="strut">&nbsp;</span></p>
<p id="t476" class="pln">                            <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t477" class="pln">                        <span class="com"># issues[indx]['items'] = {}</span><span class="strut">&nbsp;</span></p>
<p id="t478" class="stm run hide_run">                        <span class="nam">lower</span><span class="op">,</span> <span class="nam">upper</span> <span class="op">=</span> <span class="nam">int</span><span class="op">(</span><span class="nam">lower</span><span class="op">)</span><span class="op">,</span> <span class="nam">int</span><span class="op">(</span><span class="nam">upper</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t479" class="stm run hide_run">                        <span class="key">for</span> <span class="nam">i</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">lower</span><span class="op">,</span> <span class="nam">upper</span> <span class="op">+</span> <span class="num">1</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t480" class="stm par run hide_run"><span class="annotate short">480&#x202F;&#x219B;&#x202F;483</span><span class="annotate long">line 480 didn't jump to line 483, because the condition on line 480 was never true</span>                            <span class="key">if</span> <span class="nam">domain_issues</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span> <span class="key">and</span> <span class="key">not</span> <span class="nam">outcome_is_valid</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t481" class="pln">                                <span class="op">(</span><span class="nam">i</span><span class="op">,</span><span class="op">)</span><span class="op">,</span> <span class="op">[</span><span class="nam">domain_issues</span><span class="op">[</span><span class="nam">myname</span><span class="op">]</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t482" class="pln">                            <span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t483" class="stm mis">                                <span class="key">raise</span> <span class="nam">ValueError</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t484" class="pln">                                    <span class="str">f"Value {i} is not in the domain issue values: "</span><span class="strut">&nbsp;</span></p>
<p id="t485" class="pln">                                    <span class="str">f"{domain_issues[myname].values}"</span><span class="strut">&nbsp;</span></p>
<p id="t486" class="pln">                                <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t487" class="stm run hide_run">                            <span class="nam">issues</span><span class="op">[</span><span class="nam">issue_key</span><span class="op">]</span><span class="op">[</span><span class="nam">i</span><span class="op">]</span> <span class="op">=</span> <span class="nam">i</span> <span class="key">if</span> <span class="nam">keep_value_names</span> <span class="key">else</span> <span class="nam">i</span> <span class="op">-</span> <span class="nam">lower</span><span class="strut">&nbsp;</span></p>
<p id="t488" class="pln">                    <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t489" class="stm mis">                        <span class="nam">lower</span><span class="op">,</span> <span class="nam">upper</span> <span class="op">=</span> <span class="nam">float</span><span class="op">(</span><span class="nam">lower</span><span class="op">)</span><span class="op">,</span> <span class="nam">float</span><span class="op">(</span><span class="nam">upper</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t490" class="stm mis">                        <span class="key">if</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t491" class="pln">                            <span class="nam">domain_issues</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t492" class="pln">                            <span class="key">and</span> <span class="key">not</span> <span class="nam">domain_issues</span><span class="op">[</span><span class="nam">myname</span><span class="op">]</span><span class="op">.</span><span class="nam">is_uncountable</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t493" class="pln">                        <span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t494" class="stm mis">                            <span class="nam">n_steps</span> <span class="op">=</span> <span class="nam">domain_issues</span><span class="op">[</span><span class="nam">myname</span><span class="op">]</span><span class="op">.</span><span class="nam">cardinality</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t495" class="stm mis">                            <span class="nam">delta</span> <span class="op">=</span> <span class="op">(</span><span class="nam">n_steps</span> <span class="op">-</span> <span class="num">1</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="nam">upper</span> <span class="op">-</span> <span class="nam">lower</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t496" class="stm mis">                            <span class="nam">value_shift</span> <span class="op">=</span> <span class="op">-</span><span class="nam">lower</span> <span class="op">*</span> <span class="nam">delta</span><span class="strut">&nbsp;</span></p>
<p id="t497" class="stm mis">                            <span class="nam">value_scale</span> <span class="op">=</span> <span class="nam">delta</span><span class="strut">&nbsp;</span></p>
<p id="t498" class="stm mis">                            <span class="nam">lower</span><span class="op">,</span> <span class="nam">upper</span> <span class="op">=</span> <span class="num">0</span><span class="op">,</span> <span class="nam">n_steps</span> <span class="op">-</span> <span class="num">1</span><span class="strut">&nbsp;</span></p>
<p id="t499" class="stm mis">                            <span class="nam">issues</span><span class="op">[</span><span class="nam">issue_key</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span><span class="strut">&nbsp;</span></p>
<p id="t500" class="stm mis">                            <span class="key">for</span> <span class="nam">i</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">lower</span><span class="op">,</span> <span class="nam">upper</span> <span class="op">+</span> <span class="num">1</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t501" class="stm mis">                                <span class="nam">issues</span><span class="op">[</span><span class="nam">issue_key</span><span class="op">]</span><span class="op">[</span><span class="nam">i</span><span class="op">]</span> <span class="op">=</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t502" class="pln">                                    <span class="nam">str</span><span class="op">(</span><span class="nam">i</span><span class="op">)</span> <span class="key">if</span> <span class="nam">keep_value_names</span> <span class="key">else</span> <span class="nam">i</span> <span class="op">-</span> <span class="nam">lower</span><span class="strut">&nbsp;</span></p>
<p id="t503" class="pln">                                <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t504" class="pln">                        <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t505" class="stm mis">                            <span class="nam">real_issues</span><span class="op">[</span><span class="nam">issue_key</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span><span class="strut">&nbsp;</span></p>
<p id="t506" class="stm mis">                            <span class="nam">real_issues</span><span class="op">[</span><span class="nam">issue_key</span><span class="op">]</span><span class="op">[</span><span class="str">"range"</span><span class="op">]</span> <span class="op">=</span> <span class="op">(</span><span class="nam">lower</span><span class="op">,</span> <span class="nam">upper</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t507" class="stm mis">                            <span class="nam">real_issues</span><span class="op">[</span><span class="nam">issue_key</span><span class="op">]</span><span class="op">[</span><span class="str">"key"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">issue_key</span><span class="strut">&nbsp;</span></p>
<p id="t508" class="pln">                <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t509" class="stm mis">                    <span class="key">raise</span> <span class="nam">ValueError</span><span class="op">(</span><span class="str">f"Unknown type: {mytype}"</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t510" class="stm par run hide_run"><span class="annotate short">510&#x202F;&#x219B;&#x202F;609</span><span class="annotate long">line 510 didn't jump to line 609, because the condition on line 510 was never false</span>                <span class="key">if</span> <span class="nam">mytype</span> <span class="key">in</span> <span class="str">"discrete"</span> <span class="key">or</span> <span class="str">"integer"</span> <span class="key">or</span> <span class="str">"real"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t511" class="stm run hide_run">                    <span class="nam">found_values</span> <span class="op">=</span> <span class="key">False</span><span class="strut">&nbsp;</span></p>
<p id="t512" class="stm run hide_run">                    <span class="key">for</span> <span class="nam">item</span> <span class="key">in</span> <span class="nam">child</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t513" class="stm par run hide_run"><span class="annotate short">513&#x202F;&#x219B;&#x202F;554</span><span class="annotate long">line 513 didn't jump to line 554, because the condition on line 513 was never false</span>                        <span class="key">if</span> <span class="nam">item</span><span class="op">.</span><span class="nam">tag</span> <span class="op">==</span> <span class="str">"item"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t514" class="stm par run hide_run"><span class="annotate short">514&#x202F;&#x219B;&#x202F;515</span><span class="annotate long">line 514 didn't jump to line 515, because the condition on line 514 was never true</span>                            <span class="key">if</span> <span class="nam">mytype</span> <span class="op">==</span> <span class="str">"real"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t515" class="stm mis">                                <span class="key">raise</span> <span class="nam">ValueError</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t516" class="pln">                                    <span class="str">f"cannot specify item utilities for real type"</span><span class="strut">&nbsp;</span></p>
<p id="t517" class="pln">                                <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t518" class="stm run hide_run">                            <span class="nam">item_indx</span> <span class="op">=</span> <span class="nam">int</span><span class="op">(</span><span class="nam">item</span><span class="op">.</span><span class="nam">attrib</span><span class="op">[</span><span class="str">"index"</span><span class="op">]</span><span class="op">)</span> <span class="op">-</span> <span class="num">1</span><span class="strut">&nbsp;</span></p>
<p id="t519" class="stm run hide_run">                            <span class="nam">item_name</span><span class="op">:</span> <span class="nam">str</span> <span class="op">=</span> <span class="nam">item</span><span class="op">.</span><span class="nam">attrib</span><span class="op">.</span><span class="nam">get</span><span class="op">(</span><span class="str">"value"</span><span class="op">,</span> <span class="key">None</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t520" class="stm par run hide_run"><span class="annotate short">520&#x202F;&#x219B;&#x202F;521</span><span class="annotate long">line 520 didn't jump to line 521, because the condition on line 520 was never true</span>                            <span class="key">if</span> <span class="nam">item_name</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t521" class="stm mis">                                <span class="key">continue</span><span class="strut">&nbsp;</span></p>
<p id="t522" class="stm run hide_run">                            <span class="nam">item_key</span> <span class="op">=</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t523" class="pln">                                <span class="nam">item_name</span><span class="strut">&nbsp;</span></p>
<p id="t524" class="pln">                                <span class="key">if</span> <span class="nam">keep_value_names</span><span class="strut">&nbsp;</span></p>
<p id="t525" class="pln">                                <span class="key">and</span> <span class="nam">item_name</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t526" class="pln">                                <span class="key">and</span> <span class="key">not</span> <span class="nam">force_numeric</span><span class="strut">&nbsp;</span></p>
<p id="t527" class="pln">                                <span class="key">else</span> <span class="nam">item_indx</span><span class="strut">&nbsp;</span></p>
<p id="t528" class="pln">                            <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t529" class="stm run hide_run">                            <span class="key">if</span> <span class="nam">domain_issues</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t530" class="stm run hide_run">                                <span class="nam">domain_all</span> <span class="op">=</span> <span class="nam">list</span><span class="op">(</span><span class="nam">domain_issues</span><span class="op">[</span><span class="nam">myname</span><span class="op">]</span><span class="op">.</span><span class="nam">all</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t531" class="stm par run hide_run"><span class="annotate short">531&#x202F;&#x219B;&#x202F;534</span><span class="annotate long">line 531 didn't jump to line 534, because the condition on line 531 was never true</span>                                <span class="key">if</span> <span class="nam">len</span><span class="op">(</span><span class="nam">domain_all</span><span class="op">)</span> <span class="op">></span> <span class="num">0</span> <span class="key">and</span> <span class="nam">isinstance</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t532" class="pln">                                    <span class="nam">domain_all</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">,</span> <span class="nam">int</span><span class="strut">&nbsp;</span></p>
<p id="t533" class="pln">                                <span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t534" class="stm mis">                                    <span class="nam">item_key</span> <span class="op">=</span> <span class="nam">int</span><span class="op">(</span><span class="nam">item_key</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t535" class="stm par run hide_run"><span class="annotate short">535&#x202F;&#x219B;&#x202F;538</span><span class="annotate long">line 535 didn't jump to line 538, because the condition on line 535 was never true</span>                                <span class="key">if</span> <span class="nam">len</span><span class="op">(</span><span class="nam">domain_all</span><span class="op">)</span> <span class="op">></span> <span class="num">0</span> <span class="key">and</span> <span class="nam">isinstance</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t536" class="pln">                                    <span class="nam">domain_all</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">,</span> <span class="nam">int</span><span class="strut">&nbsp;</span></p>
<p id="t537" class="pln">                                <span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t538" class="stm mis">                                    <span class="nam">item_name</span> <span class="op">=</span> <span class="nam">int</span><span class="op">(</span><span class="nam">item_name</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t539" class="stm par run hide_run"><span class="annotate short">539&#x202F;&#x219B;&#x202F;540</span><span class="annotate long">line 539 didn't jump to line 540, because the condition on line 539 was never true</span>                                <span class="key">if</span> <span class="nam">item_name</span> <span class="key">not</span> <span class="key">in</span> <span class="nam">domain_all</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t540" class="stm mis">                                    <span class="key">raise</span> <span class="nam">ValueError</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t541" class="pln">                                        <span class="str">f"Value {item_name} is not in the domain issue values: "</span><span class="strut">&nbsp;</span></p>
<p id="t542" class="pln">                                        <span class="str">f"{domain_issues[myname].values}"</span><span class="strut">&nbsp;</span></p>
<p id="t543" class="pln">                                    <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t544" class="stm par run hide_run"><span class="annotate short">544&#x202F;&#x219B;&#x202F;547</span><span class="annotate long">line 544 didn't jump to line 547, because the condition on line 544 was never true</span>                                <span class="key">if</span> <span class="nam">len</span><span class="op">(</span><span class="nam">domain_all</span><span class="op">)</span> <span class="op">></span> <span class="num">0</span> <span class="key">and</span> <span class="nam">isinstance</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t545" class="pln">                                    <span class="nam">domain_all</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">,</span> <span class="nam">int</span><span class="strut">&nbsp;</span></p>
<p id="t546" class="pln">                                <span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t547" class="stm mis">                                    <span class="nam">item_name</span> <span class="op">=</span> <span class="nam">str</span><span class="op">(</span><span class="nam">item_name</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t548" class="stm par run hide_run"><span class="annotate short">548&#x202F;&#x219B;&#x202F;549</span><span class="annotate long">line 548 didn't jump to line 549, because the condition on line 548 was never true</span>                            <span class="key">if</span> <span class="nam">mytype</span> <span class="op">==</span> <span class="str">"integer"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t549" class="stm mis">                                <span class="nam">item_key</span> <span class="op">=</span> <span class="nam">int</span><span class="op">(</span><span class="nam">item_key</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t550" class="stm run hide_run">                            <span class="nam">issues</span><span class="op">[</span><span class="nam">issue_key</span><span class="op">]</span><span class="op">[</span><span class="nam">item_key</span><span class="op">]</span> <span class="op">=</span> <span class="nam">float</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t551" class="pln">                                <span class="nam">item</span><span class="op">.</span><span class="nam">attrib</span><span class="op">.</span><span class="nam">get</span><span class="op">(</span><span class="str">"evaluation"</span><span class="op">,</span> <span class="nam">reserved_value</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t552" class="pln">                            <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t553" class="stm run hide_run">                            <span class="nam">found_values</span> <span class="op">=</span> <span class="key">True</span><span class="strut">&nbsp;</span></p>
<p id="t554" class="stm mis">                        <span class="key">elif</span> <span class="nam">item</span><span class="op">.</span><span class="nam">tag</span> <span class="op">==</span> <span class="str">"evaluator"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t555" class="stm mis">                            <span class="key">if</span> <span class="nam">item</span><span class="op">.</span><span class="nam">attrib</span><span class="op">[</span><span class="str">"ftype"</span><span class="op">]</span> <span class="op">==</span> <span class="str">"linear"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t556" class="stm mis">                                <span class="nam">offset</span> <span class="op">=</span> <span class="nam">item</span><span class="op">.</span><span class="nam">attrib</span><span class="op">.</span><span class="nam">get</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t557" class="pln">                                    <span class="str">"offset"</span><span class="op">,</span> <span class="nam">item</span><span class="op">.</span><span class="nam">attrib</span><span class="op">.</span><span class="nam">get</span><span class="op">(</span><span class="str">"parameter0"</span><span class="op">,</span> <span class="num">0.0</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t558" class="pln">                                <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t559" class="stm mis">                                <span class="nam">slope</span> <span class="op">=</span> <span class="nam">item</span><span class="op">.</span><span class="nam">attrib</span><span class="op">.</span><span class="nam">get</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t560" class="pln">                                    <span class="str">"slope"</span><span class="op">,</span> <span class="nam">item</span><span class="op">.</span><span class="nam">attrib</span><span class="op">.</span><span class="nam">get</span><span class="op">(</span><span class="str">"parameter1"</span><span class="op">,</span> <span class="num">1.0</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t561" class="pln">                                <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t562" class="stm mis">                                <span class="nam">offset</span><span class="op">,</span> <span class="nam">slope</span> <span class="op">=</span> <span class="nam">float</span><span class="op">(</span><span class="nam">offset</span><span class="op">)</span><span class="op">,</span> <span class="nam">float</span><span class="op">(</span><span class="nam">slope</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t563" class="stm mis">                                <span class="key">if</span> <span class="nam">value_scale</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t564" class="stm mis">                                    <span class="nam">fun</span> <span class="op">=</span> <span class="key">lambda</span> <span class="nam">x</span><span class="op">:</span> <span class="nam">offset</span> <span class="op">+</span> <span class="nam">slope</span> <span class="op">*</span> <span class="nam">float</span><span class="op">(</span><span class="nam">x</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t565" class="pln">                                <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t566" class="stm mis">                                    <span class="nam">fun</span> <span class="op">=</span> <span class="key">lambda</span> <span class="nam">x</span><span class="op">:</span> <span class="nam">offset</span> <span class="op">+</span> <span class="nam">slope</span> <span class="op">*</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t567" class="pln">                                        <span class="nam">value_scale</span> <span class="op">*</span> <span class="nam">float</span><span class="op">(</span><span class="nam">x</span><span class="op">)</span> <span class="op">+</span> <span class="nam">value_shift</span><span class="strut">&nbsp;</span></p>
<p id="t568" class="pln">                                    <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t569" class="stm mis">                            <span class="key">elif</span> <span class="nam">item</span><span class="op">.</span><span class="nam">attrib</span><span class="op">[</span><span class="str">"ftype"</span><span class="op">]</span> <span class="op">==</span> <span class="str">"triangular"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t570" class="stm mis">                                <span class="nam">strt</span> <span class="op">=</span> <span class="nam">item</span><span class="op">.</span><span class="nam">attrib</span><span class="op">.</span><span class="nam">get</span><span class="op">(</span><span class="str">"parameter0"</span><span class="op">,</span> <span class="num">0.0</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t571" class="stm mis">                                <span class="nam">end</span> <span class="op">=</span> <span class="nam">item</span><span class="op">.</span><span class="nam">attrib</span><span class="op">.</span><span class="nam">get</span><span class="op">(</span><span class="str">"parameter1"</span><span class="op">,</span> <span class="num">1.0</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t572" class="stm mis">                                <span class="nam">middle</span> <span class="op">=</span> <span class="nam">item</span><span class="op">.</span><span class="nam">attrib</span><span class="op">.</span><span class="nam">get</span><span class="op">(</span><span class="str">"parameter2"</span><span class="op">,</span> <span class="num">1.0</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t573" class="stm mis">                                <span class="nam">strt</span><span class="op">,</span> <span class="nam">end</span><span class="op">,</span> <span class="nam">middle</span> <span class="op">=</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t574" class="pln">                                    <span class="nam">float</span><span class="op">(</span><span class="nam">strt</span><span class="op">)</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t575" class="pln">                                    <span class="nam">float</span><span class="op">(</span><span class="nam">end</span><span class="op">)</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t576" class="pln">                                    <span class="nam">float</span><span class="op">(</span><span class="nam">middle</span><span class="op">)</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t577" class="pln">                                <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t578" class="stm mis">                                <span class="nam">offset1</span><span class="op">,</span> <span class="nam">slope1</span> <span class="op">=</span> <span class="nam">strt</span><span class="op">,</span> <span class="op">(</span><span class="nam">middle</span> <span class="op">-</span> <span class="nam">strt</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t579" class="stm mis">                                <span class="nam">offset2</span><span class="op">,</span> <span class="nam">slope2</span> <span class="op">=</span> <span class="nam">middle</span><span class="op">,</span> <span class="op">(</span><span class="nam">middle</span> <span class="op">-</span> <span class="nam">end</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t580" class="stm mis">                                <span class="key">if</span> <span class="nam">value_scale</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t581" class="stm mis">                                    <span class="nam">fun</span> <span class="op">=</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t582" class="pln">                                        <span class="key">lambda</span> <span class="nam">x</span><span class="op">:</span> <span class="nam">offset1</span> <span class="op">+</span> <span class="nam">slope1</span> <span class="op">*</span> <span class="nam">float</span><span class="op">(</span><span class="nam">x</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t583" class="pln">                                        <span class="key">if</span> <span class="nam">x</span> <span class="op">&lt;</span> <span class="nam">middle</span><span class="strut">&nbsp;</span></p>
<p id="t584" class="pln">                                        <span class="key">else</span> <span class="nam">offset2</span> <span class="op">+</span> <span class="nam">slope2</span> <span class="op">*</span> <span class="nam">float</span><span class="op">(</span><span class="nam">x</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t585" class="pln">                                    <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t586" class="pln">                                <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t587" class="stm mis">                                    <span class="nam">fun</span> <span class="op">=</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t588" class="pln">                                        <span class="key">lambda</span> <span class="nam">x</span><span class="op">:</span> <span class="nam">offset1</span><span class="strut">&nbsp;</span></p>
<p id="t589" class="pln">                                        <span class="op">+</span> <span class="nam">slope1</span><span class="strut">&nbsp;</span></p>
<p id="t590" class="pln">                                        <span class="op">*</span> <span class="op">(</span><span class="nam">value_scale</span> <span class="op">*</span> <span class="nam">float</span><span class="op">(</span><span class="nam">x</span><span class="op">)</span> <span class="op">+</span> <span class="nam">value_shift</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t591" class="pln">                                        <span class="key">if</span> <span class="nam">x</span> <span class="op">&lt;</span> <span class="nam">middle</span><span class="strut">&nbsp;</span></p>
<p id="t592" class="pln">                                        <span class="key">else</span> <span class="nam">offset2</span><span class="strut">&nbsp;</span></p>
<p id="t593" class="pln">                                        <span class="op">+</span> <span class="nam">slope2</span><span class="strut">&nbsp;</span></p>
<p id="t594" class="pln">                                        <span class="op">*</span> <span class="op">(</span><span class="nam">value_scale</span> <span class="op">*</span> <span class="nam">float</span><span class="op">(</span><span class="nam">x</span><span class="op">)</span> <span class="op">+</span> <span class="nam">value_shift</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t595" class="pln">                                    <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t596" class="pln">                            <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t597" class="stm mis">                                <span class="key">raise</span> <span class="nam">ValueError</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t598" class="pln">                                    <span class="str">f'Unknown ftype {item.attrib["ftype"]}'</span><span class="strut">&nbsp;</span></p>
<p id="t599" class="pln">                                <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t600" class="stm mis">                            <span class="key">if</span> <span class="nam">mytype</span> <span class="op">==</span> <span class="str">"real"</span> <span class="key">and</span> <span class="nam">value_scale</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t601" class="stm mis">                                <span class="nam">real_issues</span><span class="op">[</span><span class="nam">issue_key</span><span class="op">]</span><span class="op">[</span><span class="str">"fun"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">fun</span><span class="strut">&nbsp;</span></p>
<p id="t602" class="pln">                            <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t603" class="stm mis">                                <span class="key">for</span> <span class="nam">item_key</span><span class="op">,</span> <span class="nam">value</span> <span class="key">in</span> <span class="nam">issues</span><span class="op">[</span><span class="nam">issue_key</span><span class="op">]</span><span class="op">.</span><span class="nam">items</span><span class="op">(</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t604" class="stm mis">                                    <span class="nam">issues</span><span class="op">[</span><span class="nam">issue_key</span><span class="op">]</span><span class="op">[</span><span class="nam">item_key</span><span class="op">]</span> <span class="op">=</span> <span class="nam">fun</span><span class="op">(</span><span class="nam">value</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t605" class="stm mis">                                <span class="nam">found_values</span> <span class="op">=</span> <span class="key">True</span><span class="strut">&nbsp;</span></p>
<p id="t606" class="stm par run hide_run"><span class="annotate short">606&#x202F;&#x219B;&#x202F;410</span><span class="annotate long">line 606 didn't jump to line 410, because the condition on line 606 was never false</span>                    <span class="key">if</span> <span class="key">not</span> <span class="nam">found_values</span> <span class="key">and</span> <span class="nam">issue_key</span> <span class="key">in</span> <span class="nam">issues</span><span class="op">.</span><span class="nam">keys</span><span class="op">(</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t607" class="stm run hide_run">                        <span class="nam">issues</span><span class="op">.</span><span class="nam">pop</span><span class="op">(</span><span class="nam">issue_key</span><span class="op">,</span> <span class="key">None</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t608" class="pln">                <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t609" class="pln">                    <span class="str">"""Here goes the code for real-valued issues"""</span><span class="strut">&nbsp;</span></p>
<p id="t610" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t611" class="pln">        <span class="com"># if not keep_issue_names:</span><span class="strut">&nbsp;</span></p>
<p id="t612" class="pln">        <span class="com">#    issues = [issues[_] for _ in issues.keys()]</span><span class="strut">&nbsp;</span></p>
<p id="t613" class="pln">        <span class="com">#    real_issues = [real_issues[_] for _ in sorted(real_issues.keys())]</span><span class="strut">&nbsp;</span></p>
<p id="t614" class="pln">        <span class="com">#    for i, issue in enumerate(issues):</span><span class="strut">&nbsp;</span></p>
<p id="t615" class="pln">        <span class="com">#        issues[i] = [issue[_] for _ in issue.keys()]</span><span class="strut">&nbsp;</span></p>
<p id="t616" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t617" class="stm par run hide_run"><span class="annotate short">617&#x202F;&#x219B;&#x202F;622</span><span class="annotate long">line 617 didn't jump to line 622, because the condition on line 617 was never true</span>        <span class="key">if</span> <span class="nam">safe_parsing</span> <span class="key">and</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t618" class="pln">            <span class="nam">len</span><span class="op">(</span><span class="nam">weights</span><span class="op">)</span> <span class="op">></span> <span class="num">0</span><span class="strut">&nbsp;</span></p>
<p id="t619" class="pln">            <span class="key">and</span> <span class="nam">len</span><span class="op">(</span><span class="nam">weights</span><span class="op">)</span> <span class="op">!=</span> <span class="nam">len</span><span class="op">(</span><span class="nam">issues</span><span class="op">)</span> <span class="op">+</span> <span class="nam">len</span><span class="op">(</span><span class="nam">real_issues</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t620" class="pln">            <span class="key">and</span> <span class="nam">len</span><span class="op">(</span><span class="nam">weights</span><span class="op">)</span> <span class="op">!=</span> <span class="nam">len</span><span class="op">(</span><span class="nam">issues</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t621" class="pln">        <span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t622" class="stm mis">            <span class="key">raise</span> <span class="nam">ValueError</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t623" class="pln">                <span class="str">f"Got {len(weights)} weights for {len(issues)} issues and {len(real_issues)} real issues"</span><span class="strut">&nbsp;</span></p>
<p id="t624" class="pln">            <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t625" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t626" class="stm par run hide_run"><span class="annotate short">626&#x202F;&#x219B;&#x202F;631</span><span class="annotate long">line 626 didn't jump to line 631, because the condition on line 626 was never true</span>        <span class="key">if</span> <span class="nam">force_single_issue</span> <span class="key">and</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t627" class="pln">            <span class="nam">len</span><span class="op">(</span><span class="nam">rects</span><span class="op">)</span> <span class="op">></span> <span class="num">0</span><span class="strut">&nbsp;</span></p>
<p id="t628" class="pln">            <span class="key">or</span> <span class="nam">len</span><span class="op">(</span><span class="nam">real_issues</span><span class="op">)</span> <span class="op">></span> <span class="num">1</span><span class="strut">&nbsp;</span></p>
<p id="t629" class="pln">            <span class="key">or</span> <span class="op">(</span><span class="nam">len</span><span class="op">(</span><span class="nam">real_issues</span><span class="op">)</span> <span class="op">></span> <span class="num">0</span> <span class="key">and</span> <span class="nam">len</span><span class="op">(</span><span class="nam">issues</span><span class="op">)</span> <span class="op">></span> <span class="num">0</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t630" class="pln">        <span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t631" class="stm mis">            <span class="key">raise</span> <span class="nam">ValueError</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t632" class="pln">                <span class="str">f"Cannot force single issue with a hyper-volumes based function"</span><span class="strut">&nbsp;</span></p>
<p id="t633" class="pln">            <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t634" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t635" class="pln">        <span class="com"># add utilities specified not as hyper-rectangles</span><span class="strut">&nbsp;</span></p>
<p id="t636" class="stm run hide_run">        <span class="nam">u</span> <span class="op">=</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t637" class="stm run hide_run">        <span class="key">if</span> <span class="nam">len</span><span class="op">(</span><span class="nam">issues</span><span class="op">)</span> <span class="op">></span> <span class="num">0</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t638" class="stm par run hide_run"><span class="annotate short">638&#x202F;&#x219B;&#x202F;646</span><span class="annotate long">line 638 didn't jump to line 646, because the condition on line 638 was never false</span>            <span class="key">if</span> <span class="nam">len</span><span class="op">(</span><span class="nam">weights</span><span class="op">)</span> <span class="op">></span> <span class="num">0</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t639" class="stm run hide_run">                <span class="key">for</span> <span class="nam">key</span><span class="op">,</span> <span class="nam">issue</span> <span class="key">in</span> <span class="nam">zip</span><span class="op">(</span><span class="nam">ikeys</span><span class="op">(</span><span class="nam">issues</span><span class="op">)</span><span class="op">,</span> <span class="nam">ivalues</span><span class="op">(</span><span class="nam">issues</span><span class="op">)</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t640" class="stm run hide_run">                    <span class="key">try</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t641" class="stm run hide_run">                        <span class="nam">w</span> <span class="op">=</span> <span class="nam">weights</span><span class="op">[</span><span class="nam">issue_info</span><span class="op">[</span><span class="nam">key</span><span class="op">]</span><span class="op">[</span><span class="str">"index"</span><span class="op">]</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t642" class="stm mis">                    <span class="key">except</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t643" class="stm mis">                        <span class="nam">w</span> <span class="op">=</span> <span class="num">1.0</span><span class="strut">&nbsp;</span></p>
<p id="t644" class="stm run hide_run">                    <span class="key">for</span> <span class="nam">item_key</span> <span class="key">in</span> <span class="nam">ikeys</span><span class="op">(</span><span class="nam">issue</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t645" class="stm run hide_run">                        <span class="nam">issue</span><span class="op">[</span><span class="nam">item_key</span><span class="op">]</span> <span class="op">*=</span> <span class="nam">w</span><span class="strut">&nbsp;</span></p>
<p id="t646" class="stm run hide_run">            <span class="key">if</span> <span class="nam">force_single_issue</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t647" class="stm run hide_run">                <span class="nam">n_outcomes</span> <span class="op">=</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t648" class="stm par run hide_run"><span class="annotate short">648&#x202F;&#x219B;&#x202F;653</span><span class="annotate long">line 648 didn't jump to line 653, because the condition on line 648 was never false</span>                <span class="key">if</span> <span class="nam">max_n_outcomes</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t649" class="stm run hide_run">                    <span class="nam">n_items</span> <span class="op">=</span> <span class="op">[</span><span class="nam">len</span><span class="op">(</span><span class="nam">_</span><span class="op">)</span> <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">ivalues</span><span class="op">(</span><span class="nam">issues</span><span class="op">)</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t650" class="stm run hide_run">                    <span class="nam">n_outcomes</span> <span class="op">=</span> <span class="nam">reduce</span><span class="op">(</span><span class="nam">mul</span><span class="op">,</span> <span class="nam">n_items</span><span class="op">,</span> <span class="num">1</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t651" class="stm par run hide_run"><span class="annotate short">651&#x202F;&#x219B;&#x202F;652</span><span class="annotate long">line 651 didn't jump to line 652, because the condition on line 651 was never true</span>                    <span class="key">if</span> <span class="nam">n_outcomes</span> <span class="op">></span> <span class="nam">max_n_outcomes</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t652" class="stm mis">                        <span class="key">return</span> <span class="key">None</span><span class="op">,</span> <span class="nam">reserved_value</span><span class="op">,</span> <span class="nam">discount_factor</span><span class="strut">&nbsp;</span></p>
<p id="t653" class="stm run hide_run">                <span class="key">if</span> <span class="nam">keep_value_names</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t654" class="stm run hide_run">                    <span class="nam">names</span> <span class="op">=</span> <span class="nam">itertools</span><span class="op">.</span><span class="nam">product</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t655" class="pln">                        <span class="op">*</span><span class="op">[</span><span class="strut">&nbsp;</span></p>
<p id="t656" class="pln">                            <span class="op">[</span><span class="strut">&nbsp;</span></p>
<p id="t657" class="pln">                                <span class="nam">str</span><span class="op">(</span><span class="nam">item_key</span><span class="op">)</span><span class="op">.</span><span class="nam">replace</span><span class="op">(</span><span class="str">"&amp;"</span><span class="op">,</span> <span class="str">"-"</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t658" class="pln">                                <span class="key">for</span> <span class="nam">item_key</span> <span class="key">in</span> <span class="nam">ikeys</span><span class="op">(</span><span class="nam">items</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t659" class="pln">                            <span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t660" class="pln">                            <span class="key">for</span> <span class="nam">issue_key</span><span class="op">,</span> <span class="nam">items</span> <span class="key">in</span> <span class="nam">zip</span><span class="op">(</span><span class="nam">ikeys</span><span class="op">(</span><span class="nam">issues</span><span class="op">)</span><span class="op">,</span> <span class="nam">ivalues</span><span class="op">(</span><span class="nam">issues</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t661" class="pln">                        <span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t662" class="pln">                    <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t663" class="stm run hide_run">                    <span class="nam">names</span> <span class="op">=</span> <span class="nam">map</span><span class="op">(</span><span class="key">lambda</span> <span class="nam">items</span><span class="op">:</span> <span class="op">(</span><span class="str">"+"</span><span class="op">.</span><span class="nam">join</span><span class="op">(</span><span class="nam">items</span><span class="op">)</span><span class="op">,</span><span class="op">)</span><span class="op">,</span> <span class="nam">names</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t664" class="pln">                <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t665" class="stm par run hide_run"><span class="annotate short">665&#x202F;&#x219B;&#x202F;666</span><span class="annotate long">line 665 didn't jump to line 666, because the condition on line 665 was never true</span>                    <span class="key">if</span> <span class="nam">n_outcomes</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t666" class="stm mis">                        <span class="nam">n_items</span> <span class="op">=</span> <span class="op">[</span><span class="nam">len</span><span class="op">(</span><span class="nam">_</span><span class="op">)</span> <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">ivalues</span><span class="op">(</span><span class="nam">issues</span><span class="op">)</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t667" class="stm mis">                        <span class="nam">n_outcomes</span> <span class="op">=</span> <span class="nam">reduce</span><span class="op">(</span><span class="nam">mul</span><span class="op">,</span> <span class="nam">n_items</span><span class="op">,</span> <span class="num">1</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t668" class="stm run hide_run">                    <span class="nam">names</span> <span class="op">=</span> <span class="op">[</span><span class="op">(</span><span class="nam">_</span><span class="op">,</span><span class="op">)</span> <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">n_outcomes</span><span class="op">)</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t669" class="stm run hide_run">                <span class="nam">utils</span> <span class="op">=</span> <span class="nam">itertools</span><span class="op">.</span><span class="nam">product</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t670" class="pln">                    <span class="op">*</span><span class="op">[</span><span class="strut">&nbsp;</span></p>
<p id="t671" class="pln">                        <span class="op">[</span><span class="nam">item_utility</span> <span class="key">for</span> <span class="nam">item_utility</span> <span class="key">in</span> <span class="nam">ivalues</span><span class="op">(</span><span class="nam">items</span><span class="op">)</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t672" class="pln">                        <span class="key">for</span> <span class="nam">issue_key</span><span class="op">,</span> <span class="nam">items</span> <span class="key">in</span> <span class="nam">zip</span><span class="op">(</span><span class="nam">ikeys</span><span class="op">(</span><span class="nam">issues</span><span class="op">)</span><span class="op">,</span> <span class="nam">ivalues</span><span class="op">(</span><span class="nam">issues</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t673" class="pln">                    <span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t674" class="pln">                <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t675" class="stm run hide_run">                <span class="nam">utils</span> <span class="op">=</span> <span class="nam">map</span><span class="op">(</span><span class="key">lambda</span> <span class="nam">vals</span><span class="op">:</span> <span class="nam">sum</span><span class="op">(</span><span class="nam">vals</span><span class="op">)</span><span class="op">,</span> <span class="nam">utils</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t676" class="stm run hide_run">                <span class="key">if</span> <span class="nam">normalize_utility</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t677" class="stm run hide_run">                    <span class="nam">utils</span> <span class="op">=</span> <span class="nam">list</span><span class="op">(</span><span class="nam">utils</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t678" class="stm run hide_run">                    <span class="nam">umax</span><span class="op">,</span> <span class="nam">umin</span> <span class="op">=</span> <span class="nam">max</span><span class="op">(</span><span class="nam">utils</span><span class="op">)</span><span class="op">,</span> <span class="nam">min</span><span class="op">(</span><span class="nam">utils</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t679" class="stm par run hide_run"><span class="annotate short">679&#x202F;&#x219B;&#x202F;681</span><span class="annotate long">line 679 didn't jump to line 681, because the condition on line 679 was never false</span>                    <span class="key">if</span> <span class="nam">umax</span> <span class="op">!=</span> <span class="nam">umin</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t680" class="stm run hide_run">                        <span class="nam">utils</span> <span class="op">=</span> <span class="op">[</span><span class="op">(</span><span class="nam">_</span> <span class="op">-</span> <span class="nam">umin</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="nam">umax</span> <span class="op">-</span> <span class="nam">umin</span><span class="op">)</span> <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">utils</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t681" class="stm run hide_run">                <span class="key">if</span> <span class="nam">keep_issue_names</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t682" class="stm run hide_run">                    <span class="nam">u</span> <span class="op">=</span> <span class="nam">MappingUtilityFunction</span><span class="op">(</span><span class="nam">dict</span><span class="op">(</span><span class="nam">zip</span><span class="op">(</span><span class="nam">names</span><span class="op">,</span> <span class="nam">utils</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t683" class="pln">                <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t684" class="stm run hide_run">                    <span class="nam">u</span> <span class="op">=</span> <span class="nam">MappingUtilityFunction</span><span class="op">(</span><span class="nam">dict</span><span class="op">(</span><span class="nam">zip</span><span class="op">(</span><span class="nam">names</span><span class="op">,</span> <span class="nam">utils</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t685" class="pln">            <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t686" class="stm run hide_run">                <span class="nam">utils</span> <span class="op">=</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t687" class="stm run hide_run">                <span class="key">if</span> <span class="nam">normalize_utility</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t688" class="stm run hide_run">                    <span class="nam">utils</span> <span class="op">=</span> <span class="nam">itertools</span><span class="op">.</span><span class="nam">product</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t689" class="pln">                        <span class="op">*</span><span class="op">[</span><span class="strut">&nbsp;</span></p>
<p id="t690" class="pln">                            <span class="op">[</span><span class="nam">item_utility</span> <span class="key">for</span> <span class="nam">item_utility</span> <span class="key">in</span> <span class="nam">ivalues</span><span class="op">(</span><span class="nam">items</span><span class="op">)</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t691" class="pln">                            <span class="key">for</span> <span class="nam">issue_key</span><span class="op">,</span> <span class="nam">items</span> <span class="key">in</span> <span class="nam">zip</span><span class="op">(</span><span class="nam">ikeys</span><span class="op">(</span><span class="nam">issues</span><span class="op">)</span><span class="op">,</span> <span class="nam">ivalues</span><span class="op">(</span><span class="nam">issues</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t692" class="pln">                        <span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t693" class="pln">                    <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t694" class="stm run hide_run">                    <span class="nam">utils</span> <span class="op">=</span> <span class="nam">list</span><span class="op">(</span><span class="nam">map</span><span class="op">(</span><span class="key">lambda</span> <span class="nam">vals</span><span class="op">:</span> <span class="nam">sum</span><span class="op">(</span><span class="nam">vals</span><span class="op">)</span><span class="op">,</span> <span class="nam">utils</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t695" class="stm run hide_run">                    <span class="nam">umax</span><span class="op">,</span> <span class="nam">umin</span> <span class="op">=</span> <span class="nam">max</span><span class="op">(</span><span class="nam">utils</span><span class="op">)</span><span class="op">,</span> <span class="nam">min</span><span class="op">(</span><span class="nam">utils</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t696" class="stm run hide_run">                    <span class="nam">factor</span> <span class="op">=</span> <span class="nam">umax</span> <span class="op">-</span> <span class="nam">umin</span><span class="strut">&nbsp;</span></p>
<p id="t697" class="stm par run hide_run"><span class="annotate short">697&#x202F;&#x219B;&#x202F;700</span><span class="annotate long">line 697 didn't jump to line 700, because the condition on line 697 was never false</span>                    <span class="key">if</span> <span class="nam">factor</span> <span class="op">></span> <span class="num">1e-8</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t698" class="stm run hide_run">                        <span class="nam">offset</span> <span class="op">=</span> <span class="op">(</span><span class="nam">umin</span> <span class="op">/</span> <span class="nam">len</span><span class="op">(</span><span class="nam">issues</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="nam">factor</span><span class="strut">&nbsp;</span></p>
<p id="t699" class="pln">                    <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t700" class="stm mis">                        <span class="nam">offset</span> <span class="op">=</span> <span class="num">0.0</span><span class="strut">&nbsp;</span></p>
<p id="t701" class="stm mis">                        <span class="nam">factor</span> <span class="op">=</span> <span class="num">1.0</span><span class="strut">&nbsp;</span></p>
<p id="t702" class="stm run hide_run">                    <span class="key">for</span> <span class="nam">key</span><span class="op">,</span> <span class="nam">issue</span> <span class="key">in</span> <span class="nam">ienumerate</span><span class="op">(</span><span class="nam">issues</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t703" class="stm run hide_run">                        <span class="key">for</span> <span class="nam">item_key</span> <span class="key">in</span> <span class="nam">ikeys</span><span class="op">(</span><span class="nam">issue</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t704" class="stm run hide_run">                            <span class="nam">issues</span><span class="op">[</span><span class="nam">key</span><span class="op">]</span><span class="op">[</span><span class="nam">item_key</span><span class="op">]</span> <span class="op">=</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t705" class="pln">                                <span class="nam">issues</span><span class="op">[</span><span class="nam">key</span><span class="op">]</span><span class="op">[</span><span class="nam">item_key</span><span class="op">]</span> <span class="op">/</span> <span class="nam">factor</span> <span class="op">-</span> <span class="nam">offset</span><span class="strut">&nbsp;</span></p>
<p id="t706" class="pln">                            <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t707" class="stm run hide_run">                <span class="key">if</span> <span class="nam">len</span><span class="op">(</span><span class="nam">issues</span><span class="op">)</span> <span class="op">></span> <span class="num">1</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t708" class="stm run hide_run">                    <span class="nam">u</span> <span class="op">=</span> <span class="nam">LinearUtilityAggregationFunction</span><span class="op">(</span><span class="nam">issue_utilities</span><span class="op">=</span><span class="nam">issues</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t709" class="pln">                <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t710" class="stm run hide_run">                    <span class="nam">first_key</span> <span class="op">=</span> <span class="nam">list</span><span class="op">(</span><span class="nam">ikeys</span><span class="op">(</span><span class="nam">issues</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t711" class="stm par run hide_run"><span class="annotate short">711&#x202F;&#x219B;&#x202F;712</span><span class="annotate long">line 711 didn't jump to line 712, because the condition on line 711 was never true</span>                    <span class="key">if</span> <span class="nam">utils</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t712" class="stm mis">                        <span class="nam">utils</span> <span class="op">=</span> <span class="nam">ivalues</span><span class="op">(</span><span class="nam">issues</span><span class="op">[</span><span class="nam">first_key</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t713" class="stm run hide_run">                    <span class="key">if</span> <span class="nam">keep_issue_names</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t714" class="stm run hide_run">                        <span class="nam">u</span> <span class="op">=</span> <span class="nam">MappingUtilityFunction</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t715" class="pln">                            <span class="nam">dict</span><span class="op">(</span><span class="nam">zip</span><span class="op">(</span><span class="op">[</span><span class="op">(</span><span class="nam">_</span><span class="op">,</span><span class="op">)</span> <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">ikeys</span><span class="op">(</span><span class="nam">issues</span><span class="op">[</span><span class="nam">first_key</span><span class="op">]</span><span class="op">)</span><span class="op">]</span><span class="op">,</span> <span class="nam">utils</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t716" class="pln">                        <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t717" class="pln">                    <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t718" class="stm run hide_run">                        <span class="nam">u</span> <span class="op">=</span> <span class="nam">MappingUtilityFunction</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t719" class="pln">                            <span class="nam">dict</span><span class="op">(</span><span class="nam">zip</span><span class="op">(</span><span class="op">[</span><span class="op">(</span><span class="nam">_</span><span class="op">,</span><span class="op">)</span> <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">len</span><span class="op">(</span><span class="nam">utils</span><span class="op">)</span><span class="op">)</span><span class="op">]</span><span class="op">,</span> <span class="nam">utils</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t720" class="pln">                        <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t721" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t722" class="pln">        <span class="com"># add real_valued issues</span><span class="strut">&nbsp;</span></p>
<p id="t723" class="stm par run hide_run"><span class="annotate short">723&#x202F;&#x219B;&#x202F;724</span><span class="annotate long">line 723 didn't jump to line 724, because the condition on line 723 was never true</span>        <span class="key">if</span> <span class="nam">len</span><span class="op">(</span><span class="nam">real_issues</span><span class="op">)</span> <span class="op">></span> <span class="num">0</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t724" class="stm mis">            <span class="key">if</span> <span class="nam">len</span><span class="op">(</span><span class="nam">weights</span><span class="op">)</span> <span class="op">></span> <span class="num">0</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t725" class="stm mis">                <span class="key">for</span> <span class="nam">key</span><span class="op">,</span> <span class="nam">issue</span> <span class="key">in</span> <span class="nam">zip</span><span class="op">(</span><span class="nam">ikeys</span><span class="op">(</span><span class="nam">real_issues</span><span class="op">)</span><span class="op">,</span> <span class="nam">ivalues</span><span class="op">(</span><span class="nam">real_issues</span><span class="op">)</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t726" class="stm mis">                    <span class="key">try</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t727" class="stm mis">                        <span class="nam">w</span> <span class="op">=</span> <span class="nam">weights</span><span class="op">[</span><span class="nam">issue_info</span><span class="op">[</span><span class="nam">key</span><span class="op">]</span><span class="op">[</span><span class="str">"index"</span><span class="op">]</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t728" class="stm mis">                    <span class="key">except</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t729" class="stm mis">                        <span class="nam">w</span> <span class="op">=</span> <span class="num">1.0</span><span class="strut">&nbsp;</span></p>
<p id="t730" class="stm mis">                    <span class="nam">issue</span><span class="op">[</span><span class="str">"fun_final"</span><span class="op">]</span> <span class="op">=</span> <span class="key">lambda</span> <span class="nam">x</span><span class="op">:</span> <span class="nam">w</span> <span class="op">*</span> <span class="nam">issue</span><span class="op">[</span><span class="str">"fun"</span><span class="op">]</span><span class="op">(</span><span class="nam">x</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t731" class="stm mis">            <span class="key">if</span> <span class="nam">normalize_utility</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t732" class="stm mis">                <span class="nam">n_items_to_test</span> <span class="op">=</span> <span class="num">10</span><span class="strut">&nbsp;</span></p>
<p id="t733" class="stm mis">                <span class="nam">utils</span> <span class="op">=</span> <span class="nam">itertools</span><span class="op">.</span><span class="nam">product</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t734" class="pln">                    <span class="op">*</span><span class="op">[</span><span class="strut">&nbsp;</span></p>
<p id="t735" class="pln">                        <span class="op">[</span><span class="strut">&nbsp;</span></p>
<p id="t736" class="pln">                            <span class="nam">issue</span><span class="op">[</span><span class="str">"fun"</span><span class="op">]</span><span class="op">(</span><span class="nam">_</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t737" class="pln">                            <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">np</span><span class="op">.</span><span class="nam">linspace</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t738" class="pln">                                <span class="nam">issue</span><span class="op">[</span><span class="str">"range"</span><span class="op">]</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t739" class="pln">                                <span class="nam">issue</span><span class="op">[</span><span class="str">"range"</span><span class="op">]</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t740" class="pln">                                <span class="nam">num</span><span class="op">=</span><span class="nam">n_items_to_test</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t741" class="pln">                                <span class="nam">endpoint</span><span class="op">=</span><span class="key">True</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t742" class="pln">                            <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t743" class="pln">                        <span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t744" class="pln">                        <span class="key">for</span> <span class="nam">key</span><span class="op">,</span> <span class="nam">issue</span> <span class="key">in</span> <span class="nam">zip</span><span class="op">(</span><span class="nam">ikeys</span><span class="op">(</span><span class="nam">real_issues</span><span class="op">)</span><span class="op">,</span> <span class="nam">ivalues</span><span class="op">(</span><span class="nam">real_issues</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t745" class="pln">                    <span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t746" class="pln">                <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t747" class="stm mis">                <span class="nam">utils</span> <span class="op">=</span> <span class="nam">list</span><span class="op">(</span><span class="nam">map</span><span class="op">(</span><span class="key">lambda</span> <span class="nam">vals</span><span class="op">:</span> <span class="nam">sum</span><span class="op">(</span><span class="nam">vals</span><span class="op">)</span><span class="op">,</span> <span class="nam">utils</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t748" class="stm mis">                <span class="nam">umax</span><span class="op">,</span> <span class="nam">umin</span> <span class="op">=</span> <span class="nam">max</span><span class="op">(</span><span class="nam">utils</span><span class="op">)</span><span class="op">,</span> <span class="nam">min</span><span class="op">(</span><span class="nam">utils</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t749" class="stm mis">                <span class="nam">factor</span> <span class="op">=</span> <span class="nam">umax</span> <span class="op">-</span> <span class="nam">umin</span><span class="strut">&nbsp;</span></p>
<p id="t750" class="stm mis">                <span class="key">if</span> <span class="nam">factor</span> <span class="op">></span> <span class="num">1e-8</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t751" class="stm mis">                    <span class="nam">offset</span> <span class="op">=</span> <span class="op">(</span><span class="nam">umin</span> <span class="op">/</span> <span class="nam">len</span><span class="op">(</span><span class="nam">real_issues</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="nam">factor</span><span class="strut">&nbsp;</span></p>
<p id="t752" class="pln">                <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t753" class="stm mis">                    <span class="nam">offset</span> <span class="op">=</span> <span class="num">0.0</span><span class="strut">&nbsp;</span></p>
<p id="t754" class="stm mis">                    <span class="nam">factor</span> <span class="op">=</span> <span class="num">1.0</span><span class="strut">&nbsp;</span></p>
<p id="t755" class="stm mis">                <span class="key">for</span> <span class="nam">key</span><span class="op">,</span> <span class="nam">issue</span> <span class="key">in</span> <span class="nam">real_issues</span><span class="op">.</span><span class="nam">items</span><span class="op">(</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t756" class="stm mis">                    <span class="nam">issue</span><span class="op">[</span><span class="str">"fun_final"</span><span class="op">]</span> <span class="op">=</span> <span class="key">lambda</span> <span class="nam">x</span><span class="op">:</span> <span class="nam">w</span> <span class="op">*</span> <span class="nam">issue</span><span class="op">[</span><span class="str">"fun"</span><span class="op">]</span><span class="op">(</span><span class="nam">x</span><span class="op">)</span> <span class="op">/</span> <span class="nam">factor</span> <span class="op">-</span> <span class="nam">offset</span><span class="strut">&nbsp;</span></p>
<p id="t757" class="stm mis">            <span class="nam">u_real</span> <span class="op">=</span> <span class="nam">LinearUtilityAggregationFunction</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t758" class="pln">                <span class="nam">issue_utilities</span><span class="op">=</span><span class="op">{</span><span class="nam">_</span><span class="op">[</span><span class="str">"key"</span><span class="op">]</span><span class="op">:</span> <span class="nam">_</span><span class="op">[</span><span class="str">"fun_final"</span><span class="op">]</span> <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">real_issues</span><span class="op">.</span><span class="nam">values</span><span class="op">(</span><span class="op">)</span><span class="op">}</span><span class="strut">&nbsp;</span></p>
<p id="t759" class="pln">            <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t760" class="stm mis">            <span class="key">if</span> <span class="nam">u</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t761" class="stm mis">                <span class="nam">u</span> <span class="op">=</span> <span class="nam">u_real</span><span class="strut">&nbsp;</span></p>
<p id="t762" class="pln">            <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t763" class="stm mis">                <span class="nam">u</span> <span class="op">=</span> <span class="nam">ComplexWeightedUtilityFunction</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t764" class="pln">                    <span class="nam">ufuns</span><span class="op">=</span><span class="op">[</span><span class="nam">u</span><span class="op">,</span> <span class="nam">u_real</span><span class="op">]</span><span class="op">,</span> <span class="nam">weights</span><span class="op">=</span><span class="op">[</span><span class="num">1.0</span><span class="op">,</span> <span class="num">1.0</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t765" class="pln">                <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t766" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t767" class="pln">        <span class="com"># add hyper rectangles issues</span><span class="strut">&nbsp;</span></p>
<p id="t768" class="stm run hide_run">        <span class="key">if</span> <span class="nam">len</span><span class="op">(</span><span class="nam">rects</span><span class="op">)</span> <span class="op">></span> <span class="num">0</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t769" class="stm run hide_run">            <span class="nam">uhyper</span> <span class="op">=</span> <span class="nam">HyperRectangleUtilityFunction</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t770" class="pln">                <span class="nam">outcome_ranges</span><span class="op">=</span><span class="nam">rects</span><span class="op">,</span> <span class="nam">utilities</span><span class="op">=</span><span class="nam">rect_utils</span><span class="strut">&nbsp;</span></p>
<p id="t771" class="pln">            <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t772" class="stm par run hide_run"><span class="annotate short">772&#x202F;&#x219B;&#x202F;775</span><span class="annotate long">line 772 didn't jump to line 775, because the condition on line 772 was never false</span>            <span class="key">if</span> <span class="nam">u</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t773" class="stm run hide_run">                <span class="nam">u</span> <span class="op">=</span> <span class="nam">uhyper</span><span class="strut">&nbsp;</span></p>
<p id="t774" class="pln">            <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t775" class="stm mis">                <span class="nam">u</span> <span class="op">=</span> <span class="nam">ComplexWeightedUtilityFunction</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t776" class="pln">                    <span class="nam">ufuns</span><span class="op">=</span><span class="op">[</span><span class="nam">u</span><span class="op">,</span> <span class="nam">uhyper</span><span class="op">]</span><span class="op">,</span> <span class="nam">weights</span><span class="op">=</span><span class="op">[</span><span class="num">1.0</span><span class="op">,</span> <span class="num">1.0</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t777" class="pln">                <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t778" class="stm par run hide_run"><span class="annotate short">778&#x202F;&#x219B;&#x202F;780</span><span class="annotate long">line 778 didn't jump to line 780, because the condition on line 778 was never false</span>        <span class="key">if</span> <span class="nam">reserved_value</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span> <span class="key">and</span> <span class="key">not</span> <span class="nam">ignore_reserved</span> <span class="key">and</span> <span class="nam">u</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t779" class="stm run hide_run">            <span class="nam">u</span><span class="op">.</span><span class="nam">reserved_value</span> <span class="op">=</span> <span class="nam">reserved_value</span><span class="strut">&nbsp;</span></p>
<p id="t780" class="stm par run hide_run"><span class="annotate short">780&#x202F;&#x219B;&#x202F;781</span><span class="annotate long">line 780 didn't jump to line 781, because the condition on line 780 was never true</span>        <span class="key">if</span> <span class="nam">ignore_discount</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t781" class="stm mis">            <span class="nam">discount_factor</span> <span class="op">=</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t782" class="stm run hide_run">        <span class="key">return</span> <span class="nam">u</span><span class="op">,</span> <span class="nam">discount_factor</span><span class="strut">&nbsp;</span></p>
<p id="t783" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t784" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__getitem__</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">offer</span><span class="op">:</span> <span class="nam">Outcome</span><span class="op">)</span> <span class="op">-></span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">UtilityValue</span><span class="op">]</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t785" class="pln">        <span class="str">"""Overrides [] operator to call the ufun allowing it to act as a mapping"""</span><span class="strut">&nbsp;</span></p>
<p id="t786" class="stm mis">        <span class="key">return</span> <span class="nam">self</span><span class="op">(</span><span class="nam">offer</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t787" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t788" class="stm run hide_run">    <span class="op">@</span><span class="nam">abstractmethod</span><span class="strut">&nbsp;</span></p>
<p id="t789" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__call__</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">offer</span><span class="op">:</span> <span class="nam">Outcome</span><span class="op">)</span> <span class="op">-></span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">UtilityValue</span><span class="op">]</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t790" class="pln">        <span class="str">"""Calculate the utility_function value for a given outcome.</span><span class="strut">&nbsp;</span></p>
<p id="t791" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t792" class="pln"><span class="str">        Args:</span><span class="strut">&nbsp;</span></p>
<p id="t793" class="pln"><span class="str">            offer: The offer to be evaluated.</span><span class="strut">&nbsp;</span></p>
<p id="t794" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t795" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t796" class="pln"><span class="str">        Remarks:</span><span class="strut">&nbsp;</span></p>
<p id="t797" class="pln"><span class="str">            - You cannot return None from overriden apply() functions but raise an exception (ValueError) if it was</span><span class="strut">&nbsp;</span></p>
<p id="t798" class="pln"><span class="str">              not possible to calculate the UtilityValue.</span><span class="strut">&nbsp;</span></p>
<p id="t799" class="pln"><span class="str">            - Return A UtilityValue not a float for real-valued utilities for the benefit of inspection code.</span><span class="strut">&nbsp;</span></p>
<p id="t800" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t801" class="pln"><span class="str">        Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t802" class="pln"><span class="str">            UtilityValue: The utility_function value which may be a distribution. If `None` it means the utility_function value cannot be</span><span class="strut">&nbsp;</span></p>
<p id="t803" class="pln"><span class="str">            calculated.</span><span class="strut">&nbsp;</span></p>
<p id="t804" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t805" class="stm mis">        <span class="key">if</span> <span class="nam">offer</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t806" class="stm mis">            <span class="key">return</span> <span class="nam">self</span><span class="op">.</span><span class="nam">reserved_value</span><span class="strut">&nbsp;</span></p>
<p id="t807" class="stm mis">        <span class="key">return</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t808" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t809" class="stm run hide_run">    <span class="op">@</span><span class="nam">classmethod</span><span class="strut">&nbsp;</span></p>
<p id="t810" class="stm run hide_run">    <span class="key">def</span> <span class="nam">approximate</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t811" class="pln">        <span class="nam">cls</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t812" class="pln">        <span class="nam">ufuns</span><span class="op">:</span> <span class="nam">List</span><span class="op">[</span><span class="str">"UtilityFunction"</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t813" class="pln">        <span class="nam">issues</span><span class="op">:</span> <span class="nam">Iterable</span><span class="op">[</span><span class="str">"Issue"</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t814" class="pln">        <span class="nam">n_outcomes</span><span class="op">:</span> <span class="nam">int</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t815" class="pln">        <span class="nam">min_per_dim</span><span class="op">=</span><span class="num">5</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t816" class="pln">        <span class="nam">force_single_issue</span><span class="op">=</span><span class="key">False</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t817" class="pln">    <span class="op">)</span> <span class="op">-></span> <span class="nam">Tuple</span><span class="op">[</span><span class="nam">List</span><span class="op">[</span><span class="str">"MappingUtilityFunction"</span><span class="op">]</span><span class="op">,</span> <span class="nam">List</span><span class="op">[</span><span class="str">"Outcome"</span><span class="op">]</span><span class="op">,</span> <span class="nam">List</span><span class="op">[</span><span class="str">"Issue"</span><span class="op">]</span><span class="op">]</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t818" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t819" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t820" class="pln"><span class="str">        Args:</span><span class="strut">&nbsp;</span></p>
<p id="t821" class="pln"><span class="str">            cls:</span><span class="strut">&nbsp;</span></p>
<p id="t822" class="pln"><span class="str">            ufuns:</span><span class="strut">&nbsp;</span></p>
<p id="t823" class="pln"><span class="str">            issues:</span><span class="strut">&nbsp;</span></p>
<p id="t824" class="pln"><span class="str">            n_outcomes:</span><span class="strut">&nbsp;</span></p>
<p id="t825" class="pln"><span class="str">            min_per_dim:</span><span class="strut">&nbsp;</span></p>
<p id="t826" class="pln"><span class="str">            force_single_issue:</span><span class="strut">&nbsp;</span></p>
<p id="t827" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t828" class="pln"><span class="str">        Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t829" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t830" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t831" class="stm mis">        <span class="nam">issues</span> <span class="op">=</span> <span class="nam">list</span><span class="op">(</span><span class="nam">issues</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t832" class="stm mis">        <span class="nam">outcomes</span> <span class="op">=</span> <span class="nam">sample_outcomes</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t833" class="pln">            <span class="nam">issues</span><span class="op">=</span><span class="nam">issues</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t834" class="pln">            <span class="nam">keep_issue_names</span><span class="op">=</span><span class="key">False</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t835" class="pln">            <span class="nam">min_per_dim</span><span class="op">=</span><span class="nam">min_per_dim</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t836" class="pln">            <span class="nam">expansion_policy</span><span class="op">=</span><span class="str">"null"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t837" class="pln">            <span class="nam">n_outcomes</span><span class="op">=</span><span class="nam">n_outcomes</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t838" class="pln">        <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t839" class="stm mis">        <span class="key">if</span> <span class="nam">force_single_issue</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t840" class="stm mis">            <span class="nam">output_outcomes</span> <span class="op">=</span> <span class="op">[</span><span class="op">(</span><span class="nam">_</span><span class="op">,</span><span class="op">)</span> <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">n_outcomes</span><span class="op">)</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t841" class="stm mis">            <span class="nam">output_issues</span> <span class="op">=</span> <span class="op">[</span><span class="nam">Issue</span><span class="op">(</span><span class="nam">values</span><span class="op">=</span><span class="nam">len</span><span class="op">(</span><span class="nam">output_outcomes</span><span class="op">)</span><span class="op">)</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t842" class="pln">        <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t843" class="stm mis">            <span class="nam">output_outcomes</span> <span class="op">=</span> <span class="nam">outcomes</span><span class="strut">&nbsp;</span></p>
<p id="t844" class="stm mis">            <span class="nam">issue_values</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t845" class="stm mis">            <span class="key">for</span> <span class="nam">i</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">len</span><span class="op">(</span><span class="nam">issues</span><span class="op">)</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t846" class="stm mis">                <span class="nam">vals</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">unique</span><span class="op">(</span><span class="nam">np</span><span class="op">.</span><span class="nam">array</span><span class="op">(</span><span class="op">[</span><span class="nam">_</span><span class="op">[</span><span class="nam">i</span><span class="op">]</span> <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">outcomes</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">.</span><span class="nam">tolist</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t847" class="stm mis">                <span class="nam">issue_values</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">vals</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t848" class="stm mis">            <span class="nam">output_issues</span> <span class="op">=</span> <span class="op">[</span><span class="strut">&nbsp;</span></p>
<p id="t849" class="pln">                <span class="nam">Issue</span><span class="op">(</span><span class="nam">name</span><span class="op">=</span><span class="nam">issue</span><span class="op">.</span><span class="nam">name</span><span class="op">,</span> <span class="nam">values</span><span class="op">=</span><span class="nam">issue_vals</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t850" class="pln">                <span class="key">for</span> <span class="nam">issue</span><span class="op">,</span> <span class="nam">issue_vals</span> <span class="key">in</span> <span class="nam">zip</span><span class="op">(</span><span class="nam">issues</span><span class="op">,</span> <span class="nam">issue_values</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t851" class="pln">            <span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t852" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t853" class="stm mis">        <span class="nam">utils</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t854" class="stm mis">        <span class="key">for</span> <span class="nam">ufun</span> <span class="key">in</span> <span class="nam">ufuns</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t855" class="stm mis">            <span class="nam">u</span> <span class="op">=</span> <span class="op">[</span><span class="nam">ufun</span><span class="op">(</span><span class="nam">o</span><span class="op">)</span> <span class="key">for</span> <span class="nam">o</span> <span class="key">in</span> <span class="nam">outcomes</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t856" class="stm mis">            <span class="nam">utils</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">MappingUtilityFunction</span><span class="op">(</span><span class="nam">mapping</span><span class="op">=</span><span class="nam">dict</span><span class="op">(</span><span class="nam">zip</span><span class="op">(</span><span class="nam">output_outcomes</span><span class="op">,</span> <span class="nam">u</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t857" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t858" class="stm mis">        <span class="key">return</span> <span class="nam">utils</span><span class="op">,</span> <span class="nam">output_outcomes</span><span class="op">,</span> <span class="nam">output_issues</span><span class="strut">&nbsp;</span></p>
<p id="t859" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t860" class="stm run hide_run">    <span class="key">def</span> <span class="nam">compare_real</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">o1</span><span class="op">:</span> <span class="nam">Outcome</span><span class="op">,</span> <span class="nam">o2</span><span class="op">:</span> <span class="nam">Outcome</span><span class="op">)</span> <span class="op">-></span> <span class="nam">float</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t861" class="pln">        <span class="str">"""Compares the two outcomes and returns a measure of the difference between their utilities"""</span><span class="strut">&nbsp;</span></p>
<p id="t862" class="stm mis">        <span class="nam">u1</span><span class="op">,</span> <span class="nam">u2</span> <span class="op">=</span> <span class="nam">self</span><span class="op">(</span><span class="nam">o1</span><span class="op">)</span><span class="op">,</span> <span class="nam">self</span><span class="op">(</span><span class="nam">o2</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t863" class="stm mis">        <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">u1</span><span class="op">,</span> <span class="nam">float</span><span class="op">)</span> <span class="key">and</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">u2</span><span class="op">,</span> <span class="nam">float</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t864" class="stm mis">            <span class="key">return</span> <span class="nam">u1</span> <span class="op">-</span> <span class="nam">u2</span><span class="strut">&nbsp;</span></p>
<p id="t865" class="exc">        <span class="key">raise</span> <span class="nam">NotImplementedError</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t866" class="pln">            <span class="str">"Should calculate the integration [(u1-u2) du1 du2] but not implemented yet."</span><span class="strut">&nbsp;</span></p>
<p id="t867" class="pln">        <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t868" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t869" class="stm run hide_run">    <span class="key">def</span> <span class="nam">rank_with_weights</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t870" class="pln">        <span class="nam">self</span><span class="op">,</span> <span class="nam">outcomes</span><span class="op">:</span> <span class="nam">List</span><span class="op">[</span><span class="nam">Optional</span><span class="op">[</span><span class="nam">Outcome</span><span class="op">]</span><span class="op">]</span><span class="op">,</span> <span class="nam">descending</span><span class="op">=</span><span class="key">True</span><span class="strut">&nbsp;</span></p>
<p id="t871" class="pln">    <span class="op">)</span> <span class="op">-></span> <span class="nam">List</span><span class="op">[</span><span class="nam">Tuple</span><span class="op">[</span><span class="nam">int</span><span class="op">,</span> <span class="nam">float</span><span class="op">]</span><span class="op">]</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t872" class="pln">        <span class="str">"""Ranks the given list of outcomes with weights. None stands for the null outcome.</span><span class="strut">&nbsp;</span></p>
<p id="t873" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t874" class="pln"><span class="str">        Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t875" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t876" class="pln"><span class="str">            - A list of tuples each with two values:</span><span class="strut">&nbsp;</span></p>
<p id="t877" class="pln"><span class="str">                - an integer giving the index in the input array (outcomes) of an outcome</span><span class="strut">&nbsp;</span></p>
<p id="t878" class="pln"><span class="str">                - the weight of that outcome</span><span class="strut">&nbsp;</span></p>
<p id="t879" class="pln"><span class="str">            - The list is sorted by weights descendingly</span><span class="strut">&nbsp;</span></p>
<p id="t880" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t881" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t882" class="stm mis">        <span class="key">return</span> <span class="nam">sorted</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t883" class="pln">            <span class="nam">zip</span><span class="op">(</span><span class="nam">list</span><span class="op">(</span><span class="nam">range</span><span class="op">(</span><span class="nam">len</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">,</span> <span class="op">[</span><span class="nam">float</span><span class="op">(</span><span class="nam">self</span><span class="op">(</span><span class="nam">o</span><span class="op">)</span><span class="op">)</span> <span class="key">for</span> <span class="nam">o</span> <span class="key">in</span> <span class="nam">outcomes</span><span class="op">]</span><span class="op">)</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t884" class="pln">            <span class="nam">key</span><span class="op">=</span><span class="key">lambda</span> <span class="nam">x</span><span class="op">:</span> <span class="nam">x</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t885" class="pln">            <span class="nam">reverse</span><span class="op">=</span><span class="nam">descending</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t886" class="pln">        <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t887" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t888" class="stm run hide_run">    <span class="key">def</span> <span class="nam">argsort</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">outcomes</span><span class="op">:</span> <span class="nam">List</span><span class="op">[</span><span class="nam">Optional</span><span class="op">[</span><span class="nam">Outcome</span><span class="op">]</span><span class="op">]</span><span class="op">,</span> <span class="nam">descending</span><span class="op">=</span><span class="key">True</span><span class="op">)</span> <span class="op">-></span> <span class="nam">List</span><span class="op">[</span><span class="nam">int</span><span class="op">]</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t889" class="pln">        <span class="str">"""Ranks the given list of outcomes. None stands for the null outcome"""</span><span class="strut">&nbsp;</span></p>
<p id="t890" class="stm mis">        <span class="key">return</span> <span class="op">[</span><span class="nam">_</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">rank_with_weight</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">,</span> <span class="nam">descending</span><span class="op">=</span><span class="nam">descending</span><span class="op">)</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t891" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t892" class="stm run hide_run">    <span class="key">def</span> <span class="nam">sort</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t893" class="pln">        <span class="nam">self</span><span class="op">,</span> <span class="nam">outcomes</span><span class="op">:</span> <span class="nam">List</span><span class="op">[</span><span class="nam">Optional</span><span class="op">[</span><span class="nam">Outcome</span><span class="op">]</span><span class="op">]</span><span class="op">,</span> <span class="nam">descending</span><span class="op">=</span><span class="key">True</span><span class="strut">&nbsp;</span></p>
<p id="t894" class="pln">    <span class="op">)</span> <span class="op">-></span> <span class="nam">List</span><span class="op">[</span><span class="nam">Optional</span><span class="op">[</span><span class="nam">Outcome</span><span class="op">]</span><span class="op">]</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t895" class="pln">        <span class="str">"""Sorts the given outcomes in place in ascending or descending order of utility value.</span><span class="strut">&nbsp;</span></p>
<p id="t896" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t897" class="pln"><span class="str">        Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t898" class="pln"><span class="str">            Returns the input list after being sorted. Notice that the array is sorted in-place</span><span class="strut">&nbsp;</span></p>
<p id="t899" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t900" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t901" class="stm mis">        <span class="nam">outcomes</span><span class="op">.</span><span class="nam">sort</span><span class="op">(</span><span class="nam">key</span><span class="op">=</span><span class="key">lambda</span> <span class="nam">x</span><span class="op">:</span> <span class="nam">self</span><span class="op">(</span><span class="nam">x</span><span class="op">)</span><span class="op">,</span> <span class="nam">reverse</span><span class="op">=</span><span class="nam">descending</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t902" class="stm mis">        <span class="key">return</span> <span class="nam">outcomes</span><span class="strut">&nbsp;</span></p>
<p id="t903" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t904" class="stm run hide_run">    <span class="nam">rank</span> <span class="op">=</span> <span class="nam">argsort</span><span class="strut">&nbsp;</span></p>
<p id="t905" class="pln">    <span class="str">"""Ranks the given list of outcomes. None stands for the null outcome"""</span><span class="strut">&nbsp;</span></p>
<p id="t906" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t907" class="stm run hide_run">    <span class="key">def</span> <span class="nam">is_better</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t908" class="pln">        <span class="nam">self</span><span class="op">,</span> <span class="nam">first</span><span class="op">:</span> <span class="nam">Outcome</span><span class="op">,</span> <span class="nam">second</span><span class="op">:</span> <span class="nam">Outcome</span><span class="op">,</span> <span class="nam">epsilon</span><span class="op">=</span><span class="num">1e-10</span><span class="strut">&nbsp;</span></p>
<p id="t909" class="pln">    <span class="op">)</span> <span class="op">-></span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">bool</span><span class="op">]</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t910" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t911" class="pln"><span class="str">        Compares two offers using the `ufun` returning whether the first is better than the second</span><span class="strut">&nbsp;</span></p>
<p id="t912" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t913" class="pln"><span class="str">        Args:</span><span class="strut">&nbsp;</span></p>
<p id="t914" class="pln"><span class="str">            first: First outcome to be compared</span><span class="strut">&nbsp;</span></p>
<p id="t915" class="pln"><span class="str">            second: Second outcome to be compared</span><span class="strut">&nbsp;</span></p>
<p id="t916" class="pln"><span class="str">            epsilon: comparison threshold. If the utility difference within the range [-epsilon, epsilon] the two</span><span class="strut">&nbsp;</span></p>
<p id="t917" class="pln"><span class="str">                     outcomes are assumed to be compatible</span><span class="strut">&nbsp;</span></p>
<p id="t918" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t919" class="pln"><span class="str">        Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t920" class="pln"><span class="str">            True if utility(first) > utility(second) + epsilon</span><span class="strut">&nbsp;</span></p>
<p id="t921" class="pln"><span class="str">            None if |utility(first) - utility(second)| &lt;= epsilon</span><span class="strut">&nbsp;</span></p>
<p id="t922" class="pln"><span class="str">            False if utility(first) &lt; utility(second) - epsilon</span><span class="strut">&nbsp;</span></p>
<p id="t923" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t924" class="stm run hide_run">        <span class="nam">u1</span><span class="op">,</span> <span class="nam">u2</span> <span class="op">=</span> <span class="nam">self</span><span class="op">(</span><span class="nam">first</span><span class="op">)</span><span class="op">,</span> <span class="nam">self</span><span class="op">(</span><span class="nam">second</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t925" class="stm run hide_run">        <span class="key">if</span> <span class="nam">u1</span> <span class="key">is</span> <span class="key">None</span> <span class="key">or</span> <span class="nam">u2</span> <span class="key">is</span> <span class="key">None</span> <span class="key">or</span> <span class="nam">abs</span><span class="op">(</span><span class="nam">u1</span> <span class="op">-</span> <span class="nam">u2</span><span class="op">)</span> <span class="op">&lt;=</span> <span class="nam">epsilon</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t926" class="stm run hide_run">            <span class="key">return</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t927" class="stm run hide_run">        <span class="key">return</span> <span class="nam">float</span><span class="op">(</span><span class="nam">u1</span><span class="op">)</span> <span class="op">></span> <span class="nam">float</span><span class="op">(</span><span class="nam">u2</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t928" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t929" class="stm run hide_run">    <span class="op">@</span><span class="nam">abstractmethod</span><span class="strut">&nbsp;</span></p>
<p id="t930" class="stm run hide_run">    <span class="key">def</span> <span class="nam">xml</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">issues</span><span class="op">:</span> <span class="nam">List</span><span class="op">[</span><span class="nam">Issue</span><span class="op">]</span><span class="op">)</span> <span class="op">-></span> <span class="nam">str</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t931" class="pln">        <span class="str">"""Converts the function into a well formed XML string preferrably in GENIUS format.</span><span class="strut">&nbsp;</span></p>
<p id="t932" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t933" class="pln"><span class="str">        If the output has with &lt;/objective> then discount factor and reserved value should also be included</span><span class="strut">&nbsp;</span></p>
<p id="t934" class="pln"><span class="str">        If the output has &lt;/utility_space> it will not be appended in `to_xml_str`</span><span class="strut">&nbsp;</span></p>
<p id="t935" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t936" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t937" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t938" class="stm run hide_run">    <span class="op">@</span><span class="nam">property</span><span class="strut">&nbsp;</span></p>
<p id="t939" class="stm run hide_run">    <span class="key">def</span> <span class="nam">type</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span> <span class="op">-></span> <span class="nam">str</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t940" class="pln">        <span class="str">"""Returns the utility_function type.</span><span class="strut">&nbsp;</span></p>
<p id="t941" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t942" class="pln"><span class="str">        Each class inheriting from this ``UtilityFunction`` class will have its own type. The default type is the empty</span><span class="strut">&nbsp;</span></p>
<p id="t943" class="pln"><span class="str">        string.</span><span class="strut">&nbsp;</span></p>
<p id="t944" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t945" class="pln"><span class="str">        Examples:</span><span class="strut">&nbsp;</span></p>
<p id="t946" class="pln"><span class="str">            >>> from negmas.utilities import *</span><span class="strut">&nbsp;</span></p>
<p id="t947" class="pln"><span class="str">            >>> print(LinearUtilityAggregationFunction({1:lambda x:x, 2:lambda x:x}).type)</span><span class="strut">&nbsp;</span></p>
<p id="t948" class="pln"><span class="str">            linear_aggregation</span><span class="strut">&nbsp;</span></p>
<p id="t949" class="pln"><span class="str">            >>> print(MappingUtilityFunction(lambda x: x).type)</span><span class="strut">&nbsp;</span></p>
<p id="t950" class="pln"><span class="str">            mapping</span><span class="strut">&nbsp;</span></p>
<p id="t951" class="pln"><span class="str">            >>> print(NonLinearUtilityAggregationFunction({1:lambda x:x}, f=lambda x: x).type)</span><span class="strut">&nbsp;</span></p>
<p id="t952" class="pln"><span class="str">            non_linear_aggregation</span><span class="strut">&nbsp;</span></p>
<p id="t953" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t954" class="pln"><span class="str">        Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t955" class="pln"><span class="str">            str: utility_function type</span><span class="strut">&nbsp;</span></p>
<p id="t956" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t957" class="stm run hide_run">        <span class="key">return</span> <span class="nam">snake_case</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t958" class="pln">            <span class="nam">self</span><span class="op">.</span><span class="nam">__class__</span><span class="op">.</span><span class="nam">__name__</span><span class="op">.</span><span class="nam">replace</span><span class="op">(</span><span class="str">"Function"</span><span class="op">,</span> <span class="str">""</span><span class="op">)</span><span class="op">.</span><span class="nam">replace</span><span class="op">(</span><span class="str">"Utility"</span><span class="op">,</span> <span class="str">""</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t959" class="pln">        <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t960" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t961" class="stm run hide_run">    <span class="op">@</span><span class="nam">property</span><span class="strut">&nbsp;</span></p>
<p id="t962" class="stm run hide_run">    <span class="key">def</span> <span class="nam">base_type</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span> <span class="op">-></span> <span class="nam">str</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t963" class="pln">        <span class="str">"""Returns the utility_function base type ignoring discounting and similar wrappings."""</span><span class="strut">&nbsp;</span></p>
<p id="t964" class="stm run hide_run">        <span class="key">return</span> <span class="nam">self</span><span class="op">.</span><span class="nam">type</span><span class="strut">&nbsp;</span></p>
<p id="t965" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t966" class="stm run hide_run">    <span class="key">def</span> <span class="nam">eu</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">offer</span><span class="op">:</span> <span class="str">"Outcome"</span><span class="op">)</span> <span class="op">-></span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">float</span><span class="op">]</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t967" class="pln">        <span class="str">"""Calculate the expected utility_function value.</span><span class="strut">&nbsp;</span></p>
<p id="t968" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t969" class="pln"><span class="str">            Args:</span><span class="strut">&nbsp;</span></p>
<p id="t970" class="pln"><span class="str">                offer: The offer to be evaluated.</span><span class="strut">&nbsp;</span></p>
<p id="t971" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t972" class="pln"><span class="str">            Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t973" class="pln"><span class="str">                float: The expected utility_function for utility_priors and just utility_function for real-valued utilities.</span><span class="strut">&nbsp;</span></p>
<p id="t974" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t975" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t976" class="stm mis">        <span class="nam">v</span> <span class="op">=</span> <span class="nam">self</span><span class="op">(</span><span class="nam">offer</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t977" class="stm mis">        <span class="key">return</span> <span class="nam">float</span><span class="op">(</span><span class="nam">v</span><span class="op">)</span> <span class="key">if</span> <span class="nam">v</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span> <span class="key">else</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t978" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t979" class="stm run hide_run">    <span class="op">@</span><span class="nam">classmethod</span><span class="strut">&nbsp;</span></p>
<p id="t980" class="stm run hide_run">    <span class="key">def</span> <span class="nam">generate_bilateral</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t981" class="pln">        <span class="nam">cls</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t982" class="pln">        <span class="nam">outcomes</span><span class="op">:</span> <span class="nam">Union</span><span class="op">[</span><span class="nam">int</span><span class="op">,</span> <span class="nam">List</span><span class="op">[</span><span class="nam">Outcome</span><span class="op">]</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t983" class="pln">        <span class="nam">conflict_level</span><span class="op">:</span> <span class="nam">float</span> <span class="op">=</span> <span class="num">0.5</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t984" class="pln">        <span class="nam">conflict_delta</span><span class="op">=</span><span class="num">0.005</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t985" class="pln">        <span class="nam">win_win</span><span class="op">=</span><span class="num">0.5</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t986" class="pln">    <span class="op">)</span> <span class="op">-></span> <span class="nam">Tuple</span><span class="op">[</span><span class="str">"UtilityFunction"</span><span class="op">,</span> <span class="str">"UtilityFunction"</span><span class="op">]</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t987" class="pln">        <span class="str">"""Generates a couple of utility functions</span><span class="strut">&nbsp;</span></p>
<p id="t988" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t989" class="pln"><span class="str">        Args:</span><span class="strut">&nbsp;</span></p>
<p id="t990" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t991" class="pln"><span class="str">            n_outcomes (int): number of outcomes to use</span><span class="strut">&nbsp;</span></p>
<p id="t992" class="pln"><span class="str">            conflict_level: How conflicting are the two ufuns to generate. 1.0 means maximum conflict.</span><span class="strut">&nbsp;</span></p>
<p id="t993" class="pln"><span class="str">            conflict_delta: How variable is the conflict at different outcomes.</span><span class="strut">&nbsp;</span></p>
<p id="t994" class="pln"><span class="str">            zero_summness: How zero-sum like are the two ufuns.</span><span class="strut">&nbsp;</span></p>
<p id="t995" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t996" class="pln"><span class="str">        Examples:</span><span class="strut">&nbsp;</span></p>
<p id="t997" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t998" class="pln"><span class="str">            >>> u1, u2 = UtilityFunction.generate_bilateral(outcomes=10, conflict_level=0.0</span><span class="strut">&nbsp;</span></p>
<p id="t999" class="pln"><span class="str">            ...                                             , conflict_delta=0.0, win_win=0.0)</span><span class="strut">&nbsp;</span></p>
<p id="t1000" class="pln"><span class="str">            >>> print(UtilityFunction.conflict_level(u1, u2, outcomes=10))</span><span class="strut">&nbsp;</span></p>
<p id="t1001" class="pln"><span class="str">            0.0</span><span class="strut">&nbsp;</span></p>
<p id="t1002" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1003" class="pln"><span class="str">            >>> u1, u2 = UtilityFunction.generate_bilateral(outcomes=10, conflict_level=1.0</span><span class="strut">&nbsp;</span></p>
<p id="t1004" class="pln"><span class="str">            ...                                             , conflict_delta=0.0, win_win=0.0)</span><span class="strut">&nbsp;</span></p>
<p id="t1005" class="pln"><span class="str">            >>> print(UtilityFunction.conflict_level(u1, u2, outcomes=10))</span><span class="strut">&nbsp;</span></p>
<p id="t1006" class="pln"><span class="str">            1.0</span><span class="strut">&nbsp;</span></p>
<p id="t1007" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1008" class="pln"><span class="str">            >>> u1, u2 = UtilityFunction.generate_bilateral(outcomes=10, conflict_level=0.5</span><span class="strut">&nbsp;</span></p>
<p id="t1009" class="pln"><span class="str">            ...                                             , conflict_delta=0.0, win_win=1.0)</span><span class="strut">&nbsp;</span></p>
<p id="t1010" class="pln"><span class="str">            >>> 0.0 &lt;= UtilityFunction.conflict_level(u1, u2, outcomes=10) &lt;= 1.0</span><span class="strut">&nbsp;</span></p>
<p id="t1011" class="pln"><span class="str">            True</span><span class="strut">&nbsp;</span></p>
<p id="t1012" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1013" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1014" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t1015" class="stm par run hide_run"><span class="annotate short">1015&#x202F;&#x219B;&#x202F;1017</span><span class="annotate long">line 1015 didn't jump to line 1017, because the condition on line 1015 was never false</span>        <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">,</span> <span class="nam">int</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1016" class="stm run hide_run">            <span class="nam">outcomes</span> <span class="op">=</span> <span class="op">[</span><span class="op">(</span><span class="nam">_</span><span class="op">,</span><span class="op">)</span> <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">)</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t1017" class="stm run hide_run">        <span class="nam">n_outcomes</span> <span class="op">=</span> <span class="nam">len</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1018" class="stm run hide_run">        <span class="nam">u1</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">random</span><span class="op">(</span><span class="nam">n_outcomes</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1019" class="stm run hide_run">        <span class="nam">rand</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">random</span><span class="op">(</span><span class="nam">n_outcomes</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1020" class="stm run hide_run">        <span class="key">if</span> <span class="nam">conflict_level</span> <span class="op">></span> <span class="num">0.5</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1021" class="stm run hide_run">            <span class="nam">conflicting</span> <span class="op">=</span> <span class="num">1.0</span> <span class="op">-</span> <span class="nam">u1</span> <span class="op">+</span> <span class="nam">conflict_delta</span> <span class="op">*</span> <span class="nam">np</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">random</span><span class="op">(</span><span class="nam">n_outcomes</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1022" class="stm run hide_run">            <span class="nam">u2</span> <span class="op">=</span> <span class="nam">conflicting</span> <span class="op">*</span> <span class="nam">conflict_level</span> <span class="op">+</span> <span class="nam">rand</span> <span class="op">*</span> <span class="op">(</span><span class="num">1</span> <span class="op">-</span> <span class="nam">conflict_level</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1023" class="stm run hide_run">        <span class="key">elif</span> <span class="nam">conflict_level</span> <span class="op">&lt;</span> <span class="num">0.5</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1024" class="stm run hide_run">            <span class="nam">same</span> <span class="op">=</span> <span class="nam">u1</span> <span class="op">+</span> <span class="nam">conflict_delta</span> <span class="op">*</span> <span class="nam">np</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">random</span><span class="op">(</span><span class="nam">n_outcomes</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1025" class="stm run hide_run">            <span class="nam">u2</span> <span class="op">=</span> <span class="nam">same</span> <span class="op">*</span> <span class="op">(</span><span class="num">1</span> <span class="op">-</span> <span class="nam">conflict_level</span><span class="op">)</span> <span class="op">+</span> <span class="nam">rand</span> <span class="op">*</span> <span class="nam">conflict_level</span><span class="strut">&nbsp;</span></p>
<p id="t1026" class="pln">        <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1027" class="stm run hide_run">            <span class="nam">u2</span> <span class="op">=</span> <span class="nam">rand</span><span class="strut">&nbsp;</span></p>
<p id="t1028" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1029" class="pln">        <span class="com"># todo implement win_win correctly. Order the ufun then make outcomes with good outcome even better and vice</span><span class="strut">&nbsp;</span></p>
<p id="t1030" class="pln">        <span class="com"># versa</span><span class="strut">&nbsp;</span></p>
<p id="t1031" class="pln">        <span class="com"># u2 += u2 * win_win</span><span class="strut">&nbsp;</span></p>
<p id="t1032" class="pln">        <span class="com"># u2 += np.random.random(n_outcomes) * conflict_delta</span><span class="strut">&nbsp;</span></p>
<p id="t1033" class="stm run hide_run">        <span class="nam">u1</span> <span class="op">-=</span> <span class="nam">u1</span><span class="op">.</span><span class="nam">min</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1034" class="stm run hide_run">        <span class="nam">u2</span> <span class="op">-=</span> <span class="nam">u2</span><span class="op">.</span><span class="nam">min</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1035" class="stm run hide_run">        <span class="nam">u1</span> <span class="op">=</span> <span class="nam">u1</span> <span class="op">/</span> <span class="nam">u1</span><span class="op">.</span><span class="nam">max</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1036" class="stm run hide_run">        <span class="nam">u2</span> <span class="op">=</span> <span class="nam">u2</span> <span class="op">/</span> <span class="nam">u2</span><span class="op">.</span><span class="nam">max</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1037" class="stm par run hide_run"><span class="annotate short">1037&#x202F;&#x219B;&#x202F;1039</span><span class="annotate long">line 1037 didn't jump to line 1039, because the condition on line 1037 was never false</span>        <span class="key">if</span> <span class="nam">random</span><span class="op">.</span><span class="nam">random</span><span class="op">(</span><span class="op">)</span> <span class="op">></span> <span class="num">0.5</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1038" class="stm run hide_run">            <span class="nam">u1</span><span class="op">,</span> <span class="nam">u2</span> <span class="op">=</span> <span class="nam">u2</span><span class="op">,</span> <span class="nam">u1</span><span class="strut">&nbsp;</span></p>
<p id="t1039" class="stm run hide_run">        <span class="key">return</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t1040" class="pln">            <span class="nam">MappingUtilityFunction</span><span class="op">(</span><span class="nam">dict</span><span class="op">(</span><span class="nam">zip</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">,</span> <span class="nam">u1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1041" class="pln">            <span class="nam">MappingUtilityFunction</span><span class="op">(</span><span class="nam">dict</span><span class="op">(</span><span class="nam">zip</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">,</span> <span class="nam">u2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1042" class="pln">        <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1043" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1044" class="stm run hide_run">    <span class="op">@</span><span class="nam">classmethod</span><span class="strut">&nbsp;</span></p>
<p id="t1045" class="stm run hide_run">    <span class="key">def</span> <span class="nam">generate_random_bilateral</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t1046" class="pln">        <span class="nam">cls</span><span class="op">,</span> <span class="nam">outcomes</span><span class="op">:</span> <span class="nam">Union</span><span class="op">[</span><span class="nam">int</span><span class="op">,</span> <span class="nam">List</span><span class="op">[</span><span class="nam">Outcome</span><span class="op">]</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t1047" class="pln">    <span class="op">)</span> <span class="op">-></span> <span class="nam">Tuple</span><span class="op">[</span><span class="str">"UtilityFunction"</span><span class="op">,</span> <span class="str">"UtilityFunction"</span><span class="op">]</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1048" class="pln">        <span class="str">"""Generates a couple of utility functions</span><span class="strut">&nbsp;</span></p>
<p id="t1049" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1050" class="pln"><span class="str">        Args:</span><span class="strut">&nbsp;</span></p>
<p id="t1051" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1052" class="pln"><span class="str">            n_outcomes (int): number of outcomes to use</span><span class="strut">&nbsp;</span></p>
<p id="t1053" class="pln"><span class="str">            conflict_level: How conflicting are the two ufuns to generate. 1.0 means maximum conflict.</span><span class="strut">&nbsp;</span></p>
<p id="t1054" class="pln"><span class="str">            conflict_delta: How variable is the conflict at different outcomes.</span><span class="strut">&nbsp;</span></p>
<p id="t1055" class="pln"><span class="str">            zero_summness: How zero-sum like are the two ufuns.</span><span class="strut">&nbsp;</span></p>
<p id="t1056" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1057" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1058" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t1059" class="stm par run hide_run"><span class="annotate short">1059&#x202F;&#x219B;&#x202F;1060</span><span class="annotate long">line 1059 didn't jump to line 1060, because the condition on line 1059 was never true</span>        <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">,</span> <span class="nam">int</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1060" class="stm mis">            <span class="nam">outcomes</span> <span class="op">=</span> <span class="op">[</span><span class="op">(</span><span class="nam">_</span><span class="op">,</span><span class="op">)</span> <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">)</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t1061" class="stm run hide_run">        <span class="nam">n_outcomes</span> <span class="op">=</span> <span class="nam">len</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1062" class="stm run hide_run">        <span class="nam">u1</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">random</span><span class="op">(</span><span class="nam">n_outcomes</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1063" class="stm run hide_run">        <span class="nam">u2</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">random</span><span class="op">(</span><span class="nam">n_outcomes</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1064" class="stm run hide_run">        <span class="nam">u1</span> <span class="op">-=</span> <span class="nam">u1</span><span class="op">.</span><span class="nam">min</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1065" class="stm run hide_run">        <span class="nam">u2</span> <span class="op">-=</span> <span class="nam">u2</span><span class="op">.</span><span class="nam">min</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1066" class="stm run hide_run">        <span class="nam">u1</span> <span class="op">/=</span> <span class="nam">u1</span><span class="op">.</span><span class="nam">max</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1067" class="stm run hide_run">        <span class="nam">u2</span> <span class="op">/=</span> <span class="nam">u2</span><span class="op">.</span><span class="nam">max</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1068" class="stm run hide_run">        <span class="key">return</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t1069" class="pln">            <span class="nam">MappingUtilityFunction</span><span class="op">(</span><span class="nam">dict</span><span class="op">(</span><span class="nam">zip</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">,</span> <span class="nam">u1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1070" class="pln">            <span class="nam">MappingUtilityFunction</span><span class="op">(</span><span class="nam">dict</span><span class="op">(</span><span class="nam">zip</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">,</span> <span class="nam">u2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1071" class="pln">        <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1072" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1073" class="stm run hide_run">    <span class="op">@</span><span class="nam">classmethod</span><span class="strut">&nbsp;</span></p>
<p id="t1074" class="stm run hide_run">    <span class="key">def</span> <span class="nam">generate_random</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t1075" class="pln">        <span class="nam">cls</span><span class="op">,</span> <span class="nam">n</span><span class="op">:</span> <span class="nam">int</span><span class="op">,</span> <span class="nam">outcomes</span><span class="op">:</span> <span class="nam">Union</span><span class="op">[</span><span class="nam">int</span><span class="op">,</span> <span class="nam">List</span><span class="op">[</span><span class="nam">Outcome</span><span class="op">]</span><span class="op">]</span><span class="op">,</span> <span class="nam">normalized</span><span class="op">:</span> <span class="nam">bool</span> <span class="op">=</span> <span class="key">True</span><span class="strut">&nbsp;</span></p>
<p id="t1076" class="pln">    <span class="op">)</span> <span class="op">-></span> <span class="nam">List</span><span class="op">[</span><span class="str">"UtilityFunction"</span><span class="op">]</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1077" class="pln">        <span class="str">"""Generates a couple of utility functions</span><span class="strut">&nbsp;</span></p>
<p id="t1078" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1079" class="pln"><span class="str">        Args:</span><span class="strut">&nbsp;</span></p>
<p id="t1080" class="pln"><span class="str">            n: number of utility functions to generate</span><span class="strut">&nbsp;</span></p>
<p id="t1081" class="pln"><span class="str">            outcomes: number of outcomes to use</span><span class="strut">&nbsp;</span></p>
<p id="t1082" class="pln"><span class="str">            normalized: if true, the resulting ufuns will be normlized between zero and one.</span><span class="strut">&nbsp;</span></p>
<p id="t1083" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1084" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1085" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t1086" class="stm par run hide_run"><span class="annotate short">1086&#x202F;&#x219B;&#x202F;1088</span><span class="annotate long">line 1086 didn't jump to line 1088, because the condition on line 1086 was never false</span>        <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">,</span> <span class="nam">int</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1087" class="stm run hide_run">            <span class="nam">outcomes</span> <span class="op">=</span> <span class="op">[</span><span class="op">(</span><span class="nam">_</span><span class="op">,</span><span class="op">)</span> <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">)</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t1088" class="stm run hide_run">        <span class="nam">n_outcomes</span> <span class="op">=</span> <span class="nam">len</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1089" class="stm run hide_run">        <span class="nam">ufuns</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t1090" class="stm run hide_run">        <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">n</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1091" class="stm run hide_run">            <span class="nam">u1</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">random</span><span class="op">(</span><span class="nam">n_outcomes</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1092" class="stm par run hide_run"><span class="annotate short">1092&#x202F;&#x219B;&#x202F;1095</span><span class="annotate long">line 1092 didn't jump to line 1095, because the condition on line 1092 was never false</span>            <span class="key">if</span> <span class="nam">normalized</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1093" class="stm run hide_run">                <span class="nam">u1</span> <span class="op">-=</span> <span class="nam">u1</span><span class="op">.</span><span class="nam">min</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1094" class="stm run hide_run">                <span class="nam">u1</span> <span class="op">/=</span> <span class="nam">u1</span><span class="op">.</span><span class="nam">max</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1095" class="stm run hide_run">            <span class="nam">ufuns</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">MappingUtilityFunction</span><span class="op">(</span><span class="nam">dict</span><span class="op">(</span><span class="nam">zip</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">,</span> <span class="nam">u1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1096" class="stm run hide_run">        <span class="key">return</span> <span class="nam">ufuns</span><span class="strut">&nbsp;</span></p>
<p id="t1097" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1098" class="stm run hide_run">    <span class="op">@</span><span class="nam">classmethod</span><span class="strut">&nbsp;</span></p>
<p id="t1099" class="stm run hide_run">    <span class="key">def</span> <span class="nam">conflict_level</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t1100" class="pln">        <span class="nam">cls</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1101" class="pln">        <span class="nam">u1</span><span class="op">:</span> <span class="str">"UtilityFunction"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1102" class="pln">        <span class="nam">u2</span><span class="op">:</span> <span class="str">"UtilityFunction"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1103" class="pln">        <span class="nam">outcomes</span><span class="op">:</span> <span class="nam">Union</span><span class="op">[</span><span class="nam">int</span><span class="op">,</span> <span class="nam">List</span><span class="op">[</span><span class="str">"Outcome"</span><span class="op">]</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1104" class="pln">        <span class="nam">max_tests</span><span class="op">:</span> <span class="nam">int</span> <span class="op">=</span> <span class="num">10000</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1105" class="pln">    <span class="op">)</span> <span class="op">-></span> <span class="nam">float</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1106" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t1107" class="pln"><span class="str">        Finds the conflict level in these two ufuns</span><span class="strut">&nbsp;</span></p>
<p id="t1108" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1109" class="pln"><span class="str">        Args:</span><span class="strut">&nbsp;</span></p>
<p id="t1110" class="pln"><span class="str">            u1:</span><span class="strut">&nbsp;</span></p>
<p id="t1111" class="pln"><span class="str">            u2:</span><span class="strut">&nbsp;</span></p>
<p id="t1112" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1113" class="pln"><span class="str">        Examples:</span><span class="strut">&nbsp;</span></p>
<p id="t1114" class="pln"><span class="str">            - A nonlinear strictly zero sum case</span><span class="strut">&nbsp;</span></p>
<p id="t1115" class="pln"><span class="str">            >>> outcomes = [(_,) for _ in range(10)]</span><span class="strut">&nbsp;</span></p>
<p id="t1116" class="pln"><span class="str">            >>> u1 = MappingUtilityFunction(dict(zip(outcomes, np.random.random(len(outcomes)))))</span><span class="strut">&nbsp;</span></p>
<p id="t1117" class="pln"><span class="str">            >>> u2 = MappingUtilityFunction(dict(zip(outcomes, 1.0 - np.array(list(u1.mapping.values())))))</span><span class="strut">&nbsp;</span></p>
<p id="t1118" class="pln"><span class="str">            >>> print(UtilityFunction.conflict_level(u1=u1, u2=u2, outcomes=outcomes))</span><span class="strut">&nbsp;</span></p>
<p id="t1119" class="pln"><span class="str">            1.0</span><span class="strut">&nbsp;</span></p>
<p id="t1120" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1121" class="pln"><span class="str">            - The same ufun</span><span class="strut">&nbsp;</span></p>
<p id="t1122" class="pln"><span class="str">            >>> print(UtilityFunction.conflict_level(u1=u1, u2=u1, outcomes=outcomes))</span><span class="strut">&nbsp;</span></p>
<p id="t1123" class="pln"><span class="str">            0.0</span><span class="strut">&nbsp;</span></p>
<p id="t1124" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1125" class="pln"><span class="str">            - A linear strictly zero sum case</span><span class="strut">&nbsp;</span></p>
<p id="t1126" class="pln"><span class="str">            >>> outcomes = [(_,) for _ in range(10)]</span><span class="strut">&nbsp;</span></p>
<p id="t1127" class="pln"><span class="str">            >>> u1 = MappingUtilityFunction(dict(zip(outcomes, np.linspace(0.0, 1.0, len(outcomes), endpoint=True))))</span><span class="strut">&nbsp;</span></p>
<p id="t1128" class="pln"><span class="str">            >>> u2 = MappingUtilityFunction(dict(zip(outcomes, np.linspace(1.0, 0.0, len(outcomes), endpoint=True))))</span><span class="strut">&nbsp;</span></p>
<p id="t1129" class="pln"><span class="str">            >>> print(UtilityFunction.conflict_level(u1=u1, u2=u2, outcomes=outcomes))</span><span class="strut">&nbsp;</span></p>
<p id="t1130" class="pln"><span class="str">            1.0</span><span class="strut">&nbsp;</span></p>
<p id="t1131" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t1132" class="stm run hide_run">        <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">,</span> <span class="nam">int</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1133" class="stm run hide_run">            <span class="nam">outcomes</span> <span class="op">=</span> <span class="op">[</span><span class="op">(</span><span class="nam">_</span><span class="op">,</span><span class="op">)</span> <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">)</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t1134" class="stm run hide_run">        <span class="nam">n_outcomes</span> <span class="op">=</span> <span class="nam">len</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1135" class="stm run hide_run">        <span class="nam">points</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">array</span><span class="op">(</span><span class="op">[</span><span class="op">[</span><span class="nam">u1</span><span class="op">(</span><span class="nam">o</span><span class="op">)</span><span class="op">,</span> <span class="nam">u2</span><span class="op">(</span><span class="nam">o</span><span class="op">)</span><span class="op">]</span> <span class="key">for</span> <span class="nam">o</span> <span class="key">in</span> <span class="nam">outcomes</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1136" class="stm run hide_run">        <span class="nam">order</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">permutation</span><span class="op">(</span><span class="nam">np</span><span class="op">.</span><span class="nam">array</span><span class="op">(</span><span class="nam">range</span><span class="op">(</span><span class="nam">n_outcomes</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1137" class="stm run hide_run">        <span class="nam">p1</span><span class="op">,</span> <span class="nam">p2</span> <span class="op">=</span> <span class="nam">points</span><span class="op">[</span><span class="nam">order</span><span class="op">,</span> <span class="num">0</span><span class="op">]</span><span class="op">,</span> <span class="nam">points</span><span class="op">[</span><span class="nam">order</span><span class="op">,</span> <span class="num">1</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t1138" class="stm run hide_run">        <span class="nam">signs</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t1139" class="stm run hide_run">        <span class="nam">trial</span> <span class="op">=</span> <span class="num">0</span><span class="strut">&nbsp;</span></p>
<p id="t1140" class="stm run hide_run">        <span class="key">for</span> <span class="nam">i</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">n_outcomes</span> <span class="op">-</span> <span class="num">1</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1141" class="stm run hide_run">            <span class="key">for</span> <span class="nam">j</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">i</span> <span class="op">+</span> <span class="num">1</span><span class="op">,</span> <span class="nam">n_outcomes</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1142" class="stm par run hide_run"><span class="annotate short">1142&#x202F;&#x219B;&#x202F;1143</span><span class="annotate long">line 1142 didn't jump to line 1143, because the condition on line 1142 was never true</span>                <span class="key">if</span> <span class="nam">trial</span> <span class="op">>=</span> <span class="nam">max_tests</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1143" class="stm mis">                    <span class="key">break</span><span class="strut">&nbsp;</span></p>
<p id="t1144" class="stm run hide_run">                <span class="nam">trial</span> <span class="op">+=</span> <span class="num">1</span><span class="strut">&nbsp;</span></p>
<p id="t1145" class="stm run hide_run">                <span class="nam">o11</span><span class="op">,</span> <span class="nam">o12</span> <span class="op">=</span> <span class="nam">p1</span><span class="op">[</span><span class="nam">i</span><span class="op">]</span><span class="op">,</span> <span class="nam">p1</span><span class="op">[</span><span class="nam">j</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t1146" class="stm run hide_run">                <span class="nam">o21</span><span class="op">,</span> <span class="nam">o22</span> <span class="op">=</span> <span class="nam">p2</span><span class="op">[</span><span class="nam">i</span><span class="op">]</span><span class="op">,</span> <span class="nam">p2</span><span class="op">[</span><span class="nam">j</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t1147" class="stm par run hide_run"><span class="annotate short">1147&#x202F;&#x219B;&#x202F;1148</span><span class="annotate long">line 1147 didn't jump to line 1148, because the condition on line 1147 was never true</span>                <span class="key">if</span> <span class="nam">o12</span> <span class="op">==</span> <span class="nam">o11</span> <span class="key">and</span> <span class="nam">o21</span> <span class="op">==</span> <span class="nam">o22</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1148" class="stm mis">                    <span class="key">continue</span><span class="strut">&nbsp;</span></p>
<p id="t1149" class="stm run hide_run">                <span class="nam">signs</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t1150" class="pln">                    <span class="nam">int</span><span class="op">(</span><span class="op">(</span><span class="nam">o12</span> <span class="op">></span> <span class="nam">o11</span> <span class="key">and</span> <span class="nam">o21</span> <span class="op">></span> <span class="nam">o22</span><span class="op">)</span> <span class="key">or</span> <span class="op">(</span><span class="nam">o12</span> <span class="op">&lt;</span> <span class="nam">o11</span> <span class="key">and</span> <span class="nam">o21</span> <span class="op">&lt;</span> <span class="nam">o22</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1151" class="pln">                <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1152" class="stm run hide_run">        <span class="nam">signs</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">array</span><span class="op">(</span><span class="nam">signs</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1153" class="stm par run hide_run"><span class="annotate short">1153&#x202F;&#x219B;&#x202F;1154</span><span class="annotate long">line 1153 didn't jump to line 1154, because the condition on line 1153 was never true</span>        <span class="key">if</span> <span class="nam">len</span><span class="op">(</span><span class="nam">signs</span><span class="op">)</span> <span class="op">==</span> <span class="num">0</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1154" class="stm mis">            <span class="key">return</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t1155" class="stm run hide_run">        <span class="key">return</span> <span class="nam">signs</span><span class="op">.</span><span class="nam">mean</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1156" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1157" class="stm run hide_run">    <span class="op">@</span><span class="nam">classmethod</span><span class="strut">&nbsp;</span></p>
<p id="t1158" class="stm run hide_run">    <span class="key">def</span> <span class="nam">winwin_level</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t1159" class="pln">        <span class="nam">cls</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1160" class="pln">        <span class="nam">u1</span><span class="op">:</span> <span class="str">"UtilityFunction"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1161" class="pln">        <span class="nam">u2</span><span class="op">:</span> <span class="str">"UtilityFunction"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1162" class="pln">        <span class="nam">outcomes</span><span class="op">:</span> <span class="nam">Union</span><span class="op">[</span><span class="nam">int</span><span class="op">,</span> <span class="nam">List</span><span class="op">[</span><span class="str">"Outcome"</span><span class="op">]</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1163" class="pln">        <span class="nam">max_tests</span><span class="op">:</span> <span class="nam">int</span> <span class="op">=</span> <span class="num">10000</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1164" class="pln">    <span class="op">)</span> <span class="op">-></span> <span class="nam">float</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1165" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t1166" class="pln"><span class="str">        Finds the conflict level in these two ufuns</span><span class="strut">&nbsp;</span></p>
<p id="t1167" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1168" class="pln"><span class="str">        Args:</span><span class="strut">&nbsp;</span></p>
<p id="t1169" class="pln"><span class="str">            u1:</span><span class="strut">&nbsp;</span></p>
<p id="t1170" class="pln"><span class="str">            u2:</span><span class="strut">&nbsp;</span></p>
<p id="t1171" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1172" class="pln"><span class="str">        Examples:</span><span class="strut">&nbsp;</span></p>
<p id="t1173" class="pln"><span class="str">            - A nonlinear same ufun case</span><span class="strut">&nbsp;</span></p>
<p id="t1174" class="pln"><span class="str">            >>> outcomes = [(_,) for _ in range(10)]</span><span class="strut">&nbsp;</span></p>
<p id="t1175" class="pln"><span class="str">            >>> u1 = MappingUtilityFunction(dict(zip(outcomes, np.linspace(1.0, 0.0, len(outcomes), endpoint=True))))</span><span class="strut">&nbsp;</span></p>
<p id="t1176" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1177" class="pln"><span class="str">            - A linear strictly zero sum case</span><span class="strut">&nbsp;</span></p>
<p id="t1178" class="pln"><span class="str">            >>> outcomes = [(_,) for _ in range(10)]</span><span class="strut">&nbsp;</span></p>
<p id="t1179" class="pln"><span class="str">            >>> u1 = MappingUtilityFunction(dict(zip(outcomes, np.linspace(0.0, 1.0, len(outcomes), endpoint=True))))</span><span class="strut">&nbsp;</span></p>
<p id="t1180" class="pln"><span class="str">            >>> u2 = MappingUtilityFunction(dict(zip(outcomes, np.linspace(1.0, 0.0, len(outcomes), endpoint=True))))</span><span class="strut">&nbsp;</span></p>
<p id="t1181" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1182" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1183" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t1184" class="stm mis">        <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">,</span> <span class="nam">int</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1185" class="stm mis">            <span class="nam">outcomes</span> <span class="op">=</span> <span class="op">[</span><span class="op">(</span><span class="nam">_</span><span class="op">,</span><span class="op">)</span> <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">)</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t1186" class="stm mis">        <span class="nam">n_outcomes</span> <span class="op">=</span> <span class="nam">len</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1187" class="stm mis">        <span class="nam">points</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">array</span><span class="op">(</span><span class="op">[</span><span class="op">[</span><span class="nam">u1</span><span class="op">(</span><span class="nam">o</span><span class="op">)</span><span class="op">,</span> <span class="nam">u2</span><span class="op">(</span><span class="nam">o</span><span class="op">)</span><span class="op">]</span> <span class="key">for</span> <span class="nam">o</span> <span class="key">in</span> <span class="nam">outcomes</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1188" class="stm mis">        <span class="nam">order</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">permutation</span><span class="op">(</span><span class="nam">np</span><span class="op">.</span><span class="nam">array</span><span class="op">(</span><span class="nam">range</span><span class="op">(</span><span class="nam">n_outcomes</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1189" class="stm mis">        <span class="nam">p1</span><span class="op">,</span> <span class="nam">p2</span> <span class="op">=</span> <span class="nam">points</span><span class="op">[</span><span class="nam">order</span><span class="op">,</span> <span class="num">0</span><span class="op">]</span><span class="op">,</span> <span class="nam">points</span><span class="op">[</span><span class="nam">order</span><span class="op">,</span> <span class="num">1</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t1190" class="stm mis">        <span class="nam">signs</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t1191" class="stm mis">        <span class="key">for</span> <span class="nam">trial</span><span class="op">,</span> <span class="op">(</span><span class="nam">i</span><span class="op">,</span> <span class="nam">j</span><span class="op">)</span> <span class="key">in</span> <span class="nam">enumerate</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t1192" class="pln">            <span class="nam">zip</span><span class="op">(</span><span class="nam">range</span><span class="op">(</span><span class="nam">n_outcomes</span> <span class="op">-</span> <span class="num">1</span><span class="op">)</span><span class="op">,</span> <span class="nam">range</span><span class="op">(</span><span class="num">1</span><span class="op">,</span> <span class="nam">n_outcomes</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1193" class="pln">        <span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1194" class="stm mis">            <span class="key">if</span> <span class="nam">trial</span> <span class="op">>=</span> <span class="nam">max_tests</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1195" class="stm mis">                <span class="key">break</span><span class="strut">&nbsp;</span></p>
<p id="t1196" class="stm mis">            <span class="nam">o11</span><span class="op">,</span> <span class="nam">o12</span> <span class="op">=</span> <span class="nam">p1</span><span class="op">[</span><span class="nam">i</span><span class="op">]</span><span class="op">,</span> <span class="nam">p1</span><span class="op">[</span><span class="nam">j</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t1197" class="stm mis">            <span class="nam">o21</span><span class="op">,</span> <span class="nam">o22</span> <span class="op">=</span> <span class="nam">p2</span><span class="op">[</span><span class="nam">i</span><span class="op">]</span><span class="op">,</span> <span class="nam">p2</span><span class="op">[</span><span class="nam">j</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t1198" class="stm mis">            <span class="key">if</span> <span class="nam">o11</span> <span class="op">==</span> <span class="nam">o12</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1199" class="stm mis">                <span class="key">if</span> <span class="nam">o21</span> <span class="op">==</span> <span class="nam">o22</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1200" class="stm mis">                    <span class="key">continue</span><span class="strut">&nbsp;</span></p>
<p id="t1201" class="pln">                <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1202" class="stm mis">                    <span class="nam">win</span> <span class="op">=</span> <span class="nam">abs</span><span class="op">(</span><span class="nam">o22</span> <span class="op">-</span> <span class="nam">o21</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1203" class="stm mis">            <span class="key">elif</span> <span class="nam">o11</span> <span class="op">&lt;</span> <span class="nam">o12</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1204" class="stm mis">                <span class="key">if</span> <span class="nam">o21</span> <span class="op">==</span> <span class="nam">o22</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1205" class="stm mis">                    <span class="nam">win</span> <span class="op">=</span> <span class="nam">o12</span> <span class="op">-</span> <span class="nam">o11</span><span class="strut">&nbsp;</span></p>
<p id="t1206" class="pln">                <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1207" class="stm mis">                    <span class="nam">win</span> <span class="op">=</span> <span class="op">(</span><span class="nam">o12</span> <span class="op">-</span> <span class="nam">o11</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="nam">o22</span> <span class="op">-</span> <span class="nam">o21</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1208" class="pln">            <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1209" class="stm mis">                <span class="key">if</span> <span class="nam">o21</span> <span class="op">==</span> <span class="nam">o22</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1210" class="stm mis">                    <span class="nam">win</span> <span class="op">=</span> <span class="nam">o11</span> <span class="op">-</span> <span class="nam">o12</span><span class="strut">&nbsp;</span></p>
<p id="t1211" class="pln">                <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1212" class="stm mis">                    <span class="nam">win</span> <span class="op">=</span> <span class="op">(</span><span class="nam">o11</span> <span class="op">-</span> <span class="nam">o12</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="nam">o22</span> <span class="op">-</span> <span class="nam">o21</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1213" class="stm mis">            <span class="nam">signs</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">win</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1214" class="stm mis">        <span class="nam">signs</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">array</span><span class="op">(</span><span class="nam">signs</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1215" class="stm mis">        <span class="key">if</span> <span class="nam">len</span><span class="op">(</span><span class="nam">signs</span><span class="op">)</span> <span class="op">==</span> <span class="num">0</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1216" class="stm mis">            <span class="key">return</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t1217" class="stm mis">        <span class="key">return</span> <span class="nam">signs</span><span class="op">.</span><span class="nam">mean</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1218" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1219" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1220" class="stm run hide_run"><span class="nam">UtilityFunctions</span> <span class="op">=</span> <span class="nam">List</span><span class="op">[</span><span class="str">"UtilityFunction"</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t1221" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1222" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1223" class="stm run hide_run"><span class="key">class</span> <span class="nam">ExpDiscountedUFun</span><span class="op">(</span><span class="nam">UtilityFunction</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1224" class="pln">    <span class="str">"""A discounted utility function based on some factor of the negotiation</span><span class="strut">&nbsp;</span></p>
<p id="t1225" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1226" class="pln"><span class="str">    Args:</span><span class="strut">&nbsp;</span></p>
<p id="t1227" class="pln"><span class="str">        ufun: The utility function that is being discounted</span><span class="strut">&nbsp;</span></p>
<p id="t1228" class="pln"><span class="str">        discount: discount factor</span><span class="strut">&nbsp;</span></p>
<p id="t1229" class="pln"><span class="str">        factor: str -> The name of the AgentMechanismInterface variable based on which discounting operate</span><span class="strut">&nbsp;</span></p>
<p id="t1230" class="pln"><span class="str">        callable -> must receive a mechanism info object and returns a float representing the factor</span><span class="strut">&nbsp;</span></p>
<p id="t1231" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1232" class="pln"><span class="str">    """</span><span class="strut">&nbsp;</span></p>
<p id="t1233" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1234" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t1235" class="pln">        <span class="nam">self</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1236" class="pln">        <span class="nam">ufun</span><span class="op">:</span> <span class="nam">UtilityFunction</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1237" class="pln">        <span class="nam">ami</span><span class="op">:</span> <span class="str">"AgentMechanismInterface"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1238" class="pln">        <span class="nam">discount</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">float</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1239" class="pln">        <span class="nam">factor</span><span class="op">:</span> <span class="nam">Union</span><span class="op">[</span><span class="nam">str</span><span class="op">,</span> <span class="nam">Callable</span><span class="op">[</span><span class="op">[</span><span class="str">"AgentMechanismInterface"</span><span class="op">]</span><span class="op">,</span> <span class="nam">float</span><span class="op">]</span><span class="op">]</span> <span class="op">=</span> <span class="str">"step"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1240" class="pln">        <span class="nam">name</span><span class="op">=</span><span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1241" class="pln">        <span class="nam">reserved_value</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">UtilityValue</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1242" class="pln">        <span class="nam">dynamic_reservation</span><span class="op">=</span><span class="key">True</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1243" class="pln">    <span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1244" class="stm run hide_run">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">__init__</span><span class="op">(</span><span class="nam">name</span><span class="op">=</span><span class="nam">name</span><span class="op">,</span> <span class="nam">reserved_value</span><span class="op">=</span><span class="nam">reserved_value</span><span class="op">,</span> <span class="nam">ami</span><span class="op">=</span><span class="nam">ami</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1245" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">ufun</span> <span class="op">=</span> <span class="nam">ufun</span><span class="strut">&nbsp;</span></p>
<p id="t1246" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">discount</span> <span class="op">=</span> <span class="nam">discount</span><span class="strut">&nbsp;</span></p>
<p id="t1247" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">factor</span> <span class="op">=</span> <span class="nam">factor</span><span class="strut">&nbsp;</span></p>
<p id="t1248" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">dynamic_reservation</span> <span class="op">=</span> <span class="nam">dynamic_reservation</span><span class="strut">&nbsp;</span></p>
<p id="t1249" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1250" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__call__</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">offer</span><span class="op">:</span> <span class="nam">Outcome</span><span class="op">)</span> <span class="op">-></span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">UtilityValue</span><span class="op">]</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1251" class="stm mis">        <span class="key">if</span> <span class="nam">offer</span> <span class="key">is</span> <span class="key">None</span> <span class="key">and</span> <span class="key">not</span> <span class="nam">self</span><span class="op">.</span><span class="nam">dynamic_reservation</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1252" class="stm mis">            <span class="key">return</span> <span class="nam">self</span><span class="op">.</span><span class="nam">reserved_value</span><span class="strut">&nbsp;</span></p>
<p id="t1253" class="stm mis">        <span class="nam">u</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">ufun</span><span class="op">(</span><span class="nam">offer</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1254" class="stm mis">        <span class="key">if</span> <span class="key">not</span> <span class="nam">self</span><span class="op">.</span><span class="nam">discount</span> <span class="key">or</span> <span class="nam">self</span><span class="op">.</span><span class="nam">discount</span> <span class="op">==</span> <span class="num">1.0</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1255" class="stm mis">            <span class="key">return</span> <span class="nam">u</span><span class="strut">&nbsp;</span></p>
<p id="t1256" class="stm mis">        <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">factor</span><span class="op">,</span> <span class="nam">str</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1257" class="stm mis">            <span class="nam">factor</span> <span class="op">=</span> <span class="nam">getattr</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">ami</span><span class="op">.</span><span class="nam">state</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">factor</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1258" class="pln">        <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1259" class="stm mis">            <span class="nam">factor</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">factor</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">ami</span><span class="op">.</span><span class="nam">state</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1260" class="stm mis">        <span class="key">return</span> <span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">discount</span> <span class="op">**</span> <span class="nam">factor</span><span class="op">)</span> <span class="op">*</span> <span class="nam">u</span><span class="strut">&nbsp;</span></p>
<p id="t1261" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1262" class="stm run hide_run">    <span class="key">def</span> <span class="nam">xml</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">issues</span><span class="op">:</span> <span class="nam">List</span><span class="op">[</span><span class="nam">Issue</span><span class="op">]</span><span class="op">)</span> <span class="op">-></span> <span class="nam">str</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1263" class="stm mis">        <span class="nam">output</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">ufun</span><span class="op">.</span><span class="nam">xml</span><span class="op">(</span><span class="nam">issues</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1264" class="stm mis">        <span class="nam">output</span> <span class="op">+=</span> <span class="str">"&lt;/objective>\n"</span><span class="strut">&nbsp;</span></p>
<p id="t1265" class="stm mis">        <span class="nam">factor</span> <span class="op">=</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t1266" class="stm mis">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">factor</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1267" class="stm mis">            <span class="nam">factor</span> <span class="op">=</span> <span class="nam">str</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">factor</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1268" class="stm mis">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">discount</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1269" class="stm mis">            <span class="nam">output</span> <span class="op">+=</span> <span class="str">f'&lt;discount_factor value="{self.discount}" '</span><span class="strut">&nbsp;</span></p>
<p id="t1270" class="stm mis">            <span class="key">if</span> <span class="nam">factor</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span> <span class="key">and</span> <span class="nam">factor</span> <span class="op">!=</span> <span class="str">"step"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1271" class="stm mis">                <span class="nam">output</span> <span class="op">+=</span> <span class="str">f' variable="{factor}" '</span><span class="strut">&nbsp;</span></p>
<p id="t1272" class="stm mis">            <span class="nam">output</span> <span class="op">+=</span> <span class="str">"/>\n"</span><span class="strut">&nbsp;</span></p>
<p id="t1273" class="stm mis">        <span class="key">return</span> <span class="nam">output</span><span class="strut">&nbsp;</span></p>
<p id="t1274" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1275" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__str__</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1276" class="stm mis">        <span class="key">return</span> <span class="str">f"{self.ufun.type}-cost:{self.discount} based on {self.factor}"</span><span class="strut">&nbsp;</span></p>
<p id="t1277" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1278" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__getattr__</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">item</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1279" class="stm mis">        <span class="key">return</span> <span class="nam">getattr</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">ufun</span><span class="op">,</span> <span class="nam">item</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1280" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1281" class="stm run hide_run">    <span class="op">@</span><span class="nam">property</span><span class="strut">&nbsp;</span></p>
<p id="t1282" class="pln">    <span class="key">def</span> <span class="nam">base_type</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1283" class="stm mis">        <span class="key">return</span> <span class="nam">self</span><span class="op">.</span><span class="nam">ufun</span><span class="op">.</span><span class="nam">type</span><span class="strut">&nbsp;</span></p>
<p id="t1284" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1285" class="stm run hide_run">    <span class="op">@</span><span class="nam">property</span><span class="strut">&nbsp;</span></p>
<p id="t1286" class="pln">    <span class="key">def</span> <span class="nam">type</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1287" class="stm mis">        <span class="key">return</span> <span class="nam">self</span><span class="op">.</span><span class="nam">ufun</span><span class="op">.</span><span class="nam">type</span> <span class="op">+</span> <span class="str">"_exponentially_discounted"</span><span class="strut">&nbsp;</span></p>
<p id="t1288" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1289" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1290" class="stm run hide_run"><span class="key">class</span> <span class="nam">LinDiscountedUFun</span><span class="op">(</span><span class="nam">UtilityFunction</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1291" class="pln">    <span class="str">"""A utility function with linear discounting based on some factor of the negotiation</span><span class="strut">&nbsp;</span></p>
<p id="t1292" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1293" class="pln"><span class="str">    Args:</span><span class="strut">&nbsp;</span></p>
<p id="t1294" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1295" class="pln"><span class="str">        ufun: The utility function that is being discounted</span><span class="strut">&nbsp;</span></p>
<p id="t1296" class="pln"><span class="str">        cost: discount factor</span><span class="strut">&nbsp;</span></p>
<p id="t1297" class="pln"><span class="str">        factor: str -> The name of the AgentMechanismInterface variable based on which discounting operate</span><span class="strut">&nbsp;</span></p>
<p id="t1298" class="pln"><span class="str">        callable -> must receive a mechanism info object and returns a float representing the factor</span><span class="strut">&nbsp;</span></p>
<p id="t1299" class="pln"><span class="str">        power: A power to raise the total cost to before discounting it from the utility_function value</span><span class="strut">&nbsp;</span></p>
<p id="t1300" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1301" class="pln"><span class="str">    """</span><span class="strut">&nbsp;</span></p>
<p id="t1302" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1303" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t1304" class="pln">        <span class="nam">self</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1305" class="pln">        <span class="nam">ufun</span><span class="op">:</span> <span class="nam">UtilityFunction</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1306" class="pln">        <span class="nam">ami</span><span class="op">:</span> <span class="str">"AgentMechanismInterface"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1307" class="pln">        <span class="nam">cost</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">float</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1308" class="pln">        <span class="nam">factor</span><span class="op">:</span> <span class="nam">Union</span><span class="op">[</span><span class="strut">&nbsp;</span></p>
<p id="t1309" class="pln">            <span class="nam">str</span><span class="op">,</span> <span class="nam">Callable</span><span class="op">[</span><span class="op">[</span><span class="str">"AgentMechanismInterface"</span><span class="op">]</span><span class="op">,</span> <span class="nam">float</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t1310" class="pln">        <span class="op">]</span> <span class="op">=</span> <span class="str">"current_step"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1311" class="pln">        <span class="nam">power</span><span class="op">:</span> <span class="nam">float</span> <span class="op">=</span> <span class="num">1.0</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1312" class="pln">        <span class="nam">name</span><span class="op">=</span><span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1313" class="pln">        <span class="nam">reserved_value</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">UtilityValue</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1314" class="pln">        <span class="nam">dynamic_reservation</span><span class="op">=</span><span class="key">True</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1315" class="pln">    <span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1316" class="stm mis">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">__init__</span><span class="op">(</span><span class="nam">name</span><span class="op">=</span><span class="nam">name</span><span class="op">,</span> <span class="nam">reserved_value</span><span class="op">=</span><span class="nam">reserved_value</span><span class="op">,</span> <span class="nam">ami</span><span class="op">=</span><span class="nam">ami</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1317" class="stm mis">        <span class="nam">self</span><span class="op">.</span><span class="nam">ufun</span> <span class="op">=</span> <span class="nam">ufun</span><span class="strut">&nbsp;</span></p>
<p id="t1318" class="stm mis">        <span class="nam">self</span><span class="op">.</span><span class="nam">cost</span> <span class="op">=</span> <span class="nam">cost</span><span class="strut">&nbsp;</span></p>
<p id="t1319" class="stm mis">        <span class="nam">self</span><span class="op">.</span><span class="nam">factor</span> <span class="op">=</span> <span class="nam">factor</span><span class="strut">&nbsp;</span></p>
<p id="t1320" class="stm mis">        <span class="nam">self</span><span class="op">.</span><span class="nam">power</span> <span class="op">=</span> <span class="nam">power</span><span class="strut">&nbsp;</span></p>
<p id="t1321" class="stm mis">        <span class="nam">self</span><span class="op">.</span><span class="nam">dynamic_reservation</span> <span class="op">=</span> <span class="nam">dynamic_reservation</span><span class="strut">&nbsp;</span></p>
<p id="t1322" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1323" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__call__</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">offer</span><span class="op">:</span> <span class="nam">Outcome</span><span class="op">)</span> <span class="op">-></span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">UtilityValue</span><span class="op">]</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1324" class="stm mis">        <span class="key">if</span> <span class="nam">offer</span> <span class="key">is</span> <span class="key">None</span> <span class="key">and</span> <span class="key">not</span> <span class="nam">self</span><span class="op">.</span><span class="nam">dynamic_reservation</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1325" class="stm mis">            <span class="key">return</span> <span class="nam">self</span><span class="op">.</span><span class="nam">reserved_value</span><span class="strut">&nbsp;</span></p>
<p id="t1326" class="stm mis">        <span class="nam">u</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">ufun</span><span class="op">(</span><span class="nam">offer</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1327" class="stm mis">        <span class="key">if</span> <span class="key">not</span> <span class="nam">self</span><span class="op">.</span><span class="nam">cost</span> <span class="key">or</span> <span class="nam">self</span><span class="op">.</span><span class="nam">cost</span> <span class="op">==</span> <span class="num">0.0</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1328" class="stm mis">            <span class="key">return</span> <span class="nam">u</span><span class="strut">&nbsp;</span></p>
<p id="t1329" class="stm mis">        <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">factor</span><span class="op">,</span> <span class="nam">str</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1330" class="stm mis">            <span class="nam">factor</span> <span class="op">=</span> <span class="nam">getattr</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">ami</span><span class="op">.</span><span class="nam">state</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">factor</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1331" class="pln">        <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1332" class="stm mis">            <span class="nam">factor</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">factor</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">ami</span><span class="op">.</span><span class="nam">state</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1333" class="stm mis">        <span class="key">return</span> <span class="nam">u</span> <span class="op">-</span> <span class="op">(</span><span class="op">(</span><span class="nam">factor</span> <span class="op">*</span> <span class="nam">self</span><span class="op">.</span><span class="nam">cost</span><span class="op">)</span> <span class="op">**</span> <span class="nam">self</span><span class="op">.</span><span class="nam">power</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1334" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1335" class="stm run hide_run">    <span class="key">def</span> <span class="nam">xml</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">issues</span><span class="op">:</span> <span class="nam">List</span><span class="op">[</span><span class="nam">Issue</span><span class="op">]</span><span class="op">)</span> <span class="op">-></span> <span class="nam">str</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1336" class="stm mis">        <span class="nam">output</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">ufun</span><span class="op">.</span><span class="nam">xml</span><span class="op">(</span><span class="nam">issues</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1337" class="stm mis">        <span class="nam">output</span> <span class="op">+=</span> <span class="str">"&lt;/objective>\n"</span><span class="strut">&nbsp;</span></p>
<p id="t1338" class="stm mis">        <span class="nam">factor</span> <span class="op">=</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t1339" class="stm mis">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">factor</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1340" class="stm mis">            <span class="nam">factor</span> <span class="op">=</span> <span class="nam">str</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">factor</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1341" class="stm mis">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">cost</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1342" class="stm mis">            <span class="nam">output</span> <span class="op">+=</span> <span class="str">f'&lt;cost value="{self.cost}" '</span><span class="strut">&nbsp;</span></p>
<p id="t1343" class="stm mis">            <span class="key">if</span> <span class="nam">factor</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span> <span class="key">and</span> <span class="nam">factor</span> <span class="op">!=</span> <span class="str">"step"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1344" class="stm mis">                <span class="nam">output</span> <span class="op">+=</span> <span class="str">f' variable="{factor}" '</span><span class="strut">&nbsp;</span></p>
<p id="t1345" class="stm mis">            <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">power</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span> <span class="key">and</span> <span class="nam">self</span><span class="op">.</span><span class="nam">power</span> <span class="op">!=</span> <span class="num">1.0</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1346" class="stm mis">                <span class="nam">output</span> <span class="op">+=</span> <span class="str">f' power="{self.power}" '</span><span class="strut">&nbsp;</span></p>
<p id="t1347" class="stm mis">            <span class="nam">output</span> <span class="op">+=</span> <span class="str">"/>\n"</span><span class="strut">&nbsp;</span></p>
<p id="t1348" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1349" class="stm mis">        <span class="key">return</span> <span class="nam">output</span><span class="strut">&nbsp;</span></p>
<p id="t1350" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1351" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__str__</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1352" class="stm mis">        <span class="key">return</span> <span class="str">f"{self.ufun.type}-cost:{self.cost} raised to {self.power} based on {self.factor}"</span><span class="strut">&nbsp;</span></p>
<p id="t1353" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1354" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__getattr__</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">item</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1355" class="stm mis">        <span class="key">return</span> <span class="nam">getattr</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">ufun</span><span class="op">,</span> <span class="nam">item</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1356" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1357" class="stm run hide_run">    <span class="op">@</span><span class="nam">property</span><span class="strut">&nbsp;</span></p>
<p id="t1358" class="pln">    <span class="key">def</span> <span class="nam">base_type</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1359" class="stm mis">        <span class="key">return</span> <span class="nam">self</span><span class="op">.</span><span class="nam">ufun</span><span class="op">.</span><span class="nam">type</span><span class="strut">&nbsp;</span></p>
<p id="t1360" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1361" class="stm run hide_run">    <span class="op">@</span><span class="nam">property</span><span class="strut">&nbsp;</span></p>
<p id="t1362" class="pln">    <span class="key">def</span> <span class="nam">type</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1363" class="stm mis">        <span class="key">return</span> <span class="nam">self</span><span class="op">.</span><span class="nam">ufun</span><span class="op">.</span><span class="nam">type</span> <span class="op">+</span> <span class="str">"_linearly_discounted"</span><span class="strut">&nbsp;</span></p>
<p id="t1364" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1365" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1366" class="stm run hide_run"><span class="key">class</span> <span class="nam">ConstUFun</span><span class="op">(</span><span class="nam">UtilityFunction</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1367" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t1368" class="pln">        <span class="nam">self</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1369" class="pln">        <span class="nam">value</span><span class="op">:</span> <span class="nam">float</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1370" class="pln">        <span class="nam">name</span><span class="op">=</span><span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1371" class="pln">        <span class="nam">reserved_value</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">UtilityValue</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1372" class="pln">        <span class="nam">ami</span><span class="op">:</span> <span class="nam">AgentMechanismInterface</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1373" class="pln">    <span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1374" class="stm mis">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">__init__</span><span class="op">(</span><span class="nam">name</span><span class="op">=</span><span class="nam">name</span><span class="op">,</span> <span class="nam">reserved_value</span><span class="op">=</span><span class="nam">reserved_value</span><span class="op">,</span> <span class="nam">ami</span><span class="op">=</span><span class="nam">ami</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1375" class="stm mis">        <span class="nam">self</span><span class="op">.</span><span class="nam">value</span> <span class="op">=</span> <span class="nam">value</span><span class="strut">&nbsp;</span></p>
<p id="t1376" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1377" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__call__</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">offer</span><span class="op">:</span> <span class="nam">Outcome</span><span class="op">)</span> <span class="op">-></span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">UtilityValue</span><span class="op">]</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1378" class="stm mis">        <span class="key">if</span> <span class="nam">offer</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1379" class="stm mis">            <span class="key">return</span> <span class="nam">self</span><span class="op">.</span><span class="nam">reserved_value</span><span class="strut">&nbsp;</span></p>
<p id="t1380" class="stm mis">        <span class="key">return</span> <span class="nam">self</span><span class="op">.</span><span class="nam">value</span><span class="strut">&nbsp;</span></p>
<p id="t1381" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1382" class="stm run hide_run">    <span class="key">def</span> <span class="nam">xml</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">issues</span><span class="op">:</span> <span class="nam">List</span><span class="op">[</span><span class="nam">Issue</span><span class="op">]</span><span class="op">)</span> <span class="op">-></span> <span class="nam">str</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1383" class="stm mis">        <span class="key">pass</span><span class="strut">&nbsp;</span></p>
<p id="t1384" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1385" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__str__</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1386" class="stm mis">        <span class="key">return</span> <span class="nam">str</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">value</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1387" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1388" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1389" class="stm run hide_run"><span class="key">def</span> <span class="nam">make_discounted_ufun</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t1390" class="pln">    <span class="nam">ufun</span><span class="op">:</span> <span class="str">"UtilityFunction"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1391" class="pln">    <span class="nam">ami</span><span class="op">:</span> <span class="str">"AgentMechanismInterface"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1392" class="pln">    <span class="nam">cost_per_round</span><span class="op">:</span> <span class="nam">float</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1393" class="pln">    <span class="nam">power_per_round</span><span class="op">:</span> <span class="nam">float</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1394" class="pln">    <span class="nam">discount_per_round</span><span class="op">:</span> <span class="nam">float</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1395" class="pln">    <span class="nam">cost_per_relative_time</span><span class="op">:</span> <span class="nam">float</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1396" class="pln">    <span class="nam">power_per_relative_time</span><span class="op">:</span> <span class="nam">float</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1397" class="pln">    <span class="nam">discount_per_relative_time</span><span class="op">:</span> <span class="nam">float</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1398" class="pln">    <span class="nam">cost_per_real_time</span><span class="op">:</span> <span class="nam">float</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1399" class="pln">    <span class="nam">power_per_real_time</span><span class="op">:</span> <span class="nam">float</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1400" class="pln">    <span class="nam">discount_per_real_time</span><span class="op">:</span> <span class="nam">float</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1401" class="pln">    <span class="nam">dynamic_reservation</span><span class="op">:</span> <span class="nam">bool</span> <span class="op">=</span> <span class="key">True</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1402" class="pln"><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1403" class="stm par run hide_run"><span class="annotate short">1403&#x202F;&#x219B;&#x202F;1404</span><span class="annotate long">line 1403 didn't jump to line 1404, because the condition on line 1403 was never true</span>    <span class="key">if</span> <span class="nam">cost_per_round</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span> <span class="key">and</span> <span class="nam">cost_per_round</span> <span class="op">></span> <span class="num">0.0</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1404" class="stm mis">        <span class="nam">ufun</span> <span class="op">=</span> <span class="nam">LinDiscountedUFun</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t1405" class="pln">            <span class="nam">ufun</span><span class="op">=</span><span class="nam">ufun</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1406" class="pln">            <span class="nam">ami</span><span class="op">=</span><span class="nam">ami</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1407" class="pln">            <span class="nam">cost</span><span class="op">=</span><span class="nam">cost_per_round</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1408" class="pln">            <span class="nam">factor</span><span class="op">=</span><span class="str">"step"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1409" class="pln">            <span class="nam">power</span><span class="op">=</span><span class="nam">power_per_round</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1410" class="pln">            <span class="nam">dynamic_reservation</span><span class="op">=</span><span class="nam">dynamic_reservation</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1411" class="pln">        <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1412" class="stm par run hide_run"><span class="annotate short">1412&#x202F;&#x219B;&#x202F;1413</span><span class="annotate long">line 1412 didn't jump to line 1413, because the condition on line 1412 was never true</span>    <span class="key">if</span> <span class="nam">cost_per_relative_time</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span> <span class="key">and</span> <span class="nam">cost_per_relative_time</span> <span class="op">></span> <span class="num">0.0</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1413" class="stm mis">        <span class="nam">ufun</span> <span class="op">=</span> <span class="nam">LinDiscountedUFun</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t1414" class="pln">            <span class="nam">ufun</span><span class="op">=</span><span class="nam">ufun</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1415" class="pln">            <span class="nam">ami</span><span class="op">=</span><span class="nam">ami</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1416" class="pln">            <span class="nam">cost</span><span class="op">=</span><span class="nam">cost_per_relative_time</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1417" class="pln">            <span class="nam">factor</span><span class="op">=</span><span class="str">"relative_time"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1418" class="pln">            <span class="nam">power</span><span class="op">=</span><span class="nam">power_per_relative_time</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1419" class="pln">            <span class="nam">dynamic_reservation</span><span class="op">=</span><span class="nam">dynamic_reservation</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1420" class="pln">        <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1421" class="stm par run hide_run"><span class="annotate short">1421&#x202F;&#x219B;&#x202F;1422</span><span class="annotate long">line 1421 didn't jump to line 1422, because the condition on line 1421 was never true</span>    <span class="key">if</span> <span class="nam">cost_per_real_time</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span> <span class="key">and</span> <span class="nam">cost_per_real_time</span> <span class="op">></span> <span class="num">0.0</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1422" class="stm mis">        <span class="nam">ufun</span> <span class="op">=</span> <span class="nam">LinDiscountedUFun</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t1423" class="pln">            <span class="nam">ufun</span><span class="op">=</span><span class="nam">ufun</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1424" class="pln">            <span class="nam">ami</span><span class="op">=</span><span class="nam">ami</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1425" class="pln">            <span class="nam">cost</span><span class="op">=</span><span class="nam">cost_per_real_time</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1426" class="pln">            <span class="nam">factor</span><span class="op">=</span><span class="str">"real_time"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1427" class="pln">            <span class="nam">power</span><span class="op">=</span><span class="nam">power_per_real_time</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1428" class="pln">            <span class="nam">dynamic_reservation</span><span class="op">=</span><span class="nam">dynamic_reservation</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1429" class="pln">        <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1430" class="stm run hide_run">    <span class="key">if</span> <span class="nam">discount_per_round</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span> <span class="key">and</span> <span class="nam">discount_per_round</span> <span class="op">></span> <span class="num">0.0</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1431" class="stm run hide_run">        <span class="nam">ufun</span> <span class="op">=</span> <span class="nam">ExpDiscountedUFun</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t1432" class="pln">            <span class="nam">ufun</span><span class="op">=</span><span class="nam">ufun</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1433" class="pln">            <span class="nam">ami</span><span class="op">=</span><span class="nam">ami</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1434" class="pln">            <span class="nam">discount</span><span class="op">=</span><span class="nam">discount_per_round</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1435" class="pln">            <span class="nam">factor</span><span class="op">=</span><span class="str">"step"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1436" class="pln">            <span class="nam">dynamic_reservation</span><span class="op">=</span><span class="nam">dynamic_reservation</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1437" class="pln">        <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1438" class="stm par run hide_run"><span class="annotate short">1438&#x202F;&#x219B;&#x202F;1439</span><span class="annotate long">line 1438 didn't jump to line 1439, because the condition on line 1438 was never true</span>    <span class="key">if</span> <span class="nam">discount_per_relative_time</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span> <span class="key">and</span> <span class="nam">discount_per_relative_time</span> <span class="op">></span> <span class="num">0.0</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1439" class="stm mis">        <span class="nam">ufun</span> <span class="op">=</span> <span class="nam">ExpDiscountedUFun</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t1440" class="pln">            <span class="nam">ufun</span><span class="op">=</span><span class="nam">ufun</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1441" class="pln">            <span class="nam">ami</span><span class="op">=</span><span class="nam">ami</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1442" class="pln">            <span class="nam">discount</span><span class="op">=</span><span class="nam">discount_per_relative_time</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1443" class="pln">            <span class="nam">factor</span><span class="op">=</span><span class="str">"relative_time"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1444" class="pln">            <span class="nam">dynamic_reservation</span><span class="op">=</span><span class="nam">dynamic_reservation</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1445" class="pln">        <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1446" class="stm par run hide_run"><span class="annotate short">1446&#x202F;&#x219B;&#x202F;1447</span><span class="annotate long">line 1446 didn't jump to line 1447, because the condition on line 1446 was never true</span>    <span class="key">if</span> <span class="nam">discount_per_real_time</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span> <span class="key">and</span> <span class="nam">discount_per_real_time</span> <span class="op">></span> <span class="num">0.0</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1447" class="stm mis">        <span class="nam">ufun</span> <span class="op">=</span> <span class="nam">ExpDiscountedUFun</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t1448" class="pln">            <span class="nam">ufun</span><span class="op">=</span><span class="nam">ufun</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1449" class="pln">            <span class="nam">ami</span><span class="op">=</span><span class="nam">ami</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1450" class="pln">            <span class="nam">discount</span><span class="op">=</span><span class="nam">discount_per_real_time</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1451" class="pln">            <span class="nam">factor</span><span class="op">=</span><span class="str">"real_time"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1452" class="pln">            <span class="nam">dynamic_reservation</span><span class="op">=</span><span class="nam">dynamic_reservation</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1453" class="pln">        <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1454" class="stm run hide_run">    <span class="key">return</span> <span class="nam">ufun</span><span class="strut">&nbsp;</span></p>
<p id="t1455" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1456" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1457" class="stm run hide_run"><span class="key">class</span> <span class="nam">LinearUtilityFunction</span><span class="op">(</span><span class="nam">UtilityFunction</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1458" class="pln">    <span class="str">r"""A linear utility function for multi-issue negotiations.</span><span class="strut">&nbsp;</span></p>
<p id="t1459" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1460" class="pln"><span class="str">    Models a linear utility function using predefined weights.</span><span class="strut">&nbsp;</span></p>
<p id="t1461" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1462" class="pln"><span class="str">    Args:</span><span class="strut">&nbsp;</span></p>
<p id="t1463" class="pln"><span class="str">         weights: weights for combining `issue_utilities`</span><span class="strut">&nbsp;</span></p>
<p id="t1464" class="pln"><span class="str">         name: name of the utility function. If None a random name will be generated.</span><span class="strut">&nbsp;</span></p>
<p id="t1465" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1466" class="pln"><span class="str">    Notes:</span><span class="strut">&nbsp;</span></p>
<p id="t1467" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1468" class="pln"><span class="str">        The utility value is calculated as:</span><span class="strut">&nbsp;</span></p>
<p id="t1469" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1470" class="pln"><span class="str">        .. math::</span><span class="strut">&nbsp;</span></p>
<p id="t1471" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1472" class="pln"><span class="str">            u = \sum_{i=0}^{n_{outcomes}-1} {w_i * \omega_i}</span><span class="strut">&nbsp;</span></p>
<p id="t1473" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1474" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1475" class="pln"><span class="str">    Examples:</span><span class="strut">&nbsp;</span></p>
<p id="t1476" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1477" class="pln"><span class="str">        >>> issues = [Issue((10.0, 20.0), 'price'), Issue(5, 'quality')]</span><span class="strut">&nbsp;</span></p>
<p id="t1478" class="pln"><span class="str">        >>> print(list(map(str, issues)))</span><span class="strut">&nbsp;</span></p>
<p id="t1479" class="pln"><span class="str">        ['price: (10.0, 20.0)', 'quality: 5']</span><span class="strut">&nbsp;</span></p>
<p id="t1480" class="pln"><span class="str">        >>> f = LinearUtilityFunction({'price': 1.0, 'quality': 4.0})</span><span class="strut">&nbsp;</span></p>
<p id="t1481" class="pln"><span class="str">        >>> float(f({'quality': 2, 'price': 14.0})</span><span class="strut">&nbsp;</span></p>
<p id="t1482" class="pln"><span class="str">        ...       ) -  (14 + 8)</span><span class="strut">&nbsp;</span></p>
<p id="t1483" class="pln"><span class="str">        0.0</span><span class="strut">&nbsp;</span></p>
<p id="t1484" class="pln"><span class="str">        >>> f = LinearUtilityFunction([1.0, 2.0])</span><span class="strut">&nbsp;</span></p>
<p id="t1485" class="pln"><span class="str">        >>> float(f((2, 14)) - (30))</span><span class="strut">&nbsp;</span></p>
<p id="t1486" class="pln"><span class="str">        0.0</span><span class="strut">&nbsp;</span></p>
<p id="t1487" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1488" class="pln"><span class="str">    Remarks:</span><span class="strut">&nbsp;</span></p>
<p id="t1489" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1490" class="pln"><span class="str">        - The mapping need not use all the issues in the output as the first example shows.</span><span class="strut">&nbsp;</span></p>
<p id="t1491" class="pln"><span class="str">        - If an outcome contains combinations of strings and numeric values that have corresponding weights, an</span><span class="strut">&nbsp;</span></p>
<p id="t1492" class="pln"><span class="str">          exception will be raised when its utility is calculated</span><span class="strut">&nbsp;</span></p>
<p id="t1493" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1494" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1495" class="pln"><span class="str">    """</span><span class="strut">&nbsp;</span></p>
<p id="t1496" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1497" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t1498" class="pln">        <span class="nam">self</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1499" class="pln">        <span class="nam">weights</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">Union</span><span class="op">[</span><span class="nam">Mapping</span><span class="op">[</span><span class="nam">Any</span><span class="op">,</span> <span class="nam">float</span><span class="op">]</span><span class="op">,</span> <span class="nam">Sequence</span><span class="op">[</span><span class="nam">float</span><span class="op">]</span><span class="op">]</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1500" class="pln">        <span class="nam">missing_value</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">float</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1501" class="pln">        <span class="nam">name</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">str</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1502" class="pln">        <span class="nam">reserved_value</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">UtilityValue</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1503" class="pln">        <span class="nam">ami</span><span class="op">:</span> <span class="nam">AgentMechanismInterface</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1504" class="pln">    <span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1505" class="stm run hide_run">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">__init__</span><span class="op">(</span><span class="nam">name</span><span class="op">=</span><span class="nam">name</span><span class="op">,</span> <span class="nam">reserved_value</span><span class="op">=</span><span class="nam">reserved_value</span><span class="op">,</span> <span class="nam">ami</span><span class="op">=</span><span class="nam">ami</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1506" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">weights</span> <span class="op">=</span> <span class="nam">weights</span><span class="strut">&nbsp;</span></p>
<p id="t1507" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">missing_value</span> <span class="op">=</span> <span class="nam">missing_value</span><span class="strut">&nbsp;</span></p>
<p id="t1508" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1509" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__call__</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">offer</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="str">"Outcome"</span><span class="op">]</span><span class="op">)</span> <span class="op">-></span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">UtilityValue</span><span class="op">]</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1510" class="stm run hide_run">        <span class="key">if</span> <span class="nam">offer</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1511" class="stm run hide_run">            <span class="key">return</span> <span class="nam">self</span><span class="op">.</span><span class="nam">reserved_value</span><span class="strut">&nbsp;</span></p>
<p id="t1512" class="stm run hide_run">        <span class="nam">u</span> <span class="op">=</span> <span class="nam">ExactUtilityValue</span><span class="op">(</span><span class="num">0.0</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1513" class="stm run hide_run">        <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">weights</span><span class="op">,</span> <span class="nam">dict</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1514" class="stm run hide_run">            <span class="key">for</span> <span class="nam">k</span><span class="op">,</span> <span class="nam">w</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">weights</span><span class="op">.</span><span class="nam">items</span><span class="op">(</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1515" class="stm run hide_run">                <span class="nam">u</span> <span class="op">+=</span> <span class="nam">w</span> <span class="op">*</span> <span class="nam">iget</span><span class="op">(</span><span class="nam">offer</span><span class="op">,</span> <span class="nam">k</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">missing_value</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1516" class="stm run hide_run">            <span class="key">return</span> <span class="nam">u</span><span class="strut">&nbsp;</span></p>
<p id="t1517" class="stm run hide_run">        <span class="nam">offer</span> <span class="op">=</span> <span class="nam">outcome_as_tuple</span><span class="op">(</span><span class="nam">offer</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1518" class="stm run hide_run">        <span class="key">return</span> <span class="nam">sum</span><span class="op">(</span><span class="nam">w</span> <span class="op">*</span> <span class="nam">v</span> <span class="key">for</span> <span class="nam">w</span><span class="op">,</span> <span class="nam">v</span> <span class="key">in</span> <span class="nam">zip</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">weights</span><span class="op">,</span> <span class="nam">offer</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1519" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1520" class="stm run hide_run">    <span class="key">def</span> <span class="nam">xml</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">issues</span><span class="op">:</span> <span class="nam">List</span><span class="op">[</span><span class="nam">Issue</span><span class="op">]</span><span class="op">)</span> <span class="op">-></span> <span class="nam">str</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1521" class="pln">        <span class="str">""" Generates an XML string representing the utility function</span><span class="strut">&nbsp;</span></p>
<p id="t1522" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1523" class="pln"><span class="str">        Args:</span><span class="strut">&nbsp;</span></p>
<p id="t1524" class="pln"><span class="str">            issues:</span><span class="strut">&nbsp;</span></p>
<p id="t1525" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1526" class="pln"><span class="str">        Examples:</span><span class="strut">&nbsp;</span></p>
<p id="t1527" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1528" class="pln"><span class="str">            >>> issues = [Issue(values=10, name='i1'), Issue(values=4, name='i2')]</span><span class="strut">&nbsp;</span></p>
<p id="t1529" class="pln"><span class="str">            >>> f = LinearUtilityFunction(weights=[1.0, 4.0])</span><span class="strut">&nbsp;</span></p>
<p id="t1530" class="pln"><span class="str">            >>> print(f.xml(issues))</span><span class="strut">&nbsp;</span></p>
<p id="t1531" class="pln"><span class="str">            &lt;issue index="1" etype="discrete" type="discrete" vtype="discrete" name="i1"></span><span class="strut">&nbsp;</span></p>
<p id="t1532" class="pln"><span class="str">                &lt;item index="1" value="0" evaluation="0" /></span><span class="strut">&nbsp;</span></p>
<p id="t1533" class="pln"><span class="str">                &lt;item index="2" value="1" evaluation="1" /></span><span class="strut">&nbsp;</span></p>
<p id="t1534" class="pln"><span class="str">                &lt;item index="3" value="2" evaluation="2" /></span><span class="strut">&nbsp;</span></p>
<p id="t1535" class="pln"><span class="str">                &lt;item index="4" value="3" evaluation="3" /></span><span class="strut">&nbsp;</span></p>
<p id="t1536" class="pln"><span class="str">                &lt;item index="5" value="4" evaluation="4" /></span><span class="strut">&nbsp;</span></p>
<p id="t1537" class="pln"><span class="str">                &lt;item index="6" value="5" evaluation="5" /></span><span class="strut">&nbsp;</span></p>
<p id="t1538" class="pln"><span class="str">                &lt;item index="7" value="6" evaluation="6" /></span><span class="strut">&nbsp;</span></p>
<p id="t1539" class="pln"><span class="str">                &lt;item index="8" value="7" evaluation="7" /></span><span class="strut">&nbsp;</span></p>
<p id="t1540" class="pln"><span class="str">                &lt;item index="9" value="8" evaluation="8" /></span><span class="strut">&nbsp;</span></p>
<p id="t1541" class="pln"><span class="str">                &lt;item index="10" value="9" evaluation="9" /></span><span class="strut">&nbsp;</span></p>
<p id="t1542" class="pln"><span class="str">            &lt;/issue></span><span class="strut">&nbsp;</span></p>
<p id="t1543" class="pln"><span class="str">            &lt;issue index="2" etype="discrete" type="discrete" vtype="discrete" name="i2"></span><span class="strut">&nbsp;</span></p>
<p id="t1544" class="pln"><span class="str">                &lt;item index="1" value="0" evaluation="0" /></span><span class="strut">&nbsp;</span></p>
<p id="t1545" class="pln"><span class="str">                &lt;item index="2" value="1" evaluation="1" /></span><span class="strut">&nbsp;</span></p>
<p id="t1546" class="pln"><span class="str">                &lt;item index="3" value="2" evaluation="2" /></span><span class="strut">&nbsp;</span></p>
<p id="t1547" class="pln"><span class="str">                &lt;item index="4" value="3" evaluation="3" /></span><span class="strut">&nbsp;</span></p>
<p id="t1548" class="pln"><span class="str">            &lt;/issue></span><span class="strut">&nbsp;</span></p>
<p id="t1549" class="pln"><span class="str">            &lt;weight index="1" value="1.0"></span><span class="strut">&nbsp;</span></p>
<p id="t1550" class="pln"><span class="str">            &lt;/weight></span><span class="strut">&nbsp;</span></p>
<p id="t1551" class="pln"><span class="str">            &lt;weight index="2" value="4.0"></span><span class="strut">&nbsp;</span></p>
<p id="t1552" class="pln"><span class="str">            &lt;/weight></span><span class="strut">&nbsp;</span></p>
<p id="t1553" class="pln"><span class="str">            &lt;BLANKLINE></span><span class="strut">&nbsp;</span></p>
<p id="t1554" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1555" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t1556" class="stm run hide_run">        <span class="nam">output</span> <span class="op">=</span> <span class="str">""</span><span class="strut">&nbsp;</span></p>
<p id="t1557" class="stm run hide_run">        <span class="nam">keys</span> <span class="op">=</span> <span class="nam">list</span><span class="op">(</span><span class="nam">ikeys</span><span class="op">(</span><span class="nam">issues</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1558" class="stm run hide_run">        <span class="key">for</span> <span class="nam">i</span><span class="op">,</span> <span class="nam">k</span> <span class="key">in</span> <span class="nam">enumerate</span><span class="op">(</span><span class="nam">keys</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1559" class="stm run hide_run">            <span class="nam">issue_name</span> <span class="op">=</span> <span class="nam">iget</span><span class="op">(</span><span class="nam">issues</span><span class="op">,</span> <span class="nam">k</span><span class="op">)</span><span class="op">.</span><span class="nam">name</span><span class="strut">&nbsp;</span></p>
<p id="t1560" class="stm run hide_run">            <span class="nam">output</span> <span class="op">+=</span> <span class="str">f'&lt;issue index="{i+1}" etype="discrete" type="discrete" vtype="discrete" name="{issue_name}">\n'</span><span class="strut">&nbsp;</span></p>
<p id="t1561" class="stm run hide_run">            <span class="nam">vals</span> <span class="op">=</span> <span class="nam">iget</span><span class="op">(</span><span class="nam">issues</span><span class="op">,</span> <span class="nam">k</span><span class="op">)</span><span class="op">.</span><span class="nam">all</span><span class="strut">&nbsp;</span></p>
<p id="t1562" class="stm run hide_run">            <span class="key">for</span> <span class="nam">indx</span><span class="op">,</span> <span class="nam">u</span> <span class="key">in</span> <span class="nam">enumerate</span><span class="op">(</span><span class="nam">vals</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1563" class="stm run hide_run">                <span class="nam">output</span> <span class="op">+=</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t1564" class="pln">                    <span class="str">f'    &lt;item index="{indx+1}" value="{u}" evaluation="{u}" />\n'</span><span class="strut">&nbsp;</span></p>
<p id="t1565" class="pln">                <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1566" class="stm run hide_run">            <span class="nam">output</span> <span class="op">+=</span> <span class="str">"&lt;/issue>\n"</span><span class="strut">&nbsp;</span></p>
<p id="t1567" class="stm run hide_run">        <span class="key">for</span> <span class="nam">i</span><span class="op">,</span> <span class="nam">k</span> <span class="key">in</span> <span class="nam">enumerate</span><span class="op">(</span><span class="nam">keys</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1568" class="stm run hide_run">            <span class="nam">output</span> <span class="op">+=</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t1569" class="pln">                <span class="str">f'&lt;weight index="{i+1}" value="{iget(self.weights, k)}">\n&lt;/weight>\n'</span><span class="strut">&nbsp;</span></p>
<p id="t1570" class="pln">            <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1571" class="stm run hide_run">        <span class="key">return</span> <span class="nam">output</span><span class="strut">&nbsp;</span></p>
<p id="t1572" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1573" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__str__</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1574" class="stm mis">        <span class="key">return</span> <span class="str">f"w: {self.weights}"</span><span class="strut">&nbsp;</span></p>
<p id="t1575" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1576" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1577" class="stm run hide_run"><span class="key">class</span> <span class="nam">LinearUtilityAggregationFunction</span><span class="op">(</span><span class="nam">UtilityFunction</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1578" class="pln">    <span class="str">r"""A linear aggregation utility function for multi-issue negotiations.</span><span class="strut">&nbsp;</span></p>
<p id="t1579" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1580" class="pln"><span class="str">    Models a linear utility function using predefined weights:\.</span><span class="strut">&nbsp;</span></p>
<p id="t1581" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1582" class="pln"><span class="str">    Args:</span><span class="strut">&nbsp;</span></p>
<p id="t1583" class="pln"><span class="str">         issue_utilities: utility functions for individual issues</span><span class="strut">&nbsp;</span></p>
<p id="t1584" class="pln"><span class="str">         weights: weights for combining `issue_utilities`</span><span class="strut">&nbsp;</span></p>
<p id="t1585" class="pln"><span class="str">         name: name of the utility function. If None a random name will be generated.</span><span class="strut">&nbsp;</span></p>
<p id="t1586" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1587" class="pln"><span class="str">    Notes:</span><span class="strut">&nbsp;</span></p>
<p id="t1588" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1589" class="pln"><span class="str">        The utility value is calculated as:</span><span class="strut">&nbsp;</span></p>
<p id="t1590" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1591" class="pln"><span class="str">        .. math::</span><span class="strut">&nbsp;</span></p>
<p id="t1592" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1593" class="pln"><span class="str">            u = \sum_{i=0}^{n_{outcomes}-1} {w_i * u_i(\omega_i)}</span><span class="strut">&nbsp;</span></p>
<p id="t1594" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1595" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1596" class="pln"><span class="str">    Examples:</span><span class="strut">&nbsp;</span></p>
<p id="t1597" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1598" class="pln"><span class="str">        >>> issues = [Issue((10.0, 20.0), 'price'), Issue(['delivered', 'not delivered'], 'delivery')</span><span class="strut">&nbsp;</span></p>
<p id="t1599" class="pln"><span class="str">        ...           , Issue(5, 'quality')]</span><span class="strut">&nbsp;</span></p>
<p id="t1600" class="pln"><span class="str">        >>> print(list(map(str, issues)))</span><span class="strut">&nbsp;</span></p>
<p id="t1601" class="pln"><span class="str">        ['price: (10.0, 20.0)', "delivery: ['delivered', 'not delivered']", 'quality: 5']</span><span class="strut">&nbsp;</span></p>
<p id="t1602" class="pln"><span class="str">        >>> f = LinearUtilityAggregationFunction({'price': lambda x: 2.0*x</span><span class="strut">&nbsp;</span></p>
<p id="t1603" class="pln"><span class="str">        ...                          , 'delivery': {'delivered': 10, 'not delivered': -10}</span><span class="strut">&nbsp;</span></p>
<p id="t1604" class="pln"><span class="str">        ...                          , 'quality': MappingUtilityFunction(lambda x: x-3)}</span><span class="strut">&nbsp;</span></p>
<p id="t1605" class="pln"><span class="str">        ...         , weights={'price': 1.0, 'delivery': 2.0, 'quality': 4.0})</span><span class="strut">&nbsp;</span></p>
<p id="t1606" class="pln"><span class="str">        >>> float(f({'quality': 2, 'price': 14.0, 'delivery': 'delivered'})</span><span class="strut">&nbsp;</span></p>
<p id="t1607" class="pln"><span class="str">        ...       ) -  (1.0*(2.0*14)+2.0*10+4.0*(2.0-3.0))</span><span class="strut">&nbsp;</span></p>
<p id="t1608" class="pln"><span class="str">        0.0</span><span class="strut">&nbsp;</span></p>
<p id="t1609" class="pln"><span class="str">        >>> f = LinearUtilityAggregationFunction({'price': lambda x: 2.0*x</span><span class="strut">&nbsp;</span></p>
<p id="t1610" class="pln"><span class="str">        ...                          , 'delivery': {'delivered': 10, 'not delivered': -10}}</span><span class="strut">&nbsp;</span></p>
<p id="t1611" class="pln"><span class="str">        ...         , weights={'price': 1.0, 'delivery': 2.0})</span><span class="strut">&nbsp;</span></p>
<p id="t1612" class="pln"><span class="str">        >>> float(f({'quality': 2, 'price': 14.0, 'delivery': 'delivered'})) - (1.0*(2.0*14)+2.0*10)</span><span class="strut">&nbsp;</span></p>
<p id="t1613" class="pln"><span class="str">        0.0</span><span class="strut">&nbsp;</span></p>
<p id="t1614" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1615" class="pln"><span class="str">        You can use lists instead of dictionaries for defining outcomes, weights and nonlinearity</span><span class="strut">&nbsp;</span></p>
<p id="t1616" class="pln"><span class="str">        but that is less readable</span><span class="strut">&nbsp;</span></p>
<p id="t1617" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1618" class="pln"><span class="str">        >>> f = LinearUtilityAggregationFunction([lambda x: 2.0*x</span><span class="strut">&nbsp;</span></p>
<p id="t1619" class="pln"><span class="str">        ...                          , {'delivered': 10, 'not delivered': -10}</span><span class="strut">&nbsp;</span></p>
<p id="t1620" class="pln"><span class="str">        ...                          , MappingUtilityFunction(lambda x: x-3)]</span><span class="strut">&nbsp;</span></p>
<p id="t1621" class="pln"><span class="str">        ...         , weights=[1.0, 2.0, 4.0])</span><span class="strut">&nbsp;</span></p>
<p id="t1622" class="pln"><span class="str">        >>> float(f((14.0, 'delivered', 2))) - (1.0*(2.0*14)+2.0*10+4.0*(2.0-3.0))</span><span class="strut">&nbsp;</span></p>
<p id="t1623" class="pln"><span class="str">        0.0</span><span class="strut">&nbsp;</span></p>
<p id="t1624" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1625" class="pln"><span class="str">    Remarks:</span><span class="strut">&nbsp;</span></p>
<p id="t1626" class="pln"><span class="str">        The mapping need not use all the issues in the output as the last example show.</span><span class="strut">&nbsp;</span></p>
<p id="t1627" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1628" class="pln"><span class="str">    """</span><span class="strut">&nbsp;</span></p>
<p id="t1629" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1630" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t1631" class="pln">        <span class="nam">self</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1632" class="pln">        <span class="nam">issue_utilities</span><span class="op">:</span> <span class="nam">Union</span><span class="op">[</span><span class="strut">&nbsp;</span></p>
<p id="t1633" class="pln">            <span class="nam">MutableMapping</span><span class="op">[</span><span class="nam">Any</span><span class="op">,</span> <span class="nam">GenericMapping</span><span class="op">]</span><span class="op">,</span> <span class="nam">Sequence</span><span class="op">[</span><span class="nam">GenericMapping</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t1634" class="pln">        <span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1635" class="pln">        <span class="nam">weights</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">Union</span><span class="op">[</span><span class="nam">Mapping</span><span class="op">[</span><span class="nam">Any</span><span class="op">,</span> <span class="nam">float</span><span class="op">]</span><span class="op">,</span> <span class="nam">Sequence</span><span class="op">[</span><span class="nam">float</span><span class="op">]</span><span class="op">]</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1636" class="pln">        <span class="nam">name</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">str</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1637" class="pln">        <span class="nam">reserved_value</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">UtilityValue</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1638" class="pln">        <span class="nam">ami</span><span class="op">:</span> <span class="nam">AgentMechanismInterface</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1639" class="pln">    <span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1640" class="stm run hide_run">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">__init__</span><span class="op">(</span><span class="nam">name</span><span class="op">=</span><span class="nam">name</span><span class="op">,</span> <span class="nam">reserved_value</span><span class="op">=</span><span class="nam">reserved_value</span><span class="op">,</span> <span class="nam">ami</span><span class="op">=</span><span class="nam">ami</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1641" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">issue_utilities</span> <span class="op">=</span> <span class="nam">issue_utilities</span><span class="strut">&nbsp;</span></p>
<p id="t1642" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">weights</span> <span class="op">=</span> <span class="nam">weights</span><span class="strut">&nbsp;</span></p>
<p id="t1643" class="stm run hide_run">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">weights</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1644" class="stm run hide_run">            <span class="nam">self</span><span class="op">.</span><span class="nam">weights</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span><span class="strut">&nbsp;</span></p>
<p id="t1645" class="stm run hide_run">            <span class="key">for</span> <span class="nam">k</span> <span class="key">in</span> <span class="nam">ikeys</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">issue_utilities</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1646" class="stm run hide_run">                <span class="nam">self</span><span class="op">.</span><span class="nam">weights</span><span class="op">[</span><span class="nam">k</span><span class="op">]</span> <span class="op">=</span> <span class="num">1.0</span><span class="strut">&nbsp;</span></p>
<p id="t1647" class="stm run hide_run">        <span class="key">for</span> <span class="nam">k</span><span class="op">,</span> <span class="nam">v</span> <span class="key">in</span> <span class="nam">ienumerate</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">issue_utilities</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1648" class="stm run hide_run">            <span class="nam">self</span><span class="op">.</span><span class="nam">issue_utilities</span><span class="op">[</span><span class="nam">k</span><span class="op">]</span> <span class="op">=</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t1649" class="pln">                <span class="nam">v</span> <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">v</span><span class="op">,</span> <span class="nam">UtilityFunction</span><span class="op">)</span> <span class="key">else</span> <span class="nam">MappingUtilityFunction</span><span class="op">(</span><span class="nam">v</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1650" class="pln">            <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1651" class="stm run hide_run">        <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">issue_utilities</span><span class="op">,</span> <span class="nam">dict</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1652" class="stm run hide_run">            <span class="nam">self</span><span class="op">.</span><span class="nam">issue_indices</span> <span class="op">=</span> <span class="nam">dict</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t1653" class="pln">                <span class="nam">zip</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">issue_utilities</span><span class="op">.</span><span class="nam">keys</span><span class="op">(</span><span class="op">)</span><span class="op">,</span> <span class="nam">range</span><span class="op">(</span><span class="nam">len</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">issue_utilities</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1654" class="pln">            <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1655" class="pln">        <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1656" class="stm run hide_run">            <span class="nam">self</span><span class="op">.</span><span class="nam">issue_indices</span> <span class="op">=</span> <span class="nam">dict</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t1657" class="pln">                <span class="nam">zip</span><span class="op">(</span><span class="nam">range</span><span class="op">(</span><span class="nam">len</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">issue_utilities</span><span class="op">)</span><span class="op">)</span><span class="op">,</span> <span class="nam">range</span><span class="op">(</span><span class="nam">len</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">issue_utilities</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1658" class="pln">            <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1659" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1660" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__call__</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">offer</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="str">"Outcome"</span><span class="op">]</span><span class="op">)</span> <span class="op">-></span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">UtilityValue</span><span class="op">]</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1661" class="stm par run hide_run"><span class="annotate short">1661&#x202F;&#x219B;&#x202F;1662</span><span class="annotate long">line 1661 didn't jump to line 1662, because the condition on line 1661 was never true</span>        <span class="key">if</span> <span class="nam">offer</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1662" class="stm mis">            <span class="key">return</span> <span class="nam">self</span><span class="op">.</span><span class="nam">reserved_value</span><span class="strut">&nbsp;</span></p>
<p id="t1663" class="stm run hide_run">        <span class="nam">u</span> <span class="op">=</span> <span class="nam">ExactUtilityValue</span><span class="op">(</span><span class="num">0.0</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1664" class="stm run hide_run">        <span class="key">for</span> <span class="nam">k</span> <span class="key">in</span> <span class="nam">ikeys</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">issue_utilities</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1665" class="stm run hide_run">            <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">offer</span><span class="op">,</span> <span class="nam">tuple</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1666" class="stm run hide_run">                <span class="nam">v</span> <span class="op">=</span> <span class="nam">iget</span><span class="op">(</span><span class="nam">offer</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">issue_indices</span><span class="op">[</span><span class="nam">k</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1667" class="pln">            <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1668" class="stm run hide_run">                <span class="nam">v</span> <span class="op">=</span> <span class="nam">iget</span><span class="op">(</span><span class="nam">offer</span><span class="op">,</span> <span class="nam">k</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1669" class="stm run hide_run">            <span class="nam">current_utility</span> <span class="op">=</span> <span class="nam">gmap</span><span class="op">(</span><span class="nam">iget</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">issue_utilities</span><span class="op">,</span> <span class="nam">k</span><span class="op">)</span><span class="op">,</span> <span class="nam">v</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1670" class="stm par run hide_run"><span class="annotate short">1670&#x202F;&#x219B;&#x202F;1671</span><span class="annotate long">line 1670 didn't jump to line 1671, because the condition on line 1670 was never true</span>            <span class="key">if</span> <span class="nam">current_utility</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1671" class="stm mis">                <span class="key">return</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t1672" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1673" class="stm run hide_run">            <span class="nam">w</span> <span class="op">=</span> <span class="nam">iget</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">weights</span><span class="op">,</span> <span class="nam">k</span><span class="op">)</span>  <span class="com"># type: ignore</span><span class="strut">&nbsp;</span></p>
<p id="t1674" class="stm par run hide_run"><span class="annotate short">1674&#x202F;&#x219B;&#x202F;1675</span><span class="annotate long">line 1674 didn't jump to line 1675, because the condition on line 1674 was never true</span>            <span class="key">if</span> <span class="nam">w</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1675" class="stm mis">                <span class="key">return</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t1676" class="stm run hide_run">            <span class="key">try</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1677" class="stm run hide_run">                <span class="nam">u</span> <span class="op">+=</span> <span class="nam">w</span> <span class="op">*</span> <span class="nam">current_utility</span><span class="strut">&nbsp;</span></p>
<p id="t1678" class="stm mis">            <span class="key">except</span> <span class="nam">FloatingPointError</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1679" class="stm mis">                <span class="key">continue</span><span class="strut">&nbsp;</span></p>
<p id="t1680" class="stm run hide_run">        <span class="key">return</span> <span class="nam">u</span><span class="strut">&nbsp;</span></p>
<p id="t1681" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1682" class="stm run hide_run">    <span class="key">def</span> <span class="nam">xml</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">issues</span><span class="op">:</span> <span class="nam">List</span><span class="op">[</span><span class="nam">Issue</span><span class="op">]</span><span class="op">)</span> <span class="op">-></span> <span class="nam">str</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1683" class="pln">        <span class="str">""" Generates an XML string representing the utility function</span><span class="strut">&nbsp;</span></p>
<p id="t1684" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1685" class="pln"><span class="str">        Args:</span><span class="strut">&nbsp;</span></p>
<p id="t1686" class="pln"><span class="str">            issues:</span><span class="strut">&nbsp;</span></p>
<p id="t1687" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1688" class="pln"><span class="str">        Examples:</span><span class="strut">&nbsp;</span></p>
<p id="t1689" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1690" class="pln"><span class="str">            >>> issues = [Issue(values=10, name='i1'), Issue(values=['delivered', 'not delivered'], name='i2')</span><span class="strut">&nbsp;</span></p>
<p id="t1691" class="pln"><span class="str">            ...     , Issue(values=4, name='i3')]</span><span class="strut">&nbsp;</span></p>
<p id="t1692" class="pln"><span class="str">            >>> f = LinearUtilityAggregationFunction([lambda x: 2.0*x</span><span class="strut">&nbsp;</span></p>
<p id="t1693" class="pln"><span class="str">            ...                          , {'delivered': 10, 'not delivered': -10}</span><span class="strut">&nbsp;</span></p>
<p id="t1694" class="pln"><span class="str">            ...                          , MappingUtilityFunction(lambda x: x-3)]</span><span class="strut">&nbsp;</span></p>
<p id="t1695" class="pln"><span class="str">            ...         , weights=[1.0, 2.0, 4.0])</span><span class="strut">&nbsp;</span></p>
<p id="t1696" class="pln"><span class="str">            >>> print(f.xml(issues))</span><span class="strut">&nbsp;</span></p>
<p id="t1697" class="pln"><span class="str">            &lt;issue index="1" etype="discrete" type="discrete" vtype="discrete" name="i1"></span><span class="strut">&nbsp;</span></p>
<p id="t1698" class="pln"><span class="str">                &lt;item index="1" value="0" evaluation="0.0" /></span><span class="strut">&nbsp;</span></p>
<p id="t1699" class="pln"><span class="str">                &lt;item index="2" value="1" evaluation="2.0" /></span><span class="strut">&nbsp;</span></p>
<p id="t1700" class="pln"><span class="str">                &lt;item index="3" value="2" evaluation="4.0" /></span><span class="strut">&nbsp;</span></p>
<p id="t1701" class="pln"><span class="str">                &lt;item index="4" value="3" evaluation="6.0" /></span><span class="strut">&nbsp;</span></p>
<p id="t1702" class="pln"><span class="str">                &lt;item index="5" value="4" evaluation="8.0" /></span><span class="strut">&nbsp;</span></p>
<p id="t1703" class="pln"><span class="str">                &lt;item index="6" value="5" evaluation="10.0" /></span><span class="strut">&nbsp;</span></p>
<p id="t1704" class="pln"><span class="str">                &lt;item index="7" value="6" evaluation="12.0" /></span><span class="strut">&nbsp;</span></p>
<p id="t1705" class="pln"><span class="str">                &lt;item index="8" value="7" evaluation="14.0" /></span><span class="strut">&nbsp;</span></p>
<p id="t1706" class="pln"><span class="str">                &lt;item index="9" value="8" evaluation="16.0" /></span><span class="strut">&nbsp;</span></p>
<p id="t1707" class="pln"><span class="str">                &lt;item index="10" value="9" evaluation="18.0" /></span><span class="strut">&nbsp;</span></p>
<p id="t1708" class="pln"><span class="str">            &lt;/issue></span><span class="strut">&nbsp;</span></p>
<p id="t1709" class="pln"><span class="str">            &lt;issue index="2" etype="discrete" type="discrete" vtype="discrete" name="i2"></span><span class="strut">&nbsp;</span></p>
<p id="t1710" class="pln"><span class="str">                &lt;item index="1" value="delivered" evaluation="10" /></span><span class="strut">&nbsp;</span></p>
<p id="t1711" class="pln"><span class="str">                &lt;item index="2" value="not delivered" evaluation="-10" /></span><span class="strut">&nbsp;</span></p>
<p id="t1712" class="pln"><span class="str">            &lt;/issue></span><span class="strut">&nbsp;</span></p>
<p id="t1713" class="pln"><span class="str">            &lt;issue index="3" etype="discrete" type="discrete" vtype="discrete" name="i3"></span><span class="strut">&nbsp;</span></p>
<p id="t1714" class="pln"><span class="str">                &lt;item index="1" value="0" evaluation="-3" /></span><span class="strut">&nbsp;</span></p>
<p id="t1715" class="pln"><span class="str">                &lt;item index="2" value="1" evaluation="-2" /></span><span class="strut">&nbsp;</span></p>
<p id="t1716" class="pln"><span class="str">                &lt;item index="3" value="2" evaluation="-1" /></span><span class="strut">&nbsp;</span></p>
<p id="t1717" class="pln"><span class="str">                &lt;item index="4" value="3" evaluation="0" /></span><span class="strut">&nbsp;</span></p>
<p id="t1718" class="pln"><span class="str">            &lt;/issue></span><span class="strut">&nbsp;</span></p>
<p id="t1719" class="pln"><span class="str">            &lt;weight index="1" value="1.0"></span><span class="strut">&nbsp;</span></p>
<p id="t1720" class="pln"><span class="str">            &lt;/weight></span><span class="strut">&nbsp;</span></p>
<p id="t1721" class="pln"><span class="str">            &lt;weight index="2" value="2.0"></span><span class="strut">&nbsp;</span></p>
<p id="t1722" class="pln"><span class="str">            &lt;/weight></span><span class="strut">&nbsp;</span></p>
<p id="t1723" class="pln"><span class="str">            &lt;weight index="3" value="4.0"></span><span class="strut">&nbsp;</span></p>
<p id="t1724" class="pln"><span class="str">            &lt;/weight></span><span class="strut">&nbsp;</span></p>
<p id="t1725" class="pln"><span class="str">            &lt;BLANKLINE></span><span class="strut">&nbsp;</span></p>
<p id="t1726" class="pln"><span class="str">            >>> print(f.xml({i:_ for i, _ in enumerate(issues)}))</span><span class="strut">&nbsp;</span></p>
<p id="t1727" class="pln"><span class="str">            &lt;issue index="1" etype="discrete" type="discrete" vtype="discrete" name="i1"></span><span class="strut">&nbsp;</span></p>
<p id="t1728" class="pln"><span class="str">                &lt;item index="1" value="0" evaluation="0.0" /></span><span class="strut">&nbsp;</span></p>
<p id="t1729" class="pln"><span class="str">                &lt;item index="2" value="1" evaluation="2.0" /></span><span class="strut">&nbsp;</span></p>
<p id="t1730" class="pln"><span class="str">                &lt;item index="3" value="2" evaluation="4.0" /></span><span class="strut">&nbsp;</span></p>
<p id="t1731" class="pln"><span class="str">                &lt;item index="4" value="3" evaluation="6.0" /></span><span class="strut">&nbsp;</span></p>
<p id="t1732" class="pln"><span class="str">                &lt;item index="5" value="4" evaluation="8.0" /></span><span class="strut">&nbsp;</span></p>
<p id="t1733" class="pln"><span class="str">                &lt;item index="6" value="5" evaluation="10.0" /></span><span class="strut">&nbsp;</span></p>
<p id="t1734" class="pln"><span class="str">                &lt;item index="7" value="6" evaluation="12.0" /></span><span class="strut">&nbsp;</span></p>
<p id="t1735" class="pln"><span class="str">                &lt;item index="8" value="7" evaluation="14.0" /></span><span class="strut">&nbsp;</span></p>
<p id="t1736" class="pln"><span class="str">                &lt;item index="9" value="8" evaluation="16.0" /></span><span class="strut">&nbsp;</span></p>
<p id="t1737" class="pln"><span class="str">                &lt;item index="10" value="9" evaluation="18.0" /></span><span class="strut">&nbsp;</span></p>
<p id="t1738" class="pln"><span class="str">            &lt;/issue></span><span class="strut">&nbsp;</span></p>
<p id="t1739" class="pln"><span class="str">            &lt;issue index="2" etype="discrete" type="discrete" vtype="discrete" name="i2"></span><span class="strut">&nbsp;</span></p>
<p id="t1740" class="pln"><span class="str">                &lt;item index="1" value="delivered" evaluation="10" /></span><span class="strut">&nbsp;</span></p>
<p id="t1741" class="pln"><span class="str">                &lt;item index="2" value="not delivered" evaluation="-10" /></span><span class="strut">&nbsp;</span></p>
<p id="t1742" class="pln"><span class="str">            &lt;/issue></span><span class="strut">&nbsp;</span></p>
<p id="t1743" class="pln"><span class="str">            &lt;issue index="3" etype="discrete" type="discrete" vtype="discrete" name="i3"></span><span class="strut">&nbsp;</span></p>
<p id="t1744" class="pln"><span class="str">                &lt;item index="1" value="0" evaluation="-3" /></span><span class="strut">&nbsp;</span></p>
<p id="t1745" class="pln"><span class="str">                &lt;item index="2" value="1" evaluation="-2" /></span><span class="strut">&nbsp;</span></p>
<p id="t1746" class="pln"><span class="str">                &lt;item index="3" value="2" evaluation="-1" /></span><span class="strut">&nbsp;</span></p>
<p id="t1747" class="pln"><span class="str">                &lt;item index="4" value="3" evaluation="0" /></span><span class="strut">&nbsp;</span></p>
<p id="t1748" class="pln"><span class="str">            &lt;/issue></span><span class="strut">&nbsp;</span></p>
<p id="t1749" class="pln"><span class="str">            &lt;weight index="1" value="1.0"></span><span class="strut">&nbsp;</span></p>
<p id="t1750" class="pln"><span class="str">            &lt;/weight></span><span class="strut">&nbsp;</span></p>
<p id="t1751" class="pln"><span class="str">            &lt;weight index="2" value="2.0"></span><span class="strut">&nbsp;</span></p>
<p id="t1752" class="pln"><span class="str">            &lt;/weight></span><span class="strut">&nbsp;</span></p>
<p id="t1753" class="pln"><span class="str">            &lt;weight index="3" value="4.0"></span><span class="strut">&nbsp;</span></p>
<p id="t1754" class="pln"><span class="str">            &lt;/weight></span><span class="strut">&nbsp;</span></p>
<p id="t1755" class="pln"><span class="str">            &lt;BLANKLINE></span><span class="strut">&nbsp;</span></p>
<p id="t1756" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1757" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t1758" class="stm run hide_run">        <span class="nam">output</span> <span class="op">=</span> <span class="str">""</span><span class="strut">&nbsp;</span></p>
<p id="t1759" class="stm run hide_run">        <span class="nam">keys</span> <span class="op">=</span> <span class="nam">list</span><span class="op">(</span><span class="nam">ikeys</span><span class="op">(</span><span class="nam">issues</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1760" class="stm run hide_run">        <span class="key">for</span> <span class="nam">i</span><span class="op">,</span> <span class="nam">k</span> <span class="key">in</span> <span class="nam">enumerate</span><span class="op">(</span><span class="nam">keys</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1761" class="stm run hide_run">            <span class="nam">issue_name</span> <span class="op">=</span> <span class="nam">iget</span><span class="op">(</span><span class="nam">issues</span><span class="op">,</span> <span class="nam">k</span><span class="op">)</span><span class="op">.</span><span class="nam">name</span><span class="strut">&nbsp;</span></p>
<p id="t1762" class="stm run hide_run">            <span class="nam">output</span> <span class="op">+=</span> <span class="str">f'&lt;issue index="{i+1}" etype="discrete" type="discrete" vtype="discrete" name="{issue_name}">\n'</span><span class="strut">&nbsp;</span></p>
<p id="t1763" class="stm run hide_run">            <span class="nam">vals</span> <span class="op">=</span> <span class="nam">iget</span><span class="op">(</span><span class="nam">issues</span><span class="op">,</span> <span class="nam">k</span><span class="op">)</span><span class="op">.</span><span class="nam">all</span><span class="strut">&nbsp;</span></p>
<p id="t1764" class="stm run hide_run">            <span class="key">for</span> <span class="nam">indx</span><span class="op">,</span> <span class="nam">v</span> <span class="key">in</span> <span class="nam">enumerate</span><span class="op">(</span><span class="nam">vals</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1765" class="stm run hide_run">                <span class="key">try</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1766" class="stm run hide_run">                    <span class="nam">u</span> <span class="op">=</span> <span class="nam">gmap</span><span class="op">(</span><span class="nam">iget</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">issue_utilities</span><span class="op">,</span> <span class="nam">issue_name</span><span class="op">)</span><span class="op">,</span> <span class="nam">v</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1767" class="stm run hide_run">                <span class="key">except</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1768" class="stm run hide_run">                    <span class="nam">u</span> <span class="op">=</span> <span class="nam">gmap</span><span class="op">(</span><span class="nam">iget</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">issue_utilities</span><span class="op">,</span> <span class="nam">k</span><span class="op">)</span><span class="op">,</span> <span class="nam">v</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1769" class="stm par run hide_run"><span class="annotate short">1769&#x202F;&#x219B;&#x202F;exit</span><span class="annotate long">line 1772 didn't finish the list comprehension on line 1772</span>                <span class="nam">v_</span> <span class="op">=</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t1770" class="pln">                    <span class="nam">v</span><span class="strut">&nbsp;</span></p>
<p id="t1771" class="pln">                    <span class="key">if</span> <span class="key">not</span> <span class="op">(</span><span class="nam">isinstance</span><span class="op">(</span><span class="nam">v</span><span class="op">,</span> <span class="nam">tuple</span><span class="op">)</span> <span class="key">or</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">v</span><span class="op">,</span> <span class="nam">list</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1772" class="pln">                    <span class="key">else</span> <span class="str">"-"</span><span class="op">.</span><span class="nam">join</span><span class="op">(</span><span class="op">[</span><span class="nam">str</span><span class="op">(</span><span class="nam">_</span><span class="op">)</span> <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">v</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1773" class="pln">                <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1774" class="stm run hide_run">                <span class="nam">output</span> <span class="op">+=</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t1775" class="pln">                    <span class="str">f'    &lt;item index="{indx+1}" value="{v_}" evaluation="{u}" />\n'</span><span class="strut">&nbsp;</span></p>
<p id="t1776" class="pln">                <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1777" class="stm run hide_run">            <span class="nam">output</span> <span class="op">+=</span> <span class="str">"&lt;/issue>\n"</span><span class="strut">&nbsp;</span></p>
<p id="t1778" class="stm run hide_run">        <span class="key">for</span> <span class="nam">i</span><span class="op">,</span> <span class="nam">k</span> <span class="key">in</span> <span class="nam">enumerate</span><span class="op">(</span><span class="nam">keys</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1779" class="stm run hide_run">            <span class="nam">output</span> <span class="op">+=</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t1780" class="pln">                <span class="str">f'&lt;weight index="{i+1}" value="{iget(self.weights, k)}">\n&lt;/weight>\n'</span><span class="strut">&nbsp;</span></p>
<p id="t1781" class="pln">            <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1782" class="stm run hide_run">        <span class="key">return</span> <span class="nam">output</span><span class="strut">&nbsp;</span></p>
<p id="t1783" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1784" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__str__</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1785" class="stm mis">        <span class="key">return</span> <span class="str">f"u: {self.issue_utilities}\n w: {self.weights}"</span><span class="strut">&nbsp;</span></p>
<p id="t1786" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1787" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1788" class="stm run hide_run"><span class="key">class</span> <span class="nam">MappingUtilityFunction</span><span class="op">(</span><span class="nam">UtilityFunction</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1789" class="pln">    <span class="str">"""Outcome mapping utility function.</span><span class="strut">&nbsp;</span></p>
<p id="t1790" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1791" class="pln"><span class="str">    This is the simplest possible utility function and it just maps a set of ``Outcome``s to a set of</span><span class="strut">&nbsp;</span></p>
<p id="t1792" class="pln"><span class="str">    ``UtilityValue``(s). It is only usable with single-issue negotiations. It can be constructed with wither a mapping</span><span class="strut">&nbsp;</span></p>
<p id="t1793" class="pln"><span class="str">    (e.g. a dirct) or a callable function.</span><span class="strut">&nbsp;</span></p>
<p id="t1794" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1795" class="pln"><span class="str">    Args:</span><span class="strut">&nbsp;</span></p>
<p id="t1796" class="pln"><span class="str">            mapping: Either a callable or a mapping from ``Outcome`` (dict) to ``UtilityValue``.</span><span class="strut">&nbsp;</span></p>
<p id="t1797" class="pln"><span class="str">            default: value returned for outcomes causing exception (e.g. invalid outcomes).</span><span class="strut">&nbsp;</span></p>
<p id="t1798" class="pln"><span class="str">            name: name of the utility function. If None a random name will be generated.</span><span class="strut">&nbsp;</span></p>
<p id="t1799" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1800" class="pln"><span class="str">    Eamples:</span><span class="strut">&nbsp;</span></p>
<p id="t1801" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1802" class="pln"><span class="str">        Single issue outcome case:</span><span class="strut">&nbsp;</span></p>
<p id="t1803" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1804" class="pln"><span class="str">        >>> issue =Issue(values=['to be', 'not to be'], name='THE problem')</span><span class="strut">&nbsp;</span></p>
<p id="t1805" class="pln"><span class="str">        >>> print(str(issue))</span><span class="strut">&nbsp;</span></p>
<p id="t1806" class="pln"><span class="str">        THE problem: ['to be', 'not to be']</span><span class="strut">&nbsp;</span></p>
<p id="t1807" class="pln"><span class="str">        >>> f = MappingUtilityFunction({'to be':10.0, 'not to be':0.0})</span><span class="strut">&nbsp;</span></p>
<p id="t1808" class="pln"><span class="str">        >>> print(list(map(f, ['to be', 'not to be'])))</span><span class="strut">&nbsp;</span></p>
<p id="t1809" class="pln"><span class="str">        [10.0, 0.0]</span><span class="strut">&nbsp;</span></p>
<p id="t1810" class="pln"><span class="str">        >>> f = MappingUtilityFunction(mapping={'to be':-10.0, 'not to be':10.0})</span><span class="strut">&nbsp;</span></p>
<p id="t1811" class="pln"><span class="str">        >>> print(list(map(f, ['to be', 'not to be'])))</span><span class="strut">&nbsp;</span></p>
<p id="t1812" class="pln"><span class="str">        [-10.0, 10.0]</span><span class="strut">&nbsp;</span></p>
<p id="t1813" class="pln"><span class="str">        >>> f = MappingUtilityFunction(lambda x: float(len(x)))</span><span class="strut">&nbsp;</span></p>
<p id="t1814" class="pln"><span class="str">        >>> print(list(map(f, ['to be', 'not to be'])))</span><span class="strut">&nbsp;</span></p>
<p id="t1815" class="pln"><span class="str">        [5.0, 9.0]</span><span class="strut">&nbsp;</span></p>
<p id="t1816" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1817" class="pln"><span class="str">        Multi issue case:</span><span class="strut">&nbsp;</span></p>
<p id="t1818" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1819" class="pln"><span class="str">        >>> issues = [Issue((10.0, 20.0), 'price'), Issue(['delivered', 'not delivered'], 'delivery')</span><span class="strut">&nbsp;</span></p>
<p id="t1820" class="pln"><span class="str">        ...           , Issue(5, 'quality')]</span><span class="strut">&nbsp;</span></p>
<p id="t1821" class="pln"><span class="str">        >>> print(list(map(str, issues)))</span><span class="strut">&nbsp;</span></p>
<p id="t1822" class="pln"><span class="str">        ['price: (10.0, 20.0)', "delivery: ['delivered', 'not delivered']", 'quality: 5']</span><span class="strut">&nbsp;</span></p>
<p id="t1823" class="pln"><span class="str">        >>> f = MappingUtilityFunction(lambda x: x['price'] if x['delivery'] == 'delivered' else -1.0)</span><span class="strut">&nbsp;</span></p>
<p id="t1824" class="pln"><span class="str">        >>> g = MappingUtilityFunction(lambda x: x['price'] if x['delivery'] == 'delivered' else -1.0</span><span class="strut">&nbsp;</span></p>
<p id="t1825" class="pln"><span class="str">        ...     , default=-1000 )</span><span class="strut">&nbsp;</span></p>
<p id="t1826" class="pln"><span class="str">        >>> f({'price': 16.0}) is None</span><span class="strut">&nbsp;</span></p>
<p id="t1827" class="pln"><span class="str">        True</span><span class="strut">&nbsp;</span></p>
<p id="t1828" class="pln"><span class="str">        >>> g({'price': 16.0})</span><span class="strut">&nbsp;</span></p>
<p id="t1829" class="pln"><span class="str">        -1000</span><span class="strut">&nbsp;</span></p>
<p id="t1830" class="pln"><span class="str">        >>> f({'price': 16.0, 'delivery':  'delivered'})</span><span class="strut">&nbsp;</span></p>
<p id="t1831" class="pln"><span class="str">        16.0</span><span class="strut">&nbsp;</span></p>
<p id="t1832" class="pln"><span class="str">        >>> f({'price': 16.0, 'delivery':  'not delivered'})</span><span class="strut">&nbsp;</span></p>
<p id="t1833" class="pln"><span class="str">        -1.0</span><span class="strut">&nbsp;</span></p>
<p id="t1834" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1835" class="pln"><span class="str">    Remarks:</span><span class="strut">&nbsp;</span></p>
<p id="t1836" class="pln"><span class="str">        - If the mapping used failed on the outcome (for example because it is not a valid outcome), then the</span><span class="strut">&nbsp;</span></p>
<p id="t1837" class="pln"><span class="str">        ``default`` value given to the constructor (which defaults to None) will be returned.</span><span class="strut">&nbsp;</span></p>
<p id="t1838" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1839" class="pln"><span class="str">    """</span><span class="strut">&nbsp;</span></p>
<p id="t1840" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1841" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t1842" class="pln">        <span class="nam">self</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1843" class="pln">        <span class="nam">mapping</span><span class="op">:</span> <span class="nam">OutcomeUtilityMapping</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1844" class="pln">        <span class="nam">default</span><span class="op">=</span><span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1845" class="pln">        <span class="nam">name</span><span class="op">:</span> <span class="nam">str</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1846" class="pln">        <span class="nam">reserved_value</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">UtilityValue</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1847" class="pln">        <span class="nam">ami</span><span class="op">:</span> <span class="nam">AgentMechanismInterface</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1848" class="pln">    <span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1849" class="stm run hide_run">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">__init__</span><span class="op">(</span><span class="nam">name</span><span class="op">=</span><span class="nam">name</span><span class="op">,</span> <span class="nam">reserved_value</span><span class="op">=</span><span class="nam">reserved_value</span><span class="op">,</span> <span class="nam">ami</span><span class="op">=</span><span class="nam">ami</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1850" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">mapping</span> <span class="op">=</span> <span class="nam">mapping</span><span class="strut">&nbsp;</span></p>
<p id="t1851" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">default</span> <span class="op">=</span> <span class="nam">default</span><span class="strut">&nbsp;</span></p>
<p id="t1852" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1853" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__call__</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">offer</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="str">"Outcome"</span><span class="op">]</span><span class="op">)</span> <span class="op">-></span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">UtilityValue</span><span class="op">]</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1854" class="pln">        <span class="com"># noinspection PyBroadException</span><span class="strut">&nbsp;</span></p>
<p id="t1855" class="stm run hide_run">        <span class="key">if</span> <span class="nam">offer</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1856" class="stm run hide_run">            <span class="key">return</span> <span class="nam">self</span><span class="op">.</span><span class="nam">reserved_value</span><span class="strut">&nbsp;</span></p>
<p id="t1857" class="stm run hide_run">        <span class="key">try</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1858" class="stm run hide_run">            <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">offer</span><span class="op">,</span> <span class="nam">dict</span><span class="op">)</span> <span class="key">and</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">mapping</span><span class="op">,</span> <span class="nam">dict</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1859" class="stm run hide_run">                <span class="nam">m</span> <span class="op">=</span> <span class="nam">gmap</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">mapping</span><span class="op">,</span> <span class="nam">tuple</span><span class="op">(</span><span class="nam">offer</span><span class="op">.</span><span class="nam">values</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1860" class="pln">            <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1861" class="stm run hide_run">                <span class="nam">m</span> <span class="op">=</span> <span class="nam">gmap</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">mapping</span><span class="op">,</span> <span class="nam">offer</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1862" class="stm run hide_run">        <span class="key">except</span> <span class="nam">Exception</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1863" class="stm run hide_run">            <span class="key">return</span> <span class="nam">self</span><span class="op">.</span><span class="nam">default</span><span class="strut">&nbsp;</span></p>
<p id="t1864" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1865" class="stm run hide_run">        <span class="key">return</span> <span class="nam">m</span><span class="strut">&nbsp;</span></p>
<p id="t1866" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1867" class="stm run hide_run">    <span class="key">def</span> <span class="nam">xml</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">issues</span><span class="op">:</span> <span class="nam">List</span><span class="op">[</span><span class="nam">Issue</span><span class="op">]</span><span class="op">)</span> <span class="op">-></span> <span class="nam">str</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1868" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t1869" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1870" class="pln"><span class="str">        Examples:</span><span class="strut">&nbsp;</span></p>
<p id="t1871" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1872" class="pln"><span class="str">            >>> issue =Issue(values=['to be', 'not to be'], name='THE problem')</span><span class="strut">&nbsp;</span></p>
<p id="t1873" class="pln"><span class="str">            >>> print(str(issue))</span><span class="strut">&nbsp;</span></p>
<p id="t1874" class="pln"><span class="str">            THE problem: ['to be', 'not to be']</span><span class="strut">&nbsp;</span></p>
<p id="t1875" class="pln"><span class="str">            >>> f = MappingUtilityFunction({'to be':10.0, 'not to be':0.0})</span><span class="strut">&nbsp;</span></p>
<p id="t1876" class="pln"><span class="str">            >>> print(list(map(f, ['to be', 'not to be'])))</span><span class="strut">&nbsp;</span></p>
<p id="t1877" class="pln"><span class="str">            [10.0, 0.0]</span><span class="strut">&nbsp;</span></p>
<p id="t1878" class="pln"><span class="str">            >>> print(f.xml([issue]))</span><span class="strut">&nbsp;</span></p>
<p id="t1879" class="pln"><span class="str">            &lt;issue index="1" etype="discrete" type="discrete" vtype="discrete" name="THE problem"></span><span class="strut">&nbsp;</span></p>
<p id="t1880" class="pln"><span class="str">                &lt;item index="1" value="to be"  cost="0"  evaluation="10.0" description="to be"></span><span class="strut">&nbsp;</span></p>
<p id="t1881" class="pln"><span class="str">                &lt;/item></span><span class="strut">&nbsp;</span></p>
<p id="t1882" class="pln"><span class="str">                &lt;item index="2" value="not to be"  cost="0"  evaluation="0.0" description="not to be"></span><span class="strut">&nbsp;</span></p>
<p id="t1883" class="pln"><span class="str">                &lt;/item></span><span class="strut">&nbsp;</span></p>
<p id="t1884" class="pln"><span class="str">            &lt;/issue></span><span class="strut">&nbsp;</span></p>
<p id="t1885" class="pln"><span class="str">            &lt;weight index="1" value="1.0"></span><span class="strut">&nbsp;</span></p>
<p id="t1886" class="pln"><span class="str">            &lt;/weight></span><span class="strut">&nbsp;</span></p>
<p id="t1887" class="pln"><span class="str">            &lt;BLANKLINE></span><span class="strut">&nbsp;</span></p>
<p id="t1888" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t1889" class="stm par run hide_run"><span class="annotate short">1889&#x202F;&#x219B;&#x202F;1890</span><span class="annotate long">line 1889 didn't jump to line 1890, because the condition on line 1889 was never true</span>        <span class="key">if</span> <span class="nam">len</span><span class="op">(</span><span class="nam">issues</span><span class="op">)</span> <span class="op">></span> <span class="num">1</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1890" class="stm mis">            <span class="key">raise</span> <span class="nam">ValueError</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t1891" class="pln">                <span class="str">"Cannot call xml() on a mapping utility function with more than one issue"</span><span class="strut">&nbsp;</span></p>
<p id="t1892" class="pln">            <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1893" class="stm par run hide_run"><span class="annotate short">1893&#x202F;&#x219B;&#x202F;1897</span><span class="annotate long">line 1893 didn't jump to line 1897, because the condition on line 1893 was never false</span>        <span class="key">if</span> <span class="nam">issues</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1894" class="stm run hide_run">            <span class="nam">issue_names</span> <span class="op">=</span> <span class="op">[</span><span class="nam">_</span><span class="op">.</span><span class="nam">name</span> <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">issues</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t1895" class="stm run hide_run">            <span class="nam">key</span> <span class="op">=</span> <span class="nam">issue_names</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t1896" class="pln">        <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1897" class="stm mis">            <span class="nam">key</span> <span class="op">=</span> <span class="str">"0"</span><span class="strut">&nbsp;</span></p>
<p id="t1898" class="stm run hide_run">        <span class="nam">output</span> <span class="op">=</span> <span class="str">f'&lt;issue index="1" etype="discrete" type="discrete" vtype="discrete" name="{key}">\n'</span><span class="strut">&nbsp;</span></p>
<p id="t1899" class="stm par run hide_run"><span class="annotate short">1899&#x202F;&#x219B;&#x202F;1900</span><span class="annotate long">line 1899 didn't jump to line 1900, because the condition on line 1899 was never true</span>        <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">mapping</span><span class="op">,</span> <span class="nam">Callable</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1900" class="stm mis">            <span class="key">for</span> <span class="nam">i</span><span class="op">,</span> <span class="nam">k</span> <span class="key">in</span> <span class="nam">enumerate</span><span class="op">(</span><span class="nam">issues</span><span class="op">[</span><span class="nam">key</span><span class="op">]</span><span class="op">.</span><span class="nam">all</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1901" class="stm mis">                <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">k</span><span class="op">,</span> <span class="nam">tuple</span><span class="op">)</span> <span class="key">or</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">k</span><span class="op">,</span> <span class="nam">list</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1902" class="stm mis">                    <span class="nam">k</span> <span class="op">=</span> <span class="str">"-"</span><span class="op">.</span><span class="nam">join</span><span class="op">(</span><span class="op">[</span><span class="nam">str</span><span class="op">(</span><span class="nam">_</span><span class="op">)</span> <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">k</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1903" class="stm mis">                <span class="nam">output</span> <span class="op">+=</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t1904" class="pln">                    <span class="str">f'    &lt;item index="{i+1}" value="{k}"  cost="0"  evaluation="{self(k)}" description="{k}">\n'</span><span class="strut">&nbsp;</span></p>
<p id="t1905" class="pln">                    <span class="str">f"    &lt;/item>\n"</span><span class="strut">&nbsp;</span></p>
<p id="t1906" class="pln">                <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1907" class="pln">        <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1908" class="stm run hide_run">            <span class="key">for</span> <span class="nam">i</span><span class="op">,</span> <span class="op">(</span><span class="nam">k</span><span class="op">,</span> <span class="nam">v</span><span class="op">)</span> <span class="key">in</span> <span class="nam">enumerate</span><span class="op">(</span><span class="nam">ienumerate</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">mapping</span><span class="op">)</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1909" class="stm run hide_run">                <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">k</span><span class="op">,</span> <span class="nam">tuple</span><span class="op">)</span> <span class="key">or</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">k</span><span class="op">,</span> <span class="nam">list</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1910" class="stm run hide_run">                    <span class="nam">k</span> <span class="op">=</span> <span class="str">"-"</span><span class="op">.</span><span class="nam">join</span><span class="op">(</span><span class="op">[</span><span class="nam">str</span><span class="op">(</span><span class="nam">_</span><span class="op">)</span> <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">k</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1911" class="stm run hide_run">                <span class="nam">output</span> <span class="op">+=</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t1912" class="pln">                    <span class="str">f'    &lt;item index="{i+1}" value="{k}"  cost="0"  evaluation="{v}" description="{k}">\n'</span><span class="strut">&nbsp;</span></p>
<p id="t1913" class="pln">                    <span class="str">f"    &lt;/item>\n"</span><span class="strut">&nbsp;</span></p>
<p id="t1914" class="pln">                <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1915" class="stm run hide_run">        <span class="nam">output</span> <span class="op">+=</span> <span class="str">"&lt;/issue>\n"</span><span class="strut">&nbsp;</span></p>
<p id="t1916" class="stm run hide_run">        <span class="nam">output</span> <span class="op">+=</span> <span class="str">'&lt;weight index="1" value="1.0">\n&lt;/weight>\n'</span><span class="strut">&nbsp;</span></p>
<p id="t1917" class="stm run hide_run">        <span class="key">return</span> <span class="nam">output</span><span class="strut">&nbsp;</span></p>
<p id="t1918" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1919" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__str__</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span> <span class="op">-></span> <span class="nam">str</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1920" class="stm mis">        <span class="key">return</span> <span class="str">f"mapping: {self.mapping}\ndefault: {self.default}"</span><span class="strut">&nbsp;</span></p>
<p id="t1921" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1922" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1923" class="stm run hide_run"><span class="key">class</span> <span class="nam">RandomUtilityFunction</span><span class="op">(</span><span class="nam">MappingUtilityFunction</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1924" class="pln">    <span class="str">"""A random utility function for a discrete outcome space"""</span><span class="strut">&nbsp;</span></p>
<p id="t1925" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1926" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">outcomes</span><span class="op">:</span> <span class="nam">List</span><span class="op">[</span><span class="nam">Outcome</span><span class="op">]</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1927" class="stm par run hide_run"><span class="annotate short">1927&#x202F;&#x219B;&#x202F;1928</span><span class="annotate long">line 1927 didn't jump to line 1928, because the condition on line 1927 was never true</span>        <span class="key">if</span> <span class="nam">len</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">)</span> <span class="op">&lt;</span> <span class="num">1</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1928" class="stm mis">            <span class="key">raise</span> <span class="nam">ValueError</span><span class="op">(</span><span class="str">"Cannot create a random utility function without outcomes"</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1929" class="stm par run hide_run"><span class="annotate short">1929&#x202F;&#x219B;&#x202F;1932</span><span class="annotate long">line 1929 didn't jump to line 1932, because the condition on line 1929 was never false</span>        <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">,</span> <span class="nam">tuple</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1930" class="stm run hide_run">            <span class="key">pass</span><span class="strut">&nbsp;</span></p>
<p id="t1931" class="pln">        <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1932" class="stm mis">            <span class="nam">outcomes</span> <span class="op">=</span> <span class="op">[</span><span class="nam">tuple</span><span class="op">(</span><span class="nam">o</span><span class="op">.</span><span class="nam">keys</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="key">for</span> <span class="nam">o</span> <span class="key">in</span> <span class="nam">outcomes</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t1933" class="stm run hide_run">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">__init__</span><span class="op">(</span><span class="nam">mapping</span><span class="op">=</span><span class="nam">dict</span><span class="op">(</span><span class="nam">zip</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">,</span> <span class="nam">np</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">rand</span><span class="op">(</span><span class="nam">len</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1934" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1935" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1936" class="stm run hide_run"><span class="key">class</span> <span class="nam">NonLinearUtilityAggregationFunction</span><span class="op">(</span><span class="nam">UtilityFunction</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1937" class="pln">    <span class="str">r"""A nonlinear utility function.</span><span class="strut">&nbsp;</span></p>
<p id="t1938" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1939" class="pln"><span class="str">    Allows for the modeling of a single nonlinear utility function that combines the utilities of different issues.</span><span class="strut">&nbsp;</span></p>
<p id="t1940" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1941" class="pln"><span class="str">    Args:</span><span class="strut">&nbsp;</span></p>
<p id="t1942" class="pln"><span class="str">        issue_utilities: A set of mappings from issue values to utility functions. These are generic mappings so</span><span class="strut">&nbsp;</span></p>
<p id="t1943" class="pln"><span class="str">                        \ `Callable`\ (s) and \ `Mapping`\ (s) are both accepted</span><span class="strut">&nbsp;</span></p>
<p id="t1944" class="pln"><span class="str">        f: A nonlinear function mapping from a dict of utility_function-per-issue to a float</span><span class="strut">&nbsp;</span></p>
<p id="t1945" class="pln"><span class="str">        name: name of the utility function. If None a random name will be generated.</span><span class="strut">&nbsp;</span></p>
<p id="t1946" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1947" class="pln"><span class="str">    Notes:</span><span class="strut">&nbsp;</span></p>
<p id="t1948" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1949" class="pln"><span class="str">        The utility is calculated as:</span><span class="strut">&nbsp;</span></p>
<p id="t1950" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1951" class="pln"><span class="str">        .. math::</span><span class="strut">&nbsp;</span></p>
<p id="t1952" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1953" class="pln"><span class="str">                u = f\\left(u_0\\left(i_0\\right), u_1\\left(i_1\\right), ..., u_n\\left(i_n\\right)\\right)</span><span class="strut">&nbsp;</span></p>
<p id="t1954" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1955" class="pln"><span class="str">        where :math:`u_j()` is the utility function for issue :math:`j` and :math:`i_j` is value of issue :math:`j` in the</span><span class="strut">&nbsp;</span></p>
<p id="t1956" class="pln"><span class="str">        evaluated outcome.</span><span class="strut">&nbsp;</span></p>
<p id="t1957" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1958" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1959" class="pln"><span class="str">    Examples:</span><span class="strut">&nbsp;</span></p>
<p id="t1960" class="pln"><span class="str">        >>> issues = [Issue((10.0, 20.0), 'price'), Issue(['delivered', 'not delivered'], 'delivery')</span><span class="strut">&nbsp;</span></p>
<p id="t1961" class="pln"><span class="str">        ...           , Issue(5, 'quality')]</span><span class="strut">&nbsp;</span></p>
<p id="t1962" class="pln"><span class="str">        >>> print(list(map(str, issues)))</span><span class="strut">&nbsp;</span></p>
<p id="t1963" class="pln"><span class="str">        ['price: (10.0, 20.0)', "delivery: ['delivered', 'not delivered']", 'quality: 5']</span><span class="strut">&nbsp;</span></p>
<p id="t1964" class="pln"><span class="str">        >>> g = NonLinearUtilityAggregationFunction({ 'price': lambda x: 2.0*x</span><span class="strut">&nbsp;</span></p>
<p id="t1965" class="pln"><span class="str">        ...                                         , 'delivery': {'delivered': 10, 'not delivered': -10}</span><span class="strut">&nbsp;</span></p>
<p id="t1966" class="pln"><span class="str">        ...                                         , 'quality': MappingUtilityFunction(lambda x: x-3)}</span><span class="strut">&nbsp;</span></p>
<p id="t1967" class="pln"><span class="str">        ...         , f=lambda u: u['price']  + 2.0 * u['quality'])</span><span class="strut">&nbsp;</span></p>
<p id="t1968" class="pln"><span class="str">        >>> float(g({'quality': 2, 'price': 14.0, 'delivery': 'delivered'})) - ((2.0*14)+2.0*(2.0-3.0))</span><span class="strut">&nbsp;</span></p>
<p id="t1969" class="pln"><span class="str">        0.0</span><span class="strut">&nbsp;</span></p>
<p id="t1970" class="pln"><span class="str">        >>> g = NonLinearUtilityAggregationFunction({'price'    : lambda x: 2.0*x</span><span class="strut">&nbsp;</span></p>
<p id="t1971" class="pln"><span class="str">        ...                                         , 'delivery': {'delivered': 10, 'not delivered': -10}}</span><span class="strut">&nbsp;</span></p>
<p id="t1972" class="pln"><span class="str">        ...         , f=lambda u: 2.0 * u['price'] )</span><span class="strut">&nbsp;</span></p>
<p id="t1973" class="pln"><span class="str">        >>> float(g({'price': 14.0, 'delivery': 'delivered'})) - (2.0*(2.0*14))</span><span class="strut">&nbsp;</span></p>
<p id="t1974" class="pln"><span class="str">        0.0</span><span class="strut">&nbsp;</span></p>
<p id="t1975" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1976" class="pln"><span class="str">    """</span><span class="strut">&nbsp;</span></p>
<p id="t1977" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1978" class="stm run hide_run">    <span class="key">def</span> <span class="nam">xml</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">issues</span><span class="op">:</span> <span class="nam">List</span><span class="op">[</span><span class="nam">Issue</span><span class="op">]</span><span class="op">)</span> <span class="op">-></span> <span class="nam">str</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1979" class="exc">        <span class="key">raise</span> <span class="nam">NotImplementedError</span><span class="op">(</span><span class="str">f"Cannot convert {self.__class__.__name__} to xml"</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1980" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1981" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t1982" class="pln">        <span class="nam">self</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1983" class="pln">        <span class="nam">issue_utilities</span><span class="op">:</span> <span class="nam">MutableMapping</span><span class="op">[</span><span class="nam">Any</span><span class="op">,</span> <span class="nam">GenericMapping</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1984" class="pln">        <span class="nam">f</span><span class="op">:</span> <span class="nam">Callable</span><span class="op">[</span><span class="op">[</span><span class="nam">Dict</span><span class="op">[</span><span class="nam">Any</span><span class="op">,</span> <span class="nam">UtilityValue</span><span class="op">]</span><span class="op">]</span><span class="op">,</span> <span class="nam">UtilityValue</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1985" class="pln">        <span class="nam">name</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">str</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1986" class="pln">        <span class="nam">reserved_value</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">UtilityValue</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1987" class="pln">        <span class="nam">ami</span><span class="op">:</span> <span class="nam">AgentMechanismInterface</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t1988" class="pln">    <span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1989" class="stm run hide_run">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">__init__</span><span class="op">(</span><span class="nam">name</span><span class="op">=</span><span class="nam">name</span><span class="op">,</span> <span class="nam">reserved_value</span><span class="op">=</span><span class="nam">reserved_value</span><span class="op">,</span> <span class="nam">ami</span><span class="op">=</span><span class="nam">ami</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t1990" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">issue_utilities</span> <span class="op">=</span> <span class="nam">issue_utilities</span><span class="strut">&nbsp;</span></p>
<p id="t1991" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">f</span> <span class="op">=</span> <span class="nam">f</span><span class="strut">&nbsp;</span></p>
<p id="t1992" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t1993" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__call__</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">offer</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="str">"Outcome"</span><span class="op">]</span><span class="op">)</span> <span class="op">-></span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">UtilityValue</span><span class="op">]</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1994" class="stm par run hide_run"><span class="annotate short">1994&#x202F;&#x219B;&#x202F;1995</span><span class="annotate long">line 1994 didn't jump to line 1995, because the condition on line 1994 was never true</span>        <span class="key">if</span> <span class="nam">offer</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1995" class="stm mis">            <span class="key">return</span> <span class="nam">self</span><span class="op">.</span><span class="nam">reserved_value</span><span class="strut">&nbsp;</span></p>
<p id="t1996" class="stm par run hide_run"><span class="annotate short">1996&#x202F;&#x219B;&#x202F;1997</span><span class="annotate long">line 1996 didn't jump to line 1997, because the condition on line 1996 was never true</span>        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">issue_utilities</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t1997" class="stm mis">            <span class="key">raise</span> <span class="nam">ValueError</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t1998" class="pln">                <span class="str">"No issue utilities were set. Call set_params() or use the constructor"</span><span class="strut">&nbsp;</span></p>
<p id="t1999" class="pln">            <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2000" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2001" class="stm run hide_run">        <span class="nam">u</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span><span class="strut">&nbsp;</span></p>
<p id="t2002" class="stm run hide_run">        <span class="key">for</span> <span class="nam">k</span> <span class="key">in</span> <span class="nam">ikeys</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">issue_utilities</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2003" class="stm run hide_run">            <span class="nam">v</span> <span class="op">=</span> <span class="nam">iget</span><span class="op">(</span><span class="nam">offer</span><span class="op">,</span> <span class="nam">k</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2004" class="stm run hide_run">            <span class="nam">u</span><span class="op">[</span><span class="nam">k</span><span class="op">]</span> <span class="op">=</span> <span class="nam">gmap</span><span class="op">(</span><span class="nam">iget</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">issue_utilities</span><span class="op">,</span> <span class="nam">k</span><span class="op">)</span><span class="op">,</span> <span class="nam">v</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2005" class="stm run hide_run">        <span class="key">return</span> <span class="nam">self</span><span class="op">.</span><span class="nam">f</span><span class="op">(</span><span class="nam">u</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2006" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2007" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2008" class="stm run hide_run"><span class="key">class</span> <span class="nam">HyperRectangleUtilityFunction</span><span class="op">(</span><span class="nam">UtilityFunction</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2009" class="pln">    <span class="str">"""A utility function defined as a set of hyper-volumes.</span><span class="strut">&nbsp;</span></p>
<p id="t2010" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2011" class="pln"><span class="str">    The utility function that is calulated by combining linearly a set of *probably nonlinear* functions applied in</span><span class="strut">&nbsp;</span></p>
<p id="t2012" class="pln"><span class="str">    predefined hyper-volumes of the outcome space.</span><span class="strut">&nbsp;</span></p>
<p id="t2013" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2014" class="pln"><span class="str">     Args:</span><span class="strut">&nbsp;</span></p>
<p id="t2015" class="pln"><span class="str">          outcome_ranges: The outcome_ranges for which the `mappings` are defined</span><span class="strut">&nbsp;</span></p>
<p id="t2016" class="pln"><span class="str">          mappings: The *possibly nonlinear* mapppings correponding to the outcome_ranges</span><span class="strut">&nbsp;</span></p>
<p id="t2017" class="pln"><span class="str">          weights: The *optional* weights to use for combining the outputs of the `mappings`</span><span class="strut">&nbsp;</span></p>
<p id="t2018" class="pln"><span class="str">          ignore_issues_not_in_input: If a hyper-volumne local function is defined for some issue</span><span class="strut">&nbsp;</span></p>
<p id="t2019" class="pln"><span class="str">          that is not in the outcome being evaluated ignore it.</span><span class="strut">&nbsp;</span></p>
<p id="t2020" class="pln"><span class="str">          ignore_failing_range_utilities: If a hyper-volume local function fails, just assume it</span><span class="strut">&nbsp;</span></p>
<p id="t2021" class="pln"><span class="str">          did not exist for this outcome.</span><span class="strut">&nbsp;</span></p>
<p id="t2022" class="pln"><span class="str">          name: name of the utility function. If None a random name will be generated.</span><span class="strut">&nbsp;</span></p>
<p id="t2023" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2024" class="pln"><span class="str">     Examples:</span><span class="strut">&nbsp;</span></p>
<p id="t2025" class="pln"><span class="str">         We will use the following issue space of cardinality :math:`10 \times 5 \times 4`:</span><span class="strut">&nbsp;</span></p>
<p id="t2026" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2027" class="pln"><span class="str">         >>> issues = [Issue(10), Issue(5), Issue(4)]</span><span class="strut">&nbsp;</span></p>
<p id="t2028" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2029" class="pln"><span class="str">         Now create the utility function with</span><span class="strut">&nbsp;</span></p>
<p id="t2030" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2031" class="pln"><span class="str">         >>> f = HyperRectangleUtilityFunction(outcome_ranges=[</span><span class="strut">&nbsp;</span></p>
<p id="t2032" class="pln"><span class="str">         ...                                        {0: (1.0, 2.0), 1: (1.0, 2.0)},</span><span class="strut">&nbsp;</span></p>
<p id="t2033" class="pln"><span class="str">         ...                                        {0: (1.4, 2.0), 2: (2.0, 3.0)}]</span><span class="strut">&nbsp;</span></p>
<p id="t2034" class="pln"><span class="str">         ...                                , utilities= [2.0, lambda x: 2 * x[2] + x[0]])</span><span class="strut">&nbsp;</span></p>
<p id="t2035" class="pln"><span class="str">         >>> g = HyperRectangleUtilityFunction(outcome_ranges=[</span><span class="strut">&nbsp;</span></p>
<p id="t2036" class="pln"><span class="str">         ...                                        {0: (1.0, 2.0), 1: (1.0, 2.0)},</span><span class="strut">&nbsp;</span></p>
<p id="t2037" class="pln"><span class="str">         ...                                        {0: (1.4, 2.0), 2: (2.0, 3.0)}]</span><span class="strut">&nbsp;</span></p>
<p id="t2038" class="pln"><span class="str">         ...                                , utilities= [2.0, lambda x: 2 * x[2] + x[0]]</span><span class="strut">&nbsp;</span></p>
<p id="t2039" class="pln"><span class="str">         ...                                , ignore_issues_not_in_input=True)</span><span class="strut">&nbsp;</span></p>
<p id="t2040" class="pln"><span class="str">         >>> h = HyperRectangleUtilityFunction(outcome_ranges=[</span><span class="strut">&nbsp;</span></p>
<p id="t2041" class="pln"><span class="str">         ...                                        {0: (1.0, 2.0), 1: (1.0, 2.0)},</span><span class="strut">&nbsp;</span></p>
<p id="t2042" class="pln"><span class="str">         ...                                        {0: (1.4, 2.0), 2: (2.0, 3.0)}]</span><span class="strut">&nbsp;</span></p>
<p id="t2043" class="pln"><span class="str">         ...                                , utilities= [2.0, lambda x: 2 * x[2] + x[0]]</span><span class="strut">&nbsp;</span></p>
<p id="t2044" class="pln"><span class="str">         ...                                , ignore_failing_range_utilities=True)</span><span class="strut">&nbsp;</span></p>
<p id="t2045" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2046" class="pln"><span class="str">         We can now calcualte the utility_function of some outcomes:</span><span class="strut">&nbsp;</span></p>
<p id="t2047" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2048" class="pln"><span class="str">         * An outcome that belongs to the both outcome_ranges:</span><span class="strut">&nbsp;</span></p>
<p id="t2049" class="pln"><span class="str">         >>> [f({0: 1.5,1: 1.5, 2: 2.5}), g({0: 1.5,1: 1.5, 2: 2.5}), h({0: 1.5,1: 1.5, 2: 2.5})]</span><span class="strut">&nbsp;</span></p>
<p id="t2050" class="pln"><span class="str">         [8.5, 8.5, 8.5]</span><span class="strut">&nbsp;</span></p>
<p id="t2051" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2052" class="pln"><span class="str">         * An outcome that belongs to the first hypervolume only:</span><span class="strut">&nbsp;</span></p>
<p id="t2053" class="pln"><span class="str">         >>> [f({0: 1.5,1: 1.5, 2: 1.0}), g({0: 1.5,1: 1.5, 2: 1.0}), h({0: 1.5,1: 1.5, 2: 1.0})]</span><span class="strut">&nbsp;</span></p>
<p id="t2054" class="pln"><span class="str">         [2.0, 2.0, 2.0]</span><span class="strut">&nbsp;</span></p>
<p id="t2055" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2056" class="pln"><span class="str">         * An outcome that belongs to and has the first hypervolume only:</span><span class="strut">&nbsp;</span></p>
<p id="t2057" class="pln"><span class="str">         >>> [f({0: 1.5}), g({0: 1.5}), h({0: 1.5})]</span><span class="strut">&nbsp;</span></p>
<p id="t2058" class="pln"><span class="str">         [None, 0.0, None]</span><span class="strut">&nbsp;</span></p>
<p id="t2059" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2060" class="pln"><span class="str">         * An outcome that belongs to the second hypervolume only:</span><span class="strut">&nbsp;</span></p>
<p id="t2061" class="pln"><span class="str">         >>> [f({0: 1.5,2: 2.5}), g({0: 1.5,2: 2.5}), h({0: 1.5,2: 2.5})]</span><span class="strut">&nbsp;</span></p>
<p id="t2062" class="pln"><span class="str">         [None, 6.5, None]</span><span class="strut">&nbsp;</span></p>
<p id="t2063" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2064" class="pln"><span class="str">         * An outcome that has and belongs to the second hypervolume only:</span><span class="strut">&nbsp;</span></p>
<p id="t2065" class="pln"><span class="str">         >>> [f({2: 2.5}), g({2: 2.5}), h({2: 2.5})]</span><span class="strut">&nbsp;</span></p>
<p id="t2066" class="pln"><span class="str">         [None, 0.0, None]</span><span class="strut">&nbsp;</span></p>
<p id="t2067" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2068" class="pln"><span class="str">         * An outcome that belongs to no outcome_ranges:</span><span class="strut">&nbsp;</span></p>
<p id="t2069" class="pln"><span class="str">         >>> [f({0: 11.5,1: 11.5, 2: 12.5}), g({0: 11.5,1: 11.5, 2: 12.5}), h({0: 11.5,1: 11.5, 2: 12.5})]</span><span class="strut">&nbsp;</span></p>
<p id="t2070" class="pln"><span class="str">         [0.0, 0.0, 0.0]</span><span class="strut">&nbsp;</span></p>
<p id="t2071" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2072" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2073" class="pln"><span class="str">     Remarks:</span><span class="strut">&nbsp;</span></p>
<p id="t2074" class="pln"><span class="str">         - The number of outcome_ranges, mappings, and weights must be the same</span><span class="strut">&nbsp;</span></p>
<p id="t2075" class="pln"><span class="str">         - if no weights are given they are all assumed to equal unity</span><span class="strut">&nbsp;</span></p>
<p id="t2076" class="pln"><span class="str">         - mappings can either by an `OutcomeUtilityMapping` or a constant.</span><span class="strut">&nbsp;</span></p>
<p id="t2077" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2078" class="pln"><span class="str">    """</span><span class="strut">&nbsp;</span></p>
<p id="t2079" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2080" class="stm run hide_run">    <span class="key">def</span> <span class="nam">xml</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">issues</span><span class="op">:</span> <span class="nam">List</span><span class="op">[</span><span class="nam">Issue</span><span class="op">]</span><span class="op">)</span> <span class="op">-></span> <span class="nam">str</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2081" class="pln">        <span class="str">"""Represents the function as XML</span><span class="strut">&nbsp;</span></p>
<p id="t2082" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2083" class="pln"><span class="str">        Args:</span><span class="strut">&nbsp;</span></p>
<p id="t2084" class="pln"><span class="str">            issues:</span><span class="strut">&nbsp;</span></p>
<p id="t2085" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2086" class="pln"><span class="str">        Examples:</span><span class="strut">&nbsp;</span></p>
<p id="t2087" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2088" class="pln"><span class="str">            >>> f = HyperRectangleUtilityFunction(outcome_ranges=[</span><span class="strut">&nbsp;</span></p>
<p id="t2089" class="pln"><span class="str">            ...                                        {0: (1.0, 2.0), 1: (1.0, 2.0)},</span><span class="strut">&nbsp;</span></p>
<p id="t2090" class="pln"><span class="str">            ...                                        {0: (1.4, 2.0), 2: (2.0, 3.0)}]</span><span class="strut">&nbsp;</span></p>
<p id="t2091" class="pln"><span class="str">            ...                                , utilities= [2.0, 9.0 + 4.0])</span><span class="strut">&nbsp;</span></p>
<p id="t2092" class="pln"><span class="str">            >>> print(f.xml([Issue((0.0, 4.0), name='0'), Issue((0.0, 9.0), name='1')</span><span class="strut">&nbsp;</span></p>
<p id="t2093" class="pln"><span class="str">            ... , Issue((0.0, 9.0), name='2')]).strip())</span><span class="strut">&nbsp;</span></p>
<p id="t2094" class="pln"><span class="str">            &lt;issue index="1" name="0" vtype="real" type="real" etype="real"></span><span class="strut">&nbsp;</span></p>
<p id="t2095" class="pln"><span class="str">                &lt;range lowerbound="0.0" upperbound="4.0">&lt;/range></span><span class="strut">&nbsp;</span></p>
<p id="t2096" class="pln"><span class="str">            &lt;/issue>&lt;issue index="2" name="1" vtype="real" type="real" etype="real"></span><span class="strut">&nbsp;</span></p>
<p id="t2097" class="pln"><span class="str">                &lt;range lowerbound="0.0" upperbound="9.0">&lt;/range></span><span class="strut">&nbsp;</span></p>
<p id="t2098" class="pln"><span class="str">            &lt;/issue>&lt;issue index="3" name="2" vtype="real" type="real" etype="real"></span><span class="strut">&nbsp;</span></p>
<p id="t2099" class="pln"><span class="str">                &lt;range lowerbound="0.0" upperbound="9.0">&lt;/range></span><span class="strut">&nbsp;</span></p>
<p id="t2100" class="pln"><span class="str">            &lt;/issue>&lt;utility_function maxutility="-1.0"></span><span class="strut">&nbsp;</span></p>
<p id="t2101" class="pln"><span class="str">                &lt;ufun type="PlainUfun" weight="1" aggregation="sum"></span><span class="strut">&nbsp;</span></p>
<p id="t2102" class="pln"><span class="str">                    &lt;hyperRectangle utility_function="2.0"></span><span class="strut">&nbsp;</span></p>
<p id="t2103" class="pln"><span class="str">                        &lt;INCLUDES index="0" min="1.0" max="2.0" /></span><span class="strut">&nbsp;</span></p>
<p id="t2104" class="pln"><span class="str">                        &lt;INCLUDES index="1" min="1.0" max="2.0" /></span><span class="strut">&nbsp;</span></p>
<p id="t2105" class="pln"><span class="str">                    &lt;/hyperRectangle></span><span class="strut">&nbsp;</span></p>
<p id="t2106" class="pln"><span class="str">                    &lt;hyperRectangle utility_function="13.0"></span><span class="strut">&nbsp;</span></p>
<p id="t2107" class="pln"><span class="str">                        &lt;INCLUDES index="0" min="1.4" max="2.0" /></span><span class="strut">&nbsp;</span></p>
<p id="t2108" class="pln"><span class="str">                        &lt;INCLUDES index="2" min="2.0" max="3.0" /></span><span class="strut">&nbsp;</span></p>
<p id="t2109" class="pln"><span class="str">                    &lt;/hyperRectangle></span><span class="strut">&nbsp;</span></p>
<p id="t2110" class="pln"><span class="str">                &lt;/ufun></span><span class="strut">&nbsp;</span></p>
<p id="t2111" class="pln"><span class="str">            &lt;/utility_function></span><span class="strut">&nbsp;</span></p>
<p id="t2112" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2113" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t2114" class="stm run hide_run">        <span class="nam">output</span> <span class="op">=</span> <span class="str">""</span><span class="strut">&nbsp;</span></p>
<p id="t2115" class="stm run hide_run">        <span class="key">for</span> <span class="nam">i</span><span class="op">,</span> <span class="nam">issue</span> <span class="key">in</span> <span class="nam">enumerate</span><span class="op">(</span><span class="nam">ivalues</span><span class="op">(</span><span class="nam">issues</span><span class="op">)</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2116" class="stm run hide_run">            <span class="nam">name</span> <span class="op">=</span> <span class="nam">issue</span><span class="op">.</span><span class="nam">name</span><span class="strut">&nbsp;</span></p>
<p id="t2117" class="stm par run hide_run"><span class="annotate short">2117&#x202F;&#x219B;&#x202F;2123</span><span class="annotate long">line 2117 didn't jump to line 2123, because the condition on line 2117 was never false</span>            <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">issue</span><span class="op">.</span><span class="nam">values</span><span class="op">,</span> <span class="nam">tuple</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2118" class="stm run hide_run">                <span class="nam">output</span> <span class="op">+=</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2119" class="pln">                    <span class="str">f'&lt;issue index="{i+1}" name="{name}" vtype="real" type="real" etype="real">\n'</span><span class="strut">&nbsp;</span></p>
<p id="t2120" class="pln">                    <span class="str">f'    &lt;range lowerbound="{issue.values[0]}" upperbound="{issue.values[1]}">&lt;/range>\n'</span><span class="strut">&nbsp;</span></p>
<p id="t2121" class="pln">                    <span class="str">f"&lt;/issue>"</span><span class="strut">&nbsp;</span></p>
<p id="t2122" class="pln">                <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2123" class="stm mis">            <span class="key">elif</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">issue</span><span class="op">.</span><span class="nam">values</span><span class="op">,</span> <span class="nam">int</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2124" class="stm mis">                <span class="nam">output</span> <span class="op">+=</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2125" class="pln">                    <span class="str">f'&lt;issue index="{i+1}" name="{name}" vtype="integer" type="integer" etype="integer" '</span><span class="strut">&nbsp;</span></p>
<p id="t2126" class="pln">                    <span class="str">f'lowerbound="0" upperbound="{issue.values - 1}"/>\n'</span><span class="strut">&nbsp;</span></p>
<p id="t2127" class="pln">                <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2128" class="pln">            <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2129" class="stm mis">                <span class="nam">output</span> <span class="op">+=</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2130" class="pln">                    <span class="str">f'&lt;issue index="{i+1}" name="{name}" vtype="integer" type="integer" etype="integer" '</span><span class="strut">&nbsp;</span></p>
<p id="t2131" class="pln">                    <span class="str">f'lowerbound="{min(issue.values)}" upperbound="{max(issue.values)}"/>\n'</span><span class="strut">&nbsp;</span></p>
<p id="t2132" class="pln">                <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2133" class="pln">        <span class="com"># todo find the real maxutility</span><span class="strut">&nbsp;</span></p>
<p id="t2134" class="stm run hide_run">        <span class="nam">output</span> <span class="op">+=</span> <span class="str">'&lt;utility_function maxutility="-1.0">\n    &lt;ufun type="PlainUfun" weight="1" aggregation="sum">\n'</span><span class="strut">&nbsp;</span></p>
<p id="t2135" class="stm run hide_run">        <span class="key">for</span> <span class="nam">rect</span><span class="op">,</span> <span class="nam">u</span><span class="op">,</span> <span class="nam">w</span> <span class="key">in</span> <span class="nam">zip</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">outcome_ranges</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">mappings</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">weights</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2136" class="stm run hide_run">            <span class="nam">output</span> <span class="op">+=</span> <span class="str">f'        &lt;hyperRectangle utility_function="{u * w}">\n'</span><span class="strut">&nbsp;</span></p>
<p id="t2137" class="stm run hide_run">            <span class="key">for</span> <span class="nam">indx</span> <span class="key">in</span> <span class="nam">ikeys</span><span class="op">(</span><span class="nam">rect</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2138" class="stm run hide_run">                <span class="nam">values</span> <span class="op">=</span> <span class="nam">iget</span><span class="op">(</span><span class="nam">rect</span><span class="op">,</span> <span class="nam">indx</span><span class="op">,</span> <span class="key">None</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2139" class="stm par run hide_run"><span class="annotate short">2139&#x202F;&#x219B;&#x202F;2140</span><span class="annotate long">line 2139 didn't jump to line 2140, because the condition on line 2139 was never true</span>                <span class="key">if</span> <span class="nam">values</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2140" class="stm mis">                    <span class="key">continue</span><span class="strut">&nbsp;</span></p>
<p id="t2141" class="stm par run hide_run"><span class="annotate short">2141&#x202F;&#x219B;&#x202F;2142</span><span class="annotate long">line 2141 didn't jump to line 2142, because the condition on line 2141 was never true</span>                <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">values</span><span class="op">,</span> <span class="nam">float</span><span class="op">)</span> <span class="key">or</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">values</span><span class="op">,</span> <span class="nam">int</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2142" class="stm mis">                    <span class="nam">mn</span><span class="op">,</span> <span class="nam">mx</span> <span class="op">=</span> <span class="nam">values</span><span class="op">,</span> <span class="nam">values</span><span class="strut">&nbsp;</span></p>
<p id="t2143" class="stm par run hide_run"><span class="annotate short">2143&#x202F;&#x219B;&#x202F;2146</span><span class="annotate long">line 2143 didn't jump to line 2146, because the condition on line 2143 was never false</span>                <span class="key">elif</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">values</span><span class="op">,</span> <span class="nam">tuple</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2144" class="stm run hide_run">                    <span class="nam">mn</span><span class="op">,</span> <span class="nam">mx</span> <span class="op">=</span> <span class="nam">values</span><span class="strut">&nbsp;</span></p>
<p id="t2145" class="pln">                <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2146" class="stm mis">                    <span class="nam">mn</span><span class="op">,</span> <span class="nam">mx</span> <span class="op">=</span> <span class="nam">min</span><span class="op">(</span><span class="nam">values</span><span class="op">)</span><span class="op">,</span> <span class="nam">max</span><span class="op">(</span><span class="nam">values</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2147" class="stm run hide_run">                <span class="nam">output</span> <span class="op">+=</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2148" class="pln">                    <span class="str">f'            &lt;INCLUDES index="{indx}" min="{mn}" max="{mx}" />\n'</span><span class="strut">&nbsp;</span></p>
<p id="t2149" class="pln">                <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2150" class="stm run hide_run">            <span class="nam">output</span> <span class="op">+=</span> <span class="str">f"        &lt;/hyperRectangle>\n"</span><span class="strut">&nbsp;</span></p>
<p id="t2151" class="stm run hide_run">        <span class="nam">output</span> <span class="op">+=</span> <span class="str">"    &lt;/ufun>\n&lt;/utility_function>"</span><span class="strut">&nbsp;</span></p>
<p id="t2152" class="stm run hide_run">        <span class="key">return</span> <span class="nam">output</span><span class="strut">&nbsp;</span></p>
<p id="t2153" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2154" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2155" class="pln">        <span class="nam">self</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2156" class="pln">        <span class="nam">outcome_ranges</span><span class="op">:</span> <span class="nam">Iterable</span><span class="op">[</span><span class="nam">OutcomeRange</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2157" class="pln">        <span class="nam">utilities</span><span class="op">:</span> <span class="nam">Union</span><span class="op">[</span><span class="nam">Floats</span><span class="op">,</span> <span class="nam">OutcomeUtilityMappings</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2158" class="pln">        <span class="nam">weights</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">Floats</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2159" class="pln">        <span class="op">*</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2160" class="pln">        <span class="nam">ignore_issues_not_in_input</span><span class="op">=</span><span class="key">False</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2161" class="pln">        <span class="nam">ignore_failing_range_utilities</span><span class="op">=</span><span class="key">False</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2162" class="pln">        <span class="nam">name</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">str</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2163" class="pln">        <span class="nam">reserved_value</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">UtilityValue</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2164" class="pln">        <span class="nam">ami</span><span class="op">:</span> <span class="nam">AgentMechanismInterface</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2165" class="pln">    <span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2166" class="stm run hide_run">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">__init__</span><span class="op">(</span><span class="nam">name</span><span class="op">=</span><span class="nam">name</span><span class="op">,</span> <span class="nam">reserved_value</span><span class="op">=</span><span class="nam">reserved_value</span><span class="op">,</span> <span class="nam">ami</span><span class="op">=</span><span class="nam">ami</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2167" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">outcome_ranges</span> <span class="op">=</span> <span class="nam">outcome_ranges</span><span class="strut">&nbsp;</span></p>
<p id="t2168" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">mappings</span> <span class="op">=</span> <span class="nam">utilities</span><span class="strut">&nbsp;</span></p>
<p id="t2169" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">weights</span> <span class="op">=</span> <span class="nam">weights</span><span class="strut">&nbsp;</span></p>
<p id="t2170" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">ignore_issues_not_in_input</span> <span class="op">=</span> <span class="nam">ignore_issues_not_in_input</span><span class="strut">&nbsp;</span></p>
<p id="t2171" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">ignore_failing_range_utilities</span> <span class="op">=</span> <span class="nam">ignore_failing_range_utilities</span><span class="strut">&nbsp;</span></p>
<p id="t2172" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">adjust_params</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2173" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2174" class="stm run hide_run">    <span class="key">def</span> <span class="nam">adjust_params</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2175" class="stm par run hide_run"><span class="annotate short">2175&#x202F;&#x219B;&#x202F;exit</span><span class="annotate long">line 2175 didn't return from function 'adjust_params', because the condition on line 2175 was never false</span>        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">weights</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2176" class="stm run hide_run">            <span class="nam">self</span><span class="op">.</span><span class="nam">weights</span> <span class="op">=</span> <span class="op">[</span><span class="num">1.0</span><span class="op">]</span> <span class="op">*</span> <span class="nam">len</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">outcome_ranges</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2177" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2178" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__call__</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">offer</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="str">"Outcome"</span><span class="op">]</span><span class="op">)</span> <span class="op">-></span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">UtilityValue</span><span class="op">]</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2179" class="stm run hide_run">        <span class="key">if</span> <span class="nam">offer</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2180" class="stm run hide_run">            <span class="key">return</span> <span class="nam">self</span><span class="op">.</span><span class="nam">reserved_value</span><span class="strut">&nbsp;</span></p>
<p id="t2181" class="stm run hide_run">        <span class="nam">u</span> <span class="op">=</span> <span class="nam">ExactUtilityValue</span><span class="op">(</span><span class="num">0.0</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2182" class="stm run hide_run">        <span class="key">for</span> <span class="nam">weight</span><span class="op">,</span> <span class="nam">outcome_range</span><span class="op">,</span> <span class="nam">mapping</span> <span class="key">in</span> <span class="nam">zip</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2183" class="pln">            <span class="nam">self</span><span class="op">.</span><span class="nam">weights</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">outcome_ranges</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">mappings</span><span class="strut">&nbsp;</span></p>
<p id="t2184" class="pln">        <span class="op">)</span><span class="op">:</span>  <span class="com"># type: ignore</span><span class="strut">&nbsp;</span></p>
<p id="t2185" class="pln">            <span class="com"># fail on any outcome_range that constrains issues not in the presented outcome</span><span class="strut">&nbsp;</span></p>
<p id="t2186" class="stm run hide_run">            <span class="key">if</span> <span class="nam">outcome_range</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span> <span class="key">and</span> <span class="nam">set</span><span class="op">(</span><span class="nam">ikeys</span><span class="op">(</span><span class="nam">outcome_range</span><span class="op">)</span><span class="op">)</span> <span class="op">-</span> <span class="nam">set</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2187" class="pln">                <span class="nam">ikeys</span><span class="op">(</span><span class="nam">offer</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2188" class="pln">            <span class="op">)</span> <span class="op">!=</span> <span class="nam">set</span><span class="op">(</span><span class="op">[</span><span class="op">]</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2189" class="stm run hide_run">                <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">ignore_issues_not_in_input</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2190" class="stm run hide_run">                    <span class="key">continue</span><span class="strut">&nbsp;</span></p>
<p id="t2191" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2192" class="stm run hide_run">                <span class="key">return</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t2193" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2194" class="stm run hide_run">            <span class="key">elif</span> <span class="nam">outcome_range</span> <span class="key">is</span> <span class="key">None</span> <span class="key">or</span> <span class="nam">outcome_in_range</span><span class="op">(</span><span class="nam">offer</span><span class="op">,</span> <span class="nam">outcome_range</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2195" class="stm run hide_run">                <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">mapping</span><span class="op">,</span> <span class="nam">float</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2196" class="stm run hide_run">                    <span class="nam">u</span> <span class="op">+=</span> <span class="nam">weight</span> <span class="op">*</span> <span class="nam">mapping</span><span class="strut">&nbsp;</span></p>
<p id="t2197" class="pln">                <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2198" class="pln">                    <span class="com"># fail if any outcome_range utility_function cannot be calculated from the input</span><span class="strut">&nbsp;</span></p>
<p id="t2199" class="stm run hide_run">                    <span class="key">try</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2200" class="pln">                        <span class="com"># noinspection PyTypeChecker</span><span class="strut">&nbsp;</span></p>
<p id="t2201" class="stm run hide_run">                        <span class="nam">u</span> <span class="op">+=</span> <span class="nam">weight</span> <span class="op">*</span> <span class="nam">gmap</span><span class="op">(</span><span class="nam">mapping</span><span class="op">,</span> <span class="nam">offer</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2202" class="stm mis">                    <span class="key">except</span> <span class="nam">KeyError</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2203" class="stm mis">                        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">ignore_failing_range_utilities</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2204" class="stm mis">                            <span class="key">continue</span><span class="strut">&nbsp;</span></p>
<p id="t2205" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2206" class="stm mis">                        <span class="key">return</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t2207" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2208" class="stm run hide_run">        <span class="key">return</span> <span class="nam">u</span><span class="strut">&nbsp;</span></p>
<p id="t2209" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2210" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2211" class="stm run hide_run"><span class="key">class</span> <span class="nam">NonlinearHyperRectangleUtilityFunction</span><span class="op">(</span><span class="nam">UtilityFunction</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2212" class="pln">    <span class="str">"""A utility function defined as a set of outcome_ranges.</span><span class="strut">&nbsp;</span></p>
<p id="t2213" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2214" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2215" class="pln"><span class="str">     Args:</span><span class="strut">&nbsp;</span></p>
<p id="t2216" class="pln"><span class="str">            hypervolumes: see `HyperRectangleUtilityFunction`</span><span class="strut">&nbsp;</span></p>
<p id="t2217" class="pln"><span class="str">            mappings: see `HyperRectangleUtilityFunction`</span><span class="strut">&nbsp;</span></p>
<p id="t2218" class="pln"><span class="str">            f: A nonlinear function to combine the results of `mappings`</span><span class="strut">&nbsp;</span></p>
<p id="t2219" class="pln"><span class="str">            name: name of the utility function. If None a random name will be generated</span><span class="strut">&nbsp;</span></p>
<p id="t2220" class="pln"><span class="str">    """</span><span class="strut">&nbsp;</span></p>
<p id="t2221" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2222" class="stm run hide_run">    <span class="key">def</span> <span class="nam">xml</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">issues</span><span class="op">:</span> <span class="nam">List</span><span class="op">[</span><span class="nam">Issue</span><span class="op">]</span><span class="op">)</span> <span class="op">-></span> <span class="nam">str</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2223" class="exc">        <span class="key">raise</span> <span class="nam">NotImplementedError</span><span class="op">(</span><span class="str">f"Cannot convert {self.__class__.__name__} to xml"</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2224" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2225" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2226" class="pln">        <span class="nam">self</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2227" class="pln">        <span class="nam">hypervolumes</span><span class="op">:</span> <span class="nam">Iterable</span><span class="op">[</span><span class="nam">OutcomeRange</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2228" class="pln">        <span class="nam">mappings</span><span class="op">:</span> <span class="nam">OutcomeUtilityMappings</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2229" class="pln">        <span class="nam">f</span><span class="op">:</span> <span class="nam">Callable</span><span class="op">[</span><span class="op">[</span><span class="nam">List</span><span class="op">[</span><span class="nam">UtilityValue</span><span class="op">]</span><span class="op">]</span><span class="op">,</span> <span class="nam">UtilityValue</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2230" class="pln">        <span class="nam">name</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">str</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2231" class="pln">        <span class="nam">reserved_value</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">UtilityValue</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2232" class="pln">        <span class="nam">ami</span><span class="op">:</span> <span class="nam">AgentMechanismInterface</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2233" class="pln">    <span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2234" class="stm mis">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">__init__</span><span class="op">(</span><span class="nam">name</span><span class="op">=</span><span class="nam">name</span><span class="op">,</span> <span class="nam">reserved_value</span><span class="op">=</span><span class="nam">reserved_value</span><span class="op">,</span> <span class="nam">ami</span><span class="op">=</span><span class="nam">ami</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2235" class="stm mis">        <span class="nam">self</span><span class="op">.</span><span class="nam">hypervolumes</span> <span class="op">=</span> <span class="nam">hypervolumes</span><span class="strut">&nbsp;</span></p>
<p id="t2236" class="stm mis">        <span class="nam">self</span><span class="op">.</span><span class="nam">mappings</span> <span class="op">=</span> <span class="nam">mappings</span><span class="strut">&nbsp;</span></p>
<p id="t2237" class="stm mis">        <span class="nam">self</span><span class="op">.</span><span class="nam">f</span> <span class="op">=</span> <span class="nam">f</span><span class="strut">&nbsp;</span></p>
<p id="t2238" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2239" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__call__</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">offer</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="str">"Outcome"</span><span class="op">]</span><span class="op">)</span> <span class="op">-></span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">UtilityValue</span><span class="op">]</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2240" class="stm mis">        <span class="key">if</span> <span class="nam">offer</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2241" class="stm mis">            <span class="key">return</span> <span class="nam">self</span><span class="op">.</span><span class="nam">reserved_value</span><span class="strut">&nbsp;</span></p>
<p id="t2242" class="stm mis">        <span class="key">if</span> <span class="key">not</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">hypervolumes</span><span class="op">,</span> <span class="nam">Iterable</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2243" class="stm mis">            <span class="key">raise</span> <span class="nam">ValueError</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2244" class="pln">                <span class="str">"Hypervolumes are not set. Call set_params() or pass them through the constructor."</span><span class="strut">&nbsp;</span></p>
<p id="t2245" class="pln">            <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2246" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2247" class="stm mis">        <span class="nam">u</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t2248" class="stm mis">        <span class="key">for</span> <span class="nam">hypervolume</span><span class="op">,</span> <span class="nam">mapping</span> <span class="key">in</span> <span class="nam">zip</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">hypervolumes</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">mappings</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2249" class="stm mis">            <span class="key">if</span> <span class="nam">outcome_in_range</span><span class="op">(</span><span class="nam">offer</span><span class="op">,</span> <span class="nam">hypervolume</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2250" class="stm mis">                <span class="nam">u</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">gmap</span><span class="op">(</span><span class="nam">mapping</span><span class="op">,</span> <span class="nam">offer</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2251" class="stm mis">        <span class="key">return</span> <span class="nam">self</span><span class="op">.</span><span class="nam">f</span><span class="op">(</span><span class="nam">u</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2252" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2253" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2254" class="stm run hide_run"><span class="key">class</span> <span class="nam">ComplexWeightedUtilityFunction</span><span class="op">(</span><span class="nam">UtilityFunction</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2255" class="pln">    <span class="str">""" A utility function composed of linear aggregation of other utility functions</span><span class="strut">&nbsp;</span></p>
<p id="t2256" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2257" class="pln"><span class="str">        Args:</span><span class="strut">&nbsp;</span></p>
<p id="t2258" class="pln"><span class="str">            ufuns: An iterable of utility functions</span><span class="strut">&nbsp;</span></p>
<p id="t2259" class="pln"><span class="str">            weights: Weights used for combination</span><span class="strut">&nbsp;</span></p>
<p id="t2260" class="pln"><span class="str">            name: Utility function name</span><span class="strut">&nbsp;</span></p>
<p id="t2261" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2262" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t2263" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2264" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2265" class="pln">        <span class="nam">self</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2266" class="pln">        <span class="nam">ufuns</span><span class="op">:</span> <span class="nam">Iterable</span><span class="op">[</span><span class="nam">UtilityFunction</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2267" class="pln">        <span class="nam">weights</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">Iterable</span><span class="op">[</span><span class="nam">float</span><span class="op">]</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2268" class="pln">        <span class="nam">name</span><span class="op">=</span><span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2269" class="pln">        <span class="nam">reserved_value</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">UtilityValue</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2270" class="pln">        <span class="nam">ami</span><span class="op">:</span> <span class="nam">AgentMechanismInterface</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2271" class="pln">    <span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2272" class="stm mis">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">__init__</span><span class="op">(</span><span class="nam">name</span><span class="op">=</span><span class="nam">name</span><span class="op">,</span> <span class="nam">reserved_value</span><span class="op">=</span><span class="nam">reserved_value</span><span class="op">,</span> <span class="nam">ami</span><span class="op">=</span><span class="nam">ami</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2273" class="stm mis">        <span class="nam">self</span><span class="op">.</span><span class="nam">ufuns</span> <span class="op">=</span> <span class="nam">list</span><span class="op">(</span><span class="nam">ufuns</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2274" class="stm mis">        <span class="key">if</span> <span class="nam">weights</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2275" class="stm mis">            <span class="nam">weights</span> <span class="op">=</span> <span class="op">[</span><span class="num">1.0</span><span class="op">]</span> <span class="op">*</span> <span class="nam">len</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">ufuns</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2276" class="stm mis">        <span class="nam">self</span><span class="op">.</span><span class="nam">weights</span> <span class="op">=</span> <span class="nam">list</span><span class="op">(</span><span class="nam">weights</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2277" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2278" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__call__</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">offer</span><span class="op">:</span> <span class="nam">Outcome</span><span class="op">)</span> <span class="op">-></span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">UtilityValue</span><span class="op">]</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2279" class="pln">        <span class="str">"""Calculate the utility_function value for a given outcome.</span><span class="strut">&nbsp;</span></p>
<p id="t2280" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2281" class="pln"><span class="str">        Args:</span><span class="strut">&nbsp;</span></p>
<p id="t2282" class="pln"><span class="str">            offer: The offer to be evaluated.</span><span class="strut">&nbsp;</span></p>
<p id="t2283" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2284" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2285" class="pln"><span class="str">        Remarks:</span><span class="strut">&nbsp;</span></p>
<p id="t2286" class="pln"><span class="str">            - You cannot return None from overriden apply() functions but raise an exception (ValueError) if it was</span><span class="strut">&nbsp;</span></p>
<p id="t2287" class="pln"><span class="str">              not possible to calculate the UtilityValue.</span><span class="strut">&nbsp;</span></p>
<p id="t2288" class="pln"><span class="str">            - Return A UtilityValue not a float for real-valued utilities for the benefit of inspection code.</span><span class="strut">&nbsp;</span></p>
<p id="t2289" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2290" class="pln"><span class="str">        Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t2291" class="pln"><span class="str">            UtilityValue: The utility_function value which may be a distribution. If `None` it means the utility_function value cannot be</span><span class="strut">&nbsp;</span></p>
<p id="t2292" class="pln"><span class="str">            calculated.</span><span class="strut">&nbsp;</span></p>
<p id="t2293" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t2294" class="stm mis">        <span class="key">if</span> <span class="nam">offer</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2295" class="stm mis">            <span class="key">return</span> <span class="nam">self</span><span class="op">.</span><span class="nam">reserved_value</span><span class="strut">&nbsp;</span></p>
<p id="t2296" class="stm mis">        <span class="nam">u</span> <span class="op">=</span> <span class="nam">ExactUtilityValue</span><span class="op">(</span><span class="num">0.0</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2297" class="stm mis">        <span class="nam">failure</span> <span class="op">=</span> <span class="key">False</span><span class="strut">&nbsp;</span></p>
<p id="t2298" class="stm mis">        <span class="key">for</span> <span class="nam">f</span><span class="op">,</span> <span class="nam">w</span> <span class="key">in</span> <span class="nam">zip</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">ufuns</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">weights</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2299" class="stm mis">            <span class="nam">util</span> <span class="op">=</span> <span class="nam">f</span><span class="op">(</span><span class="nam">offer</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2300" class="stm mis">            <span class="key">if</span> <span class="nam">util</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2301" class="stm mis">                <span class="nam">u</span> <span class="op">+=</span> <span class="nam">w</span> <span class="op">*</span> <span class="nam">util</span><span class="strut">&nbsp;</span></p>
<p id="t2302" class="pln">            <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2303" class="stm mis">                <span class="nam">failure</span> <span class="op">=</span> <span class="key">True</span><span class="strut">&nbsp;</span></p>
<p id="t2304" class="stm mis">        <span class="key">return</span> <span class="nam">u</span> <span class="key">if</span> <span class="key">not</span> <span class="nam">failure</span> <span class="key">else</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t2305" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2306" class="stm run hide_run">    <span class="key">def</span> <span class="nam">xml</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">issues</span><span class="op">:</span> <span class="nam">List</span><span class="op">[</span><span class="nam">Issue</span><span class="op">]</span><span class="op">)</span> <span class="op">-></span> <span class="nam">str</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2307" class="stm mis">        <span class="nam">output</span> <span class="op">=</span> <span class="str">""</span><span class="strut">&nbsp;</span></p>
<p id="t2308" class="pln">        <span class="com"># @todo implement weights. Here I assume they are always 1.0</span><span class="strut">&nbsp;</span></p>
<p id="t2309" class="stm mis">        <span class="key">for</span> <span class="nam">f</span><span class="op">,</span> <span class="nam">w</span> <span class="key">in</span> <span class="nam">zip</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">ufuns</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">weights</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2310" class="stm mis">            <span class="nam">output</span> <span class="op">+=</span> <span class="nam">f</span><span class="op">.</span><span class="nam">xml</span><span class="op">(</span><span class="nam">issues</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2311" class="stm mis">        <span class="key">return</span> <span class="nam">output</span><span class="strut">&nbsp;</span></p>
<p id="t2312" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2313" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2314" class="stm run hide_run"><span class="key">class</span> <span class="nam">ComplexNonlinearUtilityFunction</span><span class="op">(</span><span class="nam">UtilityFunction</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2315" class="pln">    <span class="str">""" A utility function composed of nonlinear aggregation of other utility functions</span><span class="strut">&nbsp;</span></p>
<p id="t2316" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2317" class="pln"><span class="str">    Args:</span><span class="strut">&nbsp;</span></p>
<p id="t2318" class="pln"><span class="str">        ufuns: An iterable of utility functions</span><span class="strut">&nbsp;</span></p>
<p id="t2319" class="pln"><span class="str">        combination_function: The function used to combine results of ufuns</span><span class="strut">&nbsp;</span></p>
<p id="t2320" class="pln"><span class="str">        name: Utility function name</span><span class="strut">&nbsp;</span></p>
<p id="t2321" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2322" class="pln"><span class="str">    """</span><span class="strut">&nbsp;</span></p>
<p id="t2323" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2324" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2325" class="pln">        <span class="nam">self</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2326" class="pln">        <span class="nam">ufuns</span><span class="op">:</span> <span class="nam">Iterable</span><span class="op">[</span><span class="nam">UtilityFunction</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2327" class="pln">        <span class="nam">combination_function</span><span class="op">=</span><span class="nam">Callable</span><span class="op">[</span><span class="op">[</span><span class="nam">Iterable</span><span class="op">[</span><span class="nam">UtilityValue</span><span class="op">]</span><span class="op">]</span><span class="op">,</span> <span class="nam">UtilityValue</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2328" class="pln">        <span class="nam">name</span><span class="op">=</span><span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2329" class="pln">        <span class="nam">reserved_value</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">UtilityValue</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2330" class="pln">        <span class="nam">ami</span><span class="op">:</span> <span class="nam">AgentMechanismInterface</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2331" class="pln">    <span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2332" class="stm mis">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">__init__</span><span class="op">(</span><span class="nam">name</span><span class="op">=</span><span class="nam">name</span><span class="op">,</span> <span class="nam">reserved_value</span><span class="op">=</span><span class="nam">reserved_value</span><span class="op">,</span> <span class="nam">ami</span><span class="op">=</span><span class="nam">ami</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2333" class="stm mis">        <span class="nam">self</span><span class="op">.</span><span class="nam">ufuns</span> <span class="op">=</span> <span class="nam">list</span><span class="op">(</span><span class="nam">ufuns</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2334" class="stm mis">        <span class="nam">self</span><span class="op">.</span><span class="nam">combination_function</span> <span class="op">=</span> <span class="nam">combination_function</span><span class="strut">&nbsp;</span></p>
<p id="t2335" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2336" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__call__</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">offer</span><span class="op">:</span> <span class="nam">Outcome</span><span class="op">)</span> <span class="op">-></span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">UtilityValue</span><span class="op">]</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2337" class="pln">        <span class="str">"""Calculate the utility_function value for a given outcome.</span><span class="strut">&nbsp;</span></p>
<p id="t2338" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2339" class="pln"><span class="str">        Args:</span><span class="strut">&nbsp;</span></p>
<p id="t2340" class="pln"><span class="str">            offer: The offer to be evaluated.</span><span class="strut">&nbsp;</span></p>
<p id="t2341" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2342" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2343" class="pln"><span class="str">        Remarks:</span><span class="strut">&nbsp;</span></p>
<p id="t2344" class="pln"><span class="str">            - You cannot return None from overriden apply() functions but raise an exception (ValueError) if it was</span><span class="strut">&nbsp;</span></p>
<p id="t2345" class="pln"><span class="str">              not possible to calculate the UtilityValue.</span><span class="strut">&nbsp;</span></p>
<p id="t2346" class="pln"><span class="str">            - Return A UtilityValue not a float for real-valued utilities for the benefit of inspection code.</span><span class="strut">&nbsp;</span></p>
<p id="t2347" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2348" class="pln"><span class="str">        Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t2349" class="pln"><span class="str">            UtilityValue: The utility_function value which may be a distribution. If `None` it means the utility_function value cannot be</span><span class="strut">&nbsp;</span></p>
<p id="t2350" class="pln"><span class="str">            calculated.</span><span class="strut">&nbsp;</span></p>
<p id="t2351" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t2352" class="stm mis">        <span class="key">if</span> <span class="nam">offer</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2353" class="stm mis">            <span class="key">return</span> <span class="nam">self</span><span class="op">.</span><span class="nam">reserved_value</span><span class="strut">&nbsp;</span></p>
<p id="t2354" class="stm mis">        <span class="key">return</span> <span class="nam">self</span><span class="op">.</span><span class="nam">combination_function</span><span class="op">(</span><span class="op">[</span><span class="nam">f</span><span class="op">(</span><span class="nam">offer</span><span class="op">)</span> <span class="key">for</span> <span class="nam">f</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">ufuns</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2355" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2356" class="stm run hide_run">    <span class="key">def</span> <span class="nam">xml</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">issues</span><span class="op">:</span> <span class="nam">List</span><span class="op">[</span><span class="nam">Issue</span><span class="op">]</span><span class="op">)</span> <span class="op">-></span> <span class="nam">str</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2357" class="exc">        <span class="key">raise</span> <span class="nam">NotImplementedError</span><span class="op">(</span><span class="str">f"Cannot convert {self.__class__.__name__} to xml"</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2358" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2359" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2360" class="stm run hide_run"><span class="key">class</span> <span class="nam">IPUtilityFunction</span><span class="op">(</span><span class="nam">UtilityFunction</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2361" class="pln">    <span class="str">"""Independent Probabilistic Utility Function.</span><span class="strut">&nbsp;</span></p>
<p id="t2362" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2363" class="pln"><span class="str">    Args:</span><span class="strut">&nbsp;</span></p>
<p id="t2364" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2365" class="pln"><span class="str">        outcomes: Iterable of outcomes</span><span class="strut">&nbsp;</span></p>
<p id="t2366" class="pln"><span class="str">        distribs: distributions associated with the outcomes</span><span class="strut">&nbsp;</span></p>
<p id="t2367" class="pln"><span class="str">        name: ufun name</span><span class="strut">&nbsp;</span></p>
<p id="t2368" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2369" class="pln"><span class="str">    Examples:</span><span class="strut">&nbsp;</span></p>
<p id="t2370" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2371" class="pln"><span class="str">        >>> f = IPUtilityFunction(outcomes=[('o1',), ('o2',)]</span><span class="strut">&nbsp;</span></p>
<p id="t2372" class="pln"><span class="str">        ...         , distributions=[UtilityDistribution(dtype='uniform', loc=0.0, scale=0.5)</span><span class="strut">&nbsp;</span></p>
<p id="t2373" class="pln"><span class="str">        ...         , UtilityDistribution(dtype='uniform', loc=0.1, scale=0.5)])</span><span class="strut">&nbsp;</span></p>
<p id="t2374" class="pln"><span class="str">        >>> f(('o1',))</span><span class="strut">&nbsp;</span></p>
<p id="t2375" class="pln"><span class="str">        U(0.0, 0.5)</span><span class="strut">&nbsp;</span></p>
<p id="t2376" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2377" class="pln"><span class="str">        >>> f = IPUtilityFunction(outcomes=[{'cost': 10, 'dist': 20}, {'cost': 10, 'dist': 30}]</span><span class="strut">&nbsp;</span></p>
<p id="t2378" class="pln"><span class="str">        ...         , distributions=[UtilityDistribution(dtype='uniform', loc=0.0, scale=0.5)</span><span class="strut">&nbsp;</span></p>
<p id="t2379" class="pln"><span class="str">        ...         , UtilityDistribution(dtype='uniform', loc=0.1, scale=0.5)])</span><span class="strut">&nbsp;</span></p>
<p id="t2380" class="pln"><span class="str">        >>> f({'cost': 10, 'dist': 30})</span><span class="strut">&nbsp;</span></p>
<p id="t2381" class="pln"><span class="str">        U(0.1, 0.6)</span><span class="strut">&nbsp;</span></p>
<p id="t2382" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2383" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2384" class="pln"><span class="str">    """</span><span class="strut">&nbsp;</span></p>
<p id="t2385" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2386" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2387" class="pln">        <span class="nam">self</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2388" class="pln">        <span class="nam">outcomes</span><span class="op">:</span> <span class="nam">Iterable</span><span class="op">[</span><span class="str">"Outcome"</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2389" class="pln">        <span class="nam">distributions</span><span class="op">:</span> <span class="nam">Iterable</span><span class="op">[</span><span class="str">"UtilityDistribution"</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2390" class="pln">        <span class="nam">issue_names</span><span class="op">:</span> <span class="nam">Iterable</span><span class="op">[</span><span class="nam">str</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2391" class="pln">        <span class="nam">name</span><span class="op">=</span><span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2392" class="pln">        <span class="nam">reserved_value</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">UtilityValue</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2393" class="pln">        <span class="nam">ami</span><span class="op">:</span> <span class="nam">AgentMechanismInterface</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2394" class="pln">    <span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2395" class="stm run hide_run">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">__init__</span><span class="op">(</span><span class="nam">name</span><span class="op">=</span><span class="nam">name</span><span class="op">,</span> <span class="nam">reserved_value</span><span class="op">=</span><span class="nam">reserved_value</span><span class="op">,</span> <span class="nam">ami</span><span class="op">=</span><span class="nam">ami</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2396" class="stm run hide_run">        <span class="nam">outcomes</span><span class="op">,</span> <span class="nam">distributions</span> <span class="op">=</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2397" class="pln">            <span class="nam">list</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">)</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2398" class="pln">            <span class="op">(</span><span class="nam">list</span><span class="op">(</span><span class="nam">distributions</span><span class="op">)</span> <span class="key">if</span> <span class="nam">distributions</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span> <span class="key">else</span> <span class="key">None</span><span class="op">)</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2399" class="pln">        <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2400" class="stm par run hide_run"><span class="annotate short">2400&#x202F;&#x219B;&#x202F;2401</span><span class="annotate long">line 2400 didn't jump to line 2401, because the condition on line 2400 was never true</span>        <span class="key">if</span> <span class="nam">len</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">)</span> <span class="op">&lt;</span> <span class="num">1</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2401" class="stm mis">            <span class="key">raise</span> <span class="nam">ValueError</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2402" class="pln">                <span class="str">"IPUtilityFunction cannot be initialized with zero outcomes"</span><span class="strut">&nbsp;</span></p>
<p id="t2403" class="pln">            <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2404" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">tupelized</span> <span class="op">=</span> <span class="key">False</span><span class="strut">&nbsp;</span></p>
<p id="t2405" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2406" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">n_issues</span> <span class="op">=</span> <span class="nam">len</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2407" class="stm par run hide_run"><span class="annotate short">2407&#x202F;&#x219B;&#x202F;2410</span><span class="annotate long">line 2407 didn't jump to line 2410, because the condition on line 2407 was never false</span>        <span class="key">if</span> <span class="nam">issue_names</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2408" class="stm run hide_run">            <span class="nam">self</span><span class="op">.</span><span class="nam">issue_names</span> <span class="op">=</span> <span class="nam">sorted</span><span class="op">(</span><span class="nam">ikeys</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2409" class="pln">        <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2410" class="stm mis">            <span class="nam">self</span><span class="op">.</span><span class="nam">issue_names</span> <span class="op">=</span> <span class="nam">range</span><span class="op">(</span><span class="nam">len</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2411" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2412" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">issue_keys</span> <span class="op">=</span> <span class="nam">dict</span><span class="op">(</span><span class="nam">zip</span><span class="op">(</span><span class="nam">range</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">n_issues</span><span class="op">)</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">issue_names</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2413" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2414" class="stm run hide_run">        <span class="key">if</span> <span class="key">not</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">,</span> <span class="nam">tuple</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2415" class="stm run hide_run">            <span class="nam">outcomes</span> <span class="op">=</span> <span class="op">[</span><span class="strut">&nbsp;</span></p>
<p id="t2416" class="pln">                <span class="nam">tuple</span><span class="op">(</span><span class="nam">iget</span><span class="op">(</span><span class="nam">_</span><span class="op">,</span> <span class="nam">key</span><span class="op">,</span> <span class="key">None</span><span class="op">)</span> <span class="key">for</span> <span class="nam">key</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">issue_names</span><span class="op">)</span> <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">outcomes</span><span class="strut">&nbsp;</span></p>
<p id="t2417" class="pln">            <span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t2418" class="stm run hide_run">            <span class="nam">self</span><span class="op">.</span><span class="nam">tupelized</span> <span class="op">=</span> <span class="key">True</span><span class="strut">&nbsp;</span></p>
<p id="t2419" class="stm run hide_run">        <span class="key">if</span> <span class="nam">distributions</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2420" class="stm run hide_run">            <span class="nam">distributions</span> <span class="op">=</span> <span class="op">[</span><span class="strut">&nbsp;</span></p>
<p id="t2421" class="pln">                <span class="nam">UtilityDistribution</span><span class="op">(</span><span class="nam">dtype</span><span class="op">=</span><span class="str">"uniform"</span><span class="op">,</span> <span class="nam">loc</span><span class="op">=</span><span class="num">0.0</span><span class="op">,</span> <span class="nam">scale</span><span class="op">=</span><span class="num">1.0</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2422" class="pln">                <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">len</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2423" class="pln">            <span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t2424" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">distributions</span> <span class="op">=</span> <span class="nam">dict</span><span class="op">(</span><span class="nam">zip</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">,</span> <span class="nam">distributions</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2425" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2426" class="stm run hide_run">    <span class="key">def</span> <span class="nam">distribution</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">outcome</span><span class="op">:</span> <span class="str">"Outcome"</span><span class="op">)</span> <span class="op">-></span> <span class="str">"UtilityValue"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2427" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t2428" class="pln"><span class="str">        Returns the distributon associated with a specific outcome</span><span class="strut">&nbsp;</span></p>
<p id="t2429" class="pln"><span class="str">        Args:</span><span class="strut">&nbsp;</span></p>
<p id="t2430" class="pln"><span class="str">            outcome:</span><span class="strut">&nbsp;</span></p>
<p id="t2431" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2432" class="pln"><span class="str">        Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t2433" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2434" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t2435" class="stm run hide_run">        <span class="key">return</span> <span class="nam">self</span><span class="op">.</span><span class="nam">distributions</span><span class="op">[</span><span class="nam">self</span><span class="op">.</span><span class="nam">key</span><span class="op">(</span><span class="nam">outcome</span><span class="op">)</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t2436" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2437" class="stm run hide_run">    <span class="op">@</span><span class="nam">classmethod</span><span class="strut">&nbsp;</span></p>
<p id="t2438" class="stm run hide_run">    <span class="key">def</span> <span class="nam">from_ufun</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2439" class="pln">        <span class="nam">cls</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2440" class="pln">        <span class="nam">u</span><span class="op">:</span> <span class="nam">MappingUtilityFunction</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2441" class="pln">        <span class="nam">range</span><span class="op">:</span> <span class="nam">Tuple</span><span class="op">[</span><span class="nam">float</span><span class="op">,</span> <span class="nam">float</span><span class="op">]</span> <span class="op">=</span> <span class="op">(</span><span class="num">0.0</span><span class="op">,</span> <span class="num">1.0</span><span class="op">)</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2442" class="pln">        <span class="nam">uncertainty</span><span class="op">:</span> <span class="nam">float</span> <span class="op">=</span> <span class="num">0.5</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2443" class="pln">        <span class="nam">variability</span><span class="op">:</span> <span class="nam">float</span> <span class="op">=</span> <span class="num">0.0</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2444" class="pln">    <span class="op">)</span> <span class="op">-></span> <span class="str">"IPUtilityFunction"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2445" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t2446" class="pln"><span class="str">        Generates a distribution from which `u` may have been sampled</span><span class="strut">&nbsp;</span></p>
<p id="t2447" class="pln"><span class="str">        Args:</span><span class="strut">&nbsp;</span></p>
<p id="t2448" class="pln"><span class="str">            u:</span><span class="strut">&nbsp;</span></p>
<p id="t2449" class="pln"><span class="str">            range: range of the utility_function values</span><span class="strut">&nbsp;</span></p>
<p id="t2450" class="pln"><span class="str">            uncertainty: uncertainty level</span><span class="strut">&nbsp;</span></p>
<p id="t2451" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2452" class="pln"><span class="str">        Examples:</span><span class="strut">&nbsp;</span></p>
<p id="t2453" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2454" class="pln"><span class="str">            - No uncertainty</span><span class="strut">&nbsp;</span></p>
<p id="t2455" class="pln"><span class="str">            >>> u = MappingUtilityFunction(mapping=dict(zip([('o1',), ('o2',)], [0.3, 0.7])))</span><span class="strut">&nbsp;</span></p>
<p id="t2456" class="pln"><span class="str">            >>> p = IPUtilityFunction.from_ufun(u, uncertainty=0.0)</span><span class="strut">&nbsp;</span></p>
<p id="t2457" class="pln"><span class="str">            >>> print(p)</span><span class="strut">&nbsp;</span></p>
<p id="t2458" class="pln"><span class="str">            {('o1',): U(0.3, 0.3), ('o2',): U(0.7, 0.7)}</span><span class="strut">&nbsp;</span></p>
<p id="t2459" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2460" class="pln"><span class="str">            - Full uncertainty</span><span class="strut">&nbsp;</span></p>
<p id="t2461" class="pln"><span class="str">            >>> u = MappingUtilityFunction(mapping=dict(zip([('o1',), ('o2',)], [0.3, 0.7])))</span><span class="strut">&nbsp;</span></p>
<p id="t2462" class="pln"><span class="str">            >>> p = IPUtilityFunction.from_ufun(u, uncertainty=1.0)</span><span class="strut">&nbsp;</span></p>
<p id="t2463" class="pln"><span class="str">            >>> print(p)</span><span class="strut">&nbsp;</span></p>
<p id="t2464" class="pln"><span class="str">            {('o1',): U(0.0, 1.0), ('o2',): U(0.0, 1.0)}</span><span class="strut">&nbsp;</span></p>
<p id="t2465" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2466" class="pln"><span class="str">            - some uncertainty</span><span class="strut">&nbsp;</span></p>
<p id="t2467" class="pln"><span class="str">            >>> u = MappingUtilityFunction(mapping=dict(zip([('o1',), ('o2',)], [0.3, 0.7])))</span><span class="strut">&nbsp;</span></p>
<p id="t2468" class="pln"><span class="str">            >>> p = IPUtilityFunction.from_ufun(u, uncertainty=0.1)</span><span class="strut">&nbsp;</span></p>
<p id="t2469" class="pln"><span class="str">            >>> print([_.scale for _ in p.distributions.values()])</span><span class="strut">&nbsp;</span></p>
<p id="t2470" class="pln"><span class="str">            [0.1, 0.1]</span><span class="strut">&nbsp;</span></p>
<p id="t2471" class="pln"><span class="str">            >>> for k, v in p.distributions.items():</span><span class="strut">&nbsp;</span></p>
<p id="t2472" class="pln"><span class="str">            ...     assert v.loc &lt;= u(k)</span><span class="strut">&nbsp;</span></p>
<p id="t2473" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2474" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2475" class="pln"><span class="str">        Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t2476" class="pln"><span class="str">            a new IPUtilityFunction</span><span class="strut">&nbsp;</span></p>
<p id="t2477" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t2478" class="stm par run hide_run"><span class="annotate short">2478&#x202F;&#x219B;&#x202F;2486</span><span class="annotate long">line 2478 didn't jump to line 2486, because the condition on line 2478 was never false</span>        <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">u</span><span class="op">.</span><span class="nam">mapping</span><span class="op">,</span> <span class="nam">dict</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2479" class="stm run hide_run">            <span class="key">return</span> <span class="nam">cls</span><span class="op">.</span><span class="nam">from_mapping</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2480" class="pln">                <span class="nam">u</span><span class="op">.</span><span class="nam">mapping</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2481" class="pln">                <span class="nam">range</span><span class="op">=</span><span class="nam">range</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2482" class="pln">                <span class="nam">uncertainty</span><span class="op">=</span><span class="nam">uncertainty</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2483" class="pln">                <span class="nam">variability</span><span class="op">=</span><span class="nam">variability</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2484" class="pln">                <span class="nam">reserved_value</span><span class="op">=</span><span class="nam">u</span><span class="op">.</span><span class="nam">reserved_value</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2485" class="pln">            <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2486" class="stm mis">        <span class="key">return</span> <span class="nam">cls</span><span class="op">.</span><span class="nam">from_mapping</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2487" class="pln">            <span class="nam">dict</span><span class="op">(</span><span class="nam">zip</span><span class="op">(</span><span class="nam">ikeys</span><span class="op">(</span><span class="nam">u</span><span class="op">.</span><span class="nam">mapping</span><span class="op">)</span><span class="op">,</span> <span class="nam">ivalues</span><span class="op">(</span><span class="nam">u</span><span class="op">.</span><span class="nam">mapping</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2488" class="pln">            <span class="nam">range</span><span class="op">=</span><span class="nam">range</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2489" class="pln">            <span class="nam">uncertainty</span><span class="op">=</span><span class="nam">uncertainty</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2490" class="pln">            <span class="nam">variability</span><span class="op">=</span><span class="nam">variability</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2491" class="pln">            <span class="nam">reserved_value</span><span class="op">=</span><span class="nam">u</span><span class="op">.</span><span class="nam">reserved_value</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2492" class="pln">        <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2493" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2494" class="stm run hide_run">    <span class="op">@</span><span class="nam">classmethod</span><span class="strut">&nbsp;</span></p>
<p id="t2495" class="stm run hide_run">    <span class="key">def</span> <span class="nam">from_mapping</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2496" class="pln">        <span class="nam">cls</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2497" class="pln">        <span class="nam">mapping</span><span class="op">:</span> <span class="nam">Dict</span><span class="op">[</span><span class="str">"Outcome"</span><span class="op">,</span> <span class="nam">float</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2498" class="pln">        <span class="nam">range</span><span class="op">:</span> <span class="nam">Tuple</span><span class="op">[</span><span class="nam">float</span><span class="op">,</span> <span class="nam">float</span><span class="op">]</span> <span class="op">=</span> <span class="op">(</span><span class="num">0.0</span><span class="op">,</span> <span class="num">1.0</span><span class="op">)</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2499" class="pln">        <span class="nam">uncertainty</span><span class="op">:</span> <span class="nam">float</span> <span class="op">=</span> <span class="num">0.5</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2500" class="pln">        <span class="nam">variability</span><span class="op">:</span> <span class="nam">float</span> <span class="op">=</span> <span class="num">0.0</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2501" class="pln">        <span class="nam">reserved_value</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">float</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2502" class="pln">    <span class="op">)</span> <span class="op">-></span> <span class="str">"IPUtilityFunction"</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2503" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t2504" class="pln"><span class="str">        Generates a distribution from which `u` may have been sampled</span><span class="strut">&nbsp;</span></p>
<p id="t2505" class="pln"><span class="str">        Args:</span><span class="strut">&nbsp;</span></p>
<p id="t2506" class="pln"><span class="str">            mapping: mapping from outcomes to float values</span><span class="strut">&nbsp;</span></p>
<p id="t2507" class="pln"><span class="str">            range: range of the utility_function values</span><span class="strut">&nbsp;</span></p>
<p id="t2508" class="pln"><span class="str">            uncertainty: uncertainty level</span><span class="strut">&nbsp;</span></p>
<p id="t2509" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2510" class="pln"><span class="str">        Examples:</span><span class="strut">&nbsp;</span></p>
<p id="t2511" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2512" class="pln"><span class="str">            - No uncertainty</span><span class="strut">&nbsp;</span></p>
<p id="t2513" class="pln"><span class="str">            >>> mapping=dict(zip([('o1',), ('o2',)], [0.3, 0.7]))</span><span class="strut">&nbsp;</span></p>
<p id="t2514" class="pln"><span class="str">            >>> p = IPUtilityFunction.from_mapping(mapping, uncertainty=0.0)</span><span class="strut">&nbsp;</span></p>
<p id="t2515" class="pln"><span class="str">            >>> print(p)</span><span class="strut">&nbsp;</span></p>
<p id="t2516" class="pln"><span class="str">            {('o1',): U(0.3, 0.3), ('o2',): U(0.7, 0.7)}</span><span class="strut">&nbsp;</span></p>
<p id="t2517" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2518" class="pln"><span class="str">            - Full uncertainty</span><span class="strut">&nbsp;</span></p>
<p id="t2519" class="pln"><span class="str">            >>> mapping=dict(zip([('o1',), ('o2',)], [0.3, 0.7]))</span><span class="strut">&nbsp;</span></p>
<p id="t2520" class="pln"><span class="str">            >>> p = IPUtilityFunction.from_mapping(mapping, uncertainty=1.0)</span><span class="strut">&nbsp;</span></p>
<p id="t2521" class="pln"><span class="str">            >>> print(p)</span><span class="strut">&nbsp;</span></p>
<p id="t2522" class="pln"><span class="str">            {('o1',): U(0.0, 1.0), ('o2',): U(0.0, 1.0)}</span><span class="strut">&nbsp;</span></p>
<p id="t2523" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2524" class="pln"><span class="str">            - some uncertainty</span><span class="strut">&nbsp;</span></p>
<p id="t2525" class="pln"><span class="str">            >>> mapping=dict(zip([('o1',), ('o2',)], [0.3, 0.7]))</span><span class="strut">&nbsp;</span></p>
<p id="t2526" class="pln"><span class="str">            >>> p = IPUtilityFunction.from_mapping(mapping, uncertainty=0.1)</span><span class="strut">&nbsp;</span></p>
<p id="t2527" class="pln"><span class="str">            >>> print([_.scale for _ in p.distributions.values()])</span><span class="strut">&nbsp;</span></p>
<p id="t2528" class="pln"><span class="str">            [0.1, 0.1]</span><span class="strut">&nbsp;</span></p>
<p id="t2529" class="pln"><span class="str">            >>> for k, v in p.distributions.items():</span><span class="strut">&nbsp;</span></p>
<p id="t2530" class="pln"><span class="str">            ...     assert v.loc &lt;= mapping[k]</span><span class="strut">&nbsp;</span></p>
<p id="t2531" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2532" class="pln"><span class="str">        Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t2533" class="pln"><span class="str">            a new IPUtilityFunction</span><span class="strut">&nbsp;</span></p>
<p id="t2534" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t2535" class="stm run hide_run">        <span class="nam">outcomes</span> <span class="op">=</span> <span class="nam">list</span><span class="op">(</span><span class="nam">mapping</span><span class="op">.</span><span class="nam">keys</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2536" class="stm par run hide_run"><span class="annotate short">2536&#x202F;&#x219B;&#x202F;2537</span><span class="annotate long">line 2536 didn't jump to line 2537, because the condition on line 2536 was never true</span>        <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">uncertainty</span><span class="op">,</span> <span class="nam">Iterable</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2537" class="stm mis">            <span class="nam">uncertainties</span> <span class="op">=</span> <span class="nam">uncertainty</span><span class="strut">&nbsp;</span></p>
<p id="t2538" class="stm par run hide_run"><span class="annotate short">2538&#x202F;&#x219B;&#x202F;2541</span><span class="annotate long">line 2538 didn't jump to line 2541</span>        <span class="key">elif</span> <span class="nam">variability</span> <span class="op">&lt;=</span> <span class="num">0.0</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2539" class="stm run hide_run">            <span class="nam">uncertainties</span> <span class="op">=</span> <span class="op">[</span><span class="nam">uncertainty</span><span class="op">]</span> <span class="op">*</span> <span class="nam">len</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2540" class="pln">        <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2541" class="stm mis">            <span class="nam">uncertainties</span> <span class="op">=</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2542" class="pln">                <span class="nam">uncertainty</span><span class="strut">&nbsp;</span></p>
<p id="t2543" class="pln">                <span class="op">+</span> <span class="op">(</span><span class="nam">np</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">rand</span><span class="op">(</span><span class="nam">len</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">)</span><span class="op">)</span> <span class="op">-</span> <span class="num">0.5</span><span class="op">)</span> <span class="op">*</span> <span class="nam">variability</span> <span class="op">*</span> <span class="nam">uncertainty</span><span class="strut">&nbsp;</span></p>
<p id="t2544" class="pln">            <span class="op">)</span><span class="op">.</span><span class="nam">tolist</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2545" class="stm run hide_run">        <span class="key">return</span> <span class="nam">IPUtilityFunction</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2546" class="pln">            <span class="nam">outcomes</span><span class="op">=</span><span class="nam">outcomes</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2547" class="pln">            <span class="nam">distributions</span><span class="op">=</span><span class="op">[</span><span class="strut">&nbsp;</span></p>
<p id="t2548" class="pln">                <span class="nam">Distribution</span><span class="op">.</span><span class="nam">around</span><span class="op">(</span><span class="nam">value</span><span class="op">=</span><span class="nam">mapping</span><span class="op">[</span><span class="nam">o</span><span class="op">]</span><span class="op">,</span> <span class="nam">uncertainty</span><span class="op">=</span><span class="nam">u</span><span class="op">,</span> <span class="nam">range</span><span class="op">=</span><span class="nam">range</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2549" class="pln">                <span class="key">for</span> <span class="nam">o</span><span class="op">,</span> <span class="nam">u</span> <span class="key">in</span> <span class="nam">zip</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">,</span> <span class="nam">uncertainties</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2550" class="pln">            <span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2551" class="pln">            <span class="nam">reserved_value</span><span class="op">=</span><span class="nam">reserved_value</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2552" class="pln">        <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2553" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2554" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__str__</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2555" class="stm run hide_run">        <span class="key">return</span> <span class="nam">pprint</span><span class="op">.</span><span class="nam">pformat</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">distributions</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2556" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2557" class="stm run hide_run">    <span class="key">def</span> <span class="nam">sample</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span> <span class="op">-></span> <span class="nam">MappingUtilityFunction</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2558" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t2559" class="pln"><span class="str">        Samples the utility_function distribution to create a mapping utility function</span><span class="strut">&nbsp;</span></p>
<p id="t2560" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2561" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2562" class="pln"><span class="str">        Examples:</span><span class="strut">&nbsp;</span></p>
<p id="t2563" class="pln"><span class="str">            >>> import random</span><span class="strut">&nbsp;</span></p>
<p id="t2564" class="pln"><span class="str">            >>> f = IPUtilityFunction(outcomes=[('o1',), ('o2',)]</span><span class="strut">&nbsp;</span></p>
<p id="t2565" class="pln"><span class="str">            ...         , distributions=[UtilityDistribution(dtype='uniform', loc=0.0, scale=0.2)</span><span class="strut">&nbsp;</span></p>
<p id="t2566" class="pln"><span class="str">            ...         , UtilityDistribution(dtype='uniform', loc=0.4, scale=0.5)])</span><span class="strut">&nbsp;</span></p>
<p id="t2567" class="pln"><span class="str">            >>> u = f.sample()</span><span class="strut">&nbsp;</span></p>
<p id="t2568" class="pln"><span class="str">            >>> assert u(('o1',)) &lt;= 0.2</span><span class="strut">&nbsp;</span></p>
<p id="t2569" class="pln"><span class="str">            >>> assert 0.4 &lt;= u(('o2',)) &lt;= 0.9</span><span class="strut">&nbsp;</span></p>
<p id="t2570" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2571" class="pln"><span class="str">        Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t2572" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2573" class="pln"><span class="str">            MappingUtilityFunction</span><span class="strut">&nbsp;</span></p>
<p id="t2574" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t2575" class="stm run hide_run">        <span class="key">return</span> <span class="nam">MappingUtilityFunction</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2576" class="pln">            <span class="nam">mapping</span><span class="op">=</span><span class="op">{</span><span class="nam">o</span><span class="op">:</span> <span class="nam">d</span><span class="op">.</span><span class="nam">sample</span><span class="op">(</span><span class="num">1</span><span class="op">)</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="key">for</span> <span class="nam">o</span><span class="op">,</span> <span class="nam">d</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">distributions</span><span class="op">.</span><span class="nam">items</span><span class="op">(</span><span class="op">)</span><span class="op">}</span><span class="strut">&nbsp;</span></p>
<p id="t2577" class="pln">        <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2578" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2579" class="stm run hide_run">    <span class="key">def</span> <span class="nam">key</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">outcome</span><span class="op">:</span> <span class="str">"Outcome"</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2580" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t2581" class="pln"><span class="str">        Returns the key of the given outcome in self.distributions.</span><span class="strut">&nbsp;</span></p>
<p id="t2582" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2583" class="pln"><span class="str">        Args:</span><span class="strut">&nbsp;</span></p>
<p id="t2584" class="pln"><span class="str">            outcome:</span><span class="strut">&nbsp;</span></p>
<p id="t2585" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2586" class="pln"><span class="str">        Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t2587" class="pln"><span class="str">            tuple</span><span class="strut">&nbsp;</span></p>
<p id="t2588" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2589" class="pln"><span class="str">        Examples:</span><span class="strut">&nbsp;</span></p>
<p id="t2590" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2591" class="pln"><span class="str">        >>> f = IPUtilityFunction(outcomes=[('o1',), ('o2',)]</span><span class="strut">&nbsp;</span></p>
<p id="t2592" class="pln"><span class="str">        ...         , distributions=[UtilityDistribution(dtype='uniform', loc=0.0, scale=0.5)</span><span class="strut">&nbsp;</span></p>
<p id="t2593" class="pln"><span class="str">        ...         , UtilityDistribution(dtype='uniform', loc=0.1, scale=0.5)])</span><span class="strut">&nbsp;</span></p>
<p id="t2594" class="pln"><span class="str">        >>> f.key({0:'o1'})</span><span class="strut">&nbsp;</span></p>
<p id="t2595" class="pln"><span class="str">        ('o1',)</span><span class="strut">&nbsp;</span></p>
<p id="t2596" class="pln"><span class="str">        >>> f.key(('o1',))</span><span class="strut">&nbsp;</span></p>
<p id="t2597" class="pln"><span class="str">        ('o1',)</span><span class="strut">&nbsp;</span></p>
<p id="t2598" class="pln"><span class="str">        >>> f.distributions</span><span class="strut">&nbsp;</span></p>
<p id="t2599" class="pln"><span class="str">        {('o1',): U(0.0, 0.5), ('o2',): U(0.1, 0.6)}</span><span class="strut">&nbsp;</span></p>
<p id="t2600" class="pln"><span class="str">        >>> f.distribution(('o1',))</span><span class="strut">&nbsp;</span></p>
<p id="t2601" class="pln"><span class="str">        U(0.0, 0.5)</span><span class="strut">&nbsp;</span></p>
<p id="t2602" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2603" class="pln"><span class="str">        >>> f = IPUtilityFunction(outcomes=[{'cost': 10, 'dist': 20}, {'dist': 30, 'cost': 10}]</span><span class="strut">&nbsp;</span></p>
<p id="t2604" class="pln"><span class="str">        ...         , distributions=[UtilityDistribution(dtype='uniform', loc=0.0, scale=0.5)</span><span class="strut">&nbsp;</span></p>
<p id="t2605" class="pln"><span class="str">        ...         , UtilityDistribution(dtype='uniform', loc=0.1, scale=0.5)])</span><span class="strut">&nbsp;</span></p>
<p id="t2606" class="pln"><span class="str">        >>> f.key({'dist': 30, 'cost': 10})</span><span class="strut">&nbsp;</span></p>
<p id="t2607" class="pln"><span class="str">        (10, 30)</span><span class="strut">&nbsp;</span></p>
<p id="t2608" class="pln"><span class="str">        >>> f.key({'cost': 10, 'dist': 30})</span><span class="strut">&nbsp;</span></p>
<p id="t2609" class="pln"><span class="str">        (10, 30)</span><span class="strut">&nbsp;</span></p>
<p id="t2610" class="pln"><span class="str">        >>> f.distributions</span><span class="strut">&nbsp;</span></p>
<p id="t2611" class="pln"><span class="str">        {(10, 20): U(0.0, 0.5), (10, 30): U(0.1, 0.6)}</span><span class="strut">&nbsp;</span></p>
<p id="t2612" class="pln"><span class="str">        >>> f.distribution((10, 20.0))</span><span class="strut">&nbsp;</span></p>
<p id="t2613" class="pln"><span class="str">        U(0.0, 0.5)</span><span class="strut">&nbsp;</span></p>
<p id="t2614" class="pln"><span class="str">        >>> f.distribution({'cost': 10, 'dist': 20})</span><span class="strut">&nbsp;</span></p>
<p id="t2615" class="pln"><span class="str">        U(0.0, 0.5)</span><span class="strut">&nbsp;</span></p>
<p id="t2616" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2617" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t2618" class="stm run hide_run">        <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">outcome</span><span class="op">,</span> <span class="nam">tuple</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2619" class="stm run hide_run">            <span class="key">return</span> <span class="nam">outcome</span><span class="strut">&nbsp;</span></p>
<p id="t2620" class="stm run hide_run">        <span class="key">return</span> <span class="nam">tuple</span><span class="op">(</span><span class="op">(</span><span class="nam">outcome</span><span class="op">.</span><span class="nam">get</span><span class="op">(</span><span class="nam">_</span><span class="op">,</span> <span class="key">None</span><span class="op">)</span> <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">issue_names</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2621" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2622" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__call__</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">offer</span><span class="op">:</span> <span class="nam">Outcome</span><span class="op">)</span> <span class="op">-></span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">UtilityValue</span><span class="op">]</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2623" class="pln">        <span class="str">"""Calculate the utility_function value for a given outcome.</span><span class="strut">&nbsp;</span></p>
<p id="t2624" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2625" class="pln"><span class="str">        Args:</span><span class="strut">&nbsp;</span></p>
<p id="t2626" class="pln"><span class="str">            offer: The offer to be evaluated.</span><span class="strut">&nbsp;</span></p>
<p id="t2627" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2628" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2629" class="pln"><span class="str">        Remarks:</span><span class="strut">&nbsp;</span></p>
<p id="t2630" class="pln"><span class="str">            - You cannot return None from overriden apply() functions but raise an exception (ValueError) if it was</span><span class="strut">&nbsp;</span></p>
<p id="t2631" class="pln"><span class="str">              not possible to calculate the UtilityValue.</span><span class="strut">&nbsp;</span></p>
<p id="t2632" class="pln"><span class="str">            - Return A UtilityValue not a float for real-valued utilities for the benefit of inspection code.</span><span class="strut">&nbsp;</span></p>
<p id="t2633" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2634" class="pln"><span class="str">        Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t2635" class="pln"><span class="str">            UtilityValue: The utility_function value which may be a distribution. If `None` it means the utility_function value cannot be</span><span class="strut">&nbsp;</span></p>
<p id="t2636" class="pln"><span class="str">            calculated.</span><span class="strut">&nbsp;</span></p>
<p id="t2637" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t2638" class="stm par run hide_run"><span class="annotate short">2638&#x202F;&#x219B;&#x202F;2639</span><span class="annotate long">line 2638 didn't jump to line 2639, because the condition on line 2638 was never true</span>        <span class="key">if</span> <span class="nam">offer</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2639" class="stm mis">            <span class="key">return</span> <span class="nam">self</span><span class="op">.</span><span class="nam">reserved_value</span><span class="strut">&nbsp;</span></p>
<p id="t2640" class="stm run hide_run">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">tupelized</span> <span class="key">and</span> <span class="key">not</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">offer</span><span class="op">,</span> <span class="nam">tuple</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2641" class="stm run hide_run">            <span class="nam">offer</span> <span class="op">=</span> <span class="nam">tuple</span><span class="op">(</span><span class="nam">ivalues</span><span class="op">(</span><span class="nam">offer</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2642" class="stm run hide_run">        <span class="key">return</span> <span class="nam">self</span><span class="op">.</span><span class="nam">distributions</span><span class="op">[</span><span class="nam">offer</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t2643" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2644" class="stm run hide_run">    <span class="key">def</span> <span class="nam">xml</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">issues</span><span class="op">:</span> <span class="nam">List</span><span class="op">[</span><span class="nam">Issue</span><span class="op">]</span><span class="op">)</span> <span class="op">-></span> <span class="nam">str</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2645" class="exc">        <span class="key">raise</span> <span class="nam">NotImplementedError</span><span class="op">(</span><span class="str">f"Cannot convert {self.__class__.__name__} to xml"</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2646" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2647" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2648" class="stm run hide_run"><span class="key">def</span> <span class="nam">_pareto_frontier</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2649" class="pln">    <span class="nam">points</span><span class="op">,</span> <span class="nam">eps</span><span class="op">=</span><span class="op">-</span><span class="num">1e-18</span><span class="op">,</span> <span class="nam">sort_by_welfare</span><span class="op">=</span><span class="key">False</span><span class="strut">&nbsp;</span></p>
<p id="t2650" class="pln"><span class="op">)</span> <span class="op">-></span> <span class="nam">Tuple</span><span class="op">[</span><span class="nam">List</span><span class="op">[</span><span class="nam">Tuple</span><span class="op">[</span><span class="nam">float</span><span class="op">]</span><span class="op">]</span><span class="op">,</span> <span class="nam">List</span><span class="op">[</span><span class="nam">int</span><span class="op">]</span><span class="op">]</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2651" class="pln">    <span class="str">"""Finds the pareto-frontier of a set of points</span><span class="strut">&nbsp;</span></p>
<p id="t2652" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2653" class="pln"><span class="str">    Args:</span><span class="strut">&nbsp;</span></p>
<p id="t2654" class="pln"><span class="str">        points: list of points</span><span class="strut">&nbsp;</span></p>
<p id="t2655" class="pln"><span class="str">        eps: A (usually negative) small number to treat as zero during calculations</span><span class="strut">&nbsp;</span></p>
<p id="t2656" class="pln"><span class="str">        sort_by_welfare: If True, the results are sorted descindingly by total welfare</span><span class="strut">&nbsp;</span></p>
<p id="t2657" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2658" class="pln"><span class="str">    Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t2659" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2660" class="pln"><span class="str">    """</span><span class="strut">&nbsp;</span></p>
<p id="t2661" class="stm run hide_run">    <span class="nam">points</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">asarray</span><span class="op">(</span><span class="nam">points</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2662" class="stm run hide_run">    <span class="nam">n</span> <span class="op">=</span> <span class="nam">len</span><span class="op">(</span><span class="nam">points</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2663" class="stm run hide_run">    <span class="nam">indices</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">array</span><span class="op">(</span><span class="nam">range</span><span class="op">(</span><span class="nam">n</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2664" class="stm run hide_run">    <span class="key">for</span> <span class="nam">j</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">points</span><span class="op">.</span><span class="nam">shape</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2665" class="stm run hide_run">        <span class="nam">order</span> <span class="op">=</span> <span class="nam">points</span><span class="op">[</span><span class="op">:</span><span class="op">,</span> <span class="num">0</span><span class="op">]</span><span class="op">.</span><span class="nam">argsort</span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="op">-</span><span class="num">1</span><span class="op">:</span><span class="op">:</span><span class="op">-</span><span class="num">1</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t2666" class="stm run hide_run">        <span class="nam">points</span> <span class="op">=</span> <span class="nam">points</span><span class="op">[</span><span class="nam">order</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t2667" class="stm run hide_run">        <span class="nam">indices</span> <span class="op">=</span> <span class="nam">indices</span><span class="op">[</span><span class="nam">order</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t2668" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2669" class="stm run hide_run">    <span class="nam">frontier</span> <span class="op">=</span> <span class="op">[</span><span class="op">(</span><span class="nam">indices</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">,</span> <span class="nam">points</span><span class="op">[</span><span class="num">0</span><span class="op">,</span> <span class="op">:</span><span class="op">]</span><span class="op">)</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t2670" class="stm run hide_run">    <span class="key">for</span> <span class="nam">p</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="num">1</span><span class="op">,</span> <span class="nam">n</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2671" class="stm run hide_run">        <span class="nam">current</span> <span class="op">=</span> <span class="nam">points</span><span class="op">[</span><span class="nam">p</span><span class="op">,</span> <span class="op">:</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t2672" class="stm run hide_run">        <span class="key">for</span> <span class="nam">i</span><span class="op">,</span> <span class="op">(</span><span class="nam">_</span><span class="op">,</span> <span class="nam">f</span><span class="op">)</span> <span class="key">in</span> <span class="nam">enumerate</span><span class="op">(</span><span class="nam">frontier</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2673" class="stm run hide_run">            <span class="nam">current_better</span><span class="op">,</span> <span class="nam">current_worse</span> <span class="op">=</span> <span class="nam">current</span> <span class="op">></span> <span class="nam">f</span><span class="op">,</span> <span class="nam">current</span> <span class="op">&lt;</span> <span class="nam">f</span><span class="strut">&nbsp;</span></p>
<p id="t2674" class="stm run hide_run">            <span class="key">if</span> <span class="nam">np</span><span class="op">.</span><span class="nam">all</span><span class="op">(</span><span class="nam">current</span> <span class="op">==</span> <span class="nam">f</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2675" class="stm run hide_run">                <span class="key">break</span><span class="strut">&nbsp;</span></p>
<p id="t2676" class="stm run hide_run">            <span class="key">if</span> <span class="key">not</span> <span class="nam">np</span><span class="op">.</span><span class="nam">any</span><span class="op">(</span><span class="nam">current_better</span><span class="op">)</span> <span class="key">and</span> <span class="nam">np</span><span class="op">.</span><span class="nam">any</span><span class="op">(</span><span class="nam">current_worse</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2677" class="pln">                <span class="com"># current is dominated, break</span><span class="strut">&nbsp;</span></p>
<p id="t2678" class="stm run hide_run">                <span class="key">break</span><span class="strut">&nbsp;</span></p>
<p id="t2679" class="stm par run hide_run"><span class="annotate short">2679&#x202F;&#x219B;&#x202F;2672</span><span class="annotate long">line 2679 didn't jump to line 2672, because the condition on line 2679 was never false</span>            <span class="key">if</span> <span class="nam">np</span><span class="op">.</span><span class="nam">any</span><span class="op">(</span><span class="nam">current_better</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2680" class="stm run hide_run">                <span class="key">if</span> <span class="key">not</span> <span class="nam">np</span><span class="op">.</span><span class="nam">any</span><span class="op">(</span><span class="nam">current_worse</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2681" class="pln">                    <span class="com"># current dominates f, append it, remove f and scan for anything else dominated by current</span><span class="strut">&nbsp;</span></p>
<p id="t2682" class="stm run hide_run">                    <span class="key">for</span> <span class="nam">j</span><span class="op">,</span> <span class="op">(</span><span class="nam">_</span><span class="op">,</span> <span class="nam">g</span><span class="op">)</span> <span class="key">in</span> <span class="nam">enumerate</span><span class="op">(</span><span class="nam">frontier</span><span class="op">[</span><span class="nam">i</span> <span class="op">+</span> <span class="num">1</span> <span class="op">:</span><span class="op">]</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2683" class="stm par run hide_run"><span class="annotate short">2683&#x202F;&#x219B;&#x202F;2686</span><span class="annotate long">line 2683 didn't jump to line 2686, because the condition on line 2683 was never false</span>                        <span class="key">if</span> <span class="nam">np</span><span class="op">.</span><span class="nam">all</span><span class="op">(</span><span class="nam">current</span> <span class="op">==</span> <span class="nam">g</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2684" class="stm run hide_run">                            <span class="nam">frontier</span> <span class="op">=</span> <span class="nam">frontier</span><span class="op">[</span><span class="op">:</span><span class="nam">i</span><span class="op">]</span> <span class="op">+</span> <span class="nam">frontier</span><span class="op">[</span><span class="nam">i</span> <span class="op">+</span> <span class="num">1</span> <span class="op">:</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t2685" class="stm run hide_run">                            <span class="key">break</span><span class="strut">&nbsp;</span></p>
<p id="t2686" class="stm mis">                        <span class="key">if</span> <span class="nam">np</span><span class="op">.</span><span class="nam">any</span><span class="op">(</span><span class="nam">current</span> <span class="op">></span> <span class="nam">g</span><span class="op">)</span> <span class="key">and</span> <span class="key">not</span> <span class="nam">np</span><span class="op">.</span><span class="nam">any</span><span class="op">(</span><span class="nam">current</span> <span class="op">&lt;</span> <span class="nam">g</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2687" class="stm mis">                            <span class="nam">frontier</span> <span class="op">=</span> <span class="nam">frontier</span><span class="op">[</span><span class="op">:</span><span class="nam">j</span><span class="op">]</span> <span class="op">+</span> <span class="nam">frontier</span><span class="op">[</span><span class="nam">j</span> <span class="op">+</span> <span class="num">1</span> <span class="op">:</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t2688" class="pln">                    <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2689" class="stm run hide_run">                        <span class="nam">frontier</span><span class="op">[</span><span class="nam">i</span><span class="op">]</span> <span class="op">=</span> <span class="op">(</span><span class="nam">indices</span><span class="op">[</span><span class="nam">p</span><span class="op">]</span><span class="op">,</span> <span class="nam">current</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2690" class="pln">                <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2691" class="pln">                    <span class="com"># neither current nor f dominate each other, append current only if it is not</span><span class="strut">&nbsp;</span></p>
<p id="t2692" class="pln">                    <span class="com"># dominated by anything in frontier</span><span class="strut">&nbsp;</span></p>
<p id="t2693" class="stm run hide_run">                    <span class="key">for</span> <span class="nam">j</span><span class="op">,</span> <span class="op">(</span><span class="nam">_</span><span class="op">,</span> <span class="nam">g</span><span class="op">)</span> <span class="key">in</span> <span class="nam">enumerate</span><span class="op">(</span><span class="nam">frontier</span><span class="op">[</span><span class="nam">i</span> <span class="op">+</span> <span class="num">1</span> <span class="op">:</span><span class="op">]</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2694" class="stm run hide_run">                        <span class="key">if</span> <span class="nam">np</span><span class="op">.</span><span class="nam">all</span><span class="op">(</span><span class="nam">current</span> <span class="op">==</span> <span class="nam">g</span><span class="op">)</span> <span class="key">or</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2695" class="pln">                            <span class="nam">np</span><span class="op">.</span><span class="nam">any</span><span class="op">(</span><span class="nam">g</span> <span class="op">></span> <span class="nam">current</span><span class="op">)</span> <span class="key">and</span> <span class="key">not</span> <span class="nam">np</span><span class="op">.</span><span class="nam">any</span><span class="op">(</span><span class="nam">current</span> <span class="op">></span> <span class="nam">g</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2696" class="pln">                        <span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2697" class="stm run hide_run">                            <span class="key">break</span><span class="strut">&nbsp;</span></p>
<p id="t2698" class="pln">                    <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2699" class="stm run hide_run">                        <span class="nam">frontier</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="op">(</span><span class="nam">indices</span><span class="op">[</span><span class="nam">p</span><span class="op">]</span><span class="op">,</span> <span class="nam">current</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2700" class="stm run hide_run">    <span class="key">if</span> <span class="nam">sort_by_welfare</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2701" class="stm run hide_run">        <span class="nam">welfare</span> <span class="op">=</span> <span class="op">[</span><span class="nam">np</span><span class="op">.</span><span class="nam">sum</span><span class="op">(</span><span class="nam">_</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">)</span> <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">frontier</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t2702" class="stm run hide_run">        <span class="nam">indx</span> <span class="op">=</span> <span class="nam">sorted</span><span class="op">(</span><span class="nam">range</span><span class="op">(</span><span class="nam">len</span><span class="op">(</span><span class="nam">welfare</span><span class="op">)</span><span class="op">)</span><span class="op">,</span> <span class="nam">key</span><span class="op">=</span><span class="key">lambda</span> <span class="nam">x</span><span class="op">:</span> <span class="nam">welfare</span><span class="op">[</span><span class="nam">x</span><span class="op">]</span><span class="op">,</span> <span class="nam">reverse</span><span class="op">=</span><span class="key">True</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2703" class="stm run hide_run">        <span class="nam">frontier</span> <span class="op">=</span> <span class="op">[</span><span class="nam">frontier</span><span class="op">[</span><span class="nam">_</span><span class="op">]</span> <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">indx</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t2704" class="stm run hide_run">    <span class="key">return</span> <span class="op">[</span><span class="nam">tuple</span><span class="op">(</span><span class="nam">_</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">)</span> <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">frontier</span><span class="op">]</span><span class="op">,</span> <span class="op">[</span><span class="nam">_</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">frontier</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t2705" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2706" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2707" class="stm run hide_run"><span class="key">def</span> <span class="nam">pareto_frontier</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2708" class="pln">    <span class="nam">ufuns</span><span class="op">:</span> <span class="nam">Iterable</span><span class="op">[</span><span class="nam">UtilityFunction</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2709" class="pln">    <span class="nam">outcomes</span><span class="op">:</span> <span class="nam">Iterable</span><span class="op">[</span><span class="nam">Outcome</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2710" class="pln">    <span class="nam">issues</span><span class="op">:</span> <span class="nam">Iterable</span><span class="op">[</span><span class="nam">Issue</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2711" class="pln">    <span class="nam">n_discretization</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">int</span><span class="op">]</span> <span class="op">=</span> <span class="num">10</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2712" class="pln">    <span class="nam">sort_by_welfare</span><span class="op">=</span><span class="key">False</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2713" class="pln"><span class="op">)</span> <span class="op">-></span> <span class="nam">Tuple</span><span class="op">[</span><span class="nam">List</span><span class="op">[</span><span class="nam">Tuple</span><span class="op">[</span><span class="nam">float</span><span class="op">]</span><span class="op">]</span><span class="op">,</span> <span class="nam">List</span><span class="op">[</span><span class="nam">int</span><span class="op">]</span><span class="op">]</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2714" class="pln">    <span class="str">"""Finds all pareto-optimal outcomes in the list</span><span class="strut">&nbsp;</span></p>
<p id="t2715" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2716" class="pln"><span class="str">    Args:</span><span class="strut">&nbsp;</span></p>
<p id="t2717" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2718" class="pln"><span class="str">        ufuns: The utility functions</span><span class="strut">&nbsp;</span></p>
<p id="t2719" class="pln"><span class="str">        outcomes: the outcomes to be checked. If None then all possible outcomes from the issues will be checked</span><span class="strut">&nbsp;</span></p>
<p id="t2720" class="pln"><span class="str">        issues: The set of issues (only used when outcomes is None)</span><span class="strut">&nbsp;</span></p>
<p id="t2721" class="pln"><span class="str">        n_discretization: The number of items to discretize each real-dimension into</span><span class="strut">&nbsp;</span></p>
<p id="t2722" class="pln"><span class="str">        sort_by_welfare: If True, the resutls are sorted descendingly by total welfare</span><span class="strut">&nbsp;</span></p>
<p id="t2723" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2724" class="pln"><span class="str">    Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t2725" class="pln"><span class="str">        Two lists of the same length. First list gives the utilities at pareto frontier points and second list gives their indices</span><span class="strut">&nbsp;</span></p>
<p id="t2726" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2727" class="pln"><span class="str">    """</span><span class="strut">&nbsp;</span></p>
<p id="t2728" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2729" class="stm run hide_run">    <span class="nam">ufuns</span> <span class="op">=</span> <span class="nam">list</span><span class="op">(</span><span class="nam">ufuns</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2730" class="stm par run hide_run"><span class="annotate short">2730&#x202F;&#x219B;&#x202F;2731</span><span class="annotate long">line 2730 didn't jump to line 2731, because the condition on line 2730 was never true</span>    <span class="key">if</span> <span class="nam">issues</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2731" class="stm mis">        <span class="nam">issues</span> <span class="op">=</span> <span class="nam">list</span><span class="op">(</span><span class="nam">issues</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2732" class="stm par run hide_run"><span class="annotate short">2732&#x202F;&#x219B;&#x202F;2736</span><span class="annotate long">line 2732 didn't jump to line 2736, because the condition on line 2732 was never false</span>    <span class="key">if</span> <span class="nam">outcomes</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2733" class="stm run hide_run">        <span class="nam">outcomes</span> <span class="op">=</span> <span class="nam">list</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2734" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2735" class="pln">    <span class="com"># calculate all candidate outcomes</span><span class="strut">&nbsp;</span></p>
<p id="t2736" class="stm par run hide_run"><span class="annotate short">2736&#x202F;&#x219B;&#x202F;2737</span><span class="annotate long">line 2736 didn't jump to line 2737, because the condition on line 2736 was never true</span>    <span class="key">if</span> <span class="nam">outcomes</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2737" class="stm mis">        <span class="key">if</span> <span class="nam">issues</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2738" class="stm mis">            <span class="key">return</span> <span class="op">[</span><span class="op">]</span><span class="op">,</span> <span class="op">[</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t2739" class="stm mis">        <span class="nam">outcomes</span> <span class="op">=</span> <span class="nam">itertools</span><span class="op">.</span><span class="nam">product</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2740" class="pln">            <span class="op">*</span><span class="op">[</span><span class="nam">issue</span><span class="op">.</span><span class="nam">alli</span><span class="op">(</span><span class="nam">n</span><span class="op">=</span><span class="nam">n_discretization</span><span class="op">)</span> <span class="key">for</span> <span class="nam">issue</span> <span class="key">in</span> <span class="nam">issues</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t2741" class="pln">        <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2742" class="stm run hide_run">    <span class="nam">points</span> <span class="op">=</span> <span class="op">[</span><span class="op">[</span><span class="nam">ufun</span><span class="op">(</span><span class="nam">outcome</span><span class="op">)</span> <span class="key">for</span> <span class="nam">ufun</span> <span class="key">in</span> <span class="nam">ufuns</span><span class="op">]</span> <span class="key">for</span> <span class="nam">outcome</span> <span class="key">in</span> <span class="nam">outcomes</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t2743" class="stm run hide_run">    <span class="key">return</span> <span class="nam">_pareto_frontier</span><span class="op">(</span><span class="nam">points</span><span class="op">,</span> <span class="nam">sort_by_welfare</span><span class="op">=</span><span class="nam">sort_by_welfare</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2744" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2745" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2746" class="stm run hide_run"><span class="key">def</span> <span class="nam">normalize</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2747" class="pln">    <span class="nam">ufun</span><span class="op">:</span> <span class="nam">UtilityFunction</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2748" class="pln">    <span class="nam">outcomes</span><span class="op">:</span> <span class="nam">Collection</span><span class="op">[</span><span class="nam">Outcome</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2749" class="pln">    <span class="nam">rng</span><span class="op">:</span> <span class="nam">Tuple</span><span class="op">[</span><span class="nam">float</span><span class="op">,</span> <span class="nam">float</span><span class="op">]</span> <span class="op">=</span> <span class="op">(</span><span class="num">0.0</span><span class="op">,</span> <span class="num">1.0</span><span class="op">)</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2750" class="pln">    <span class="nam">epsilon</span><span class="op">:</span> <span class="nam">float</span> <span class="op">=</span> <span class="num">1e-6</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2751" class="pln">    <span class="nam">infeasible_cutoff</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">float</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2752" class="pln"><span class="op">)</span> <span class="op">-></span> <span class="nam">UtilityFunction</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2753" class="pln">    <span class="str">"""Normalizes a utility function to the range [0, 1]</span><span class="strut">&nbsp;</span></p>
<p id="t2754" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2755" class="pln"><span class="str">    Args:</span><span class="strut">&nbsp;</span></p>
<p id="t2756" class="pln"><span class="str">        ufun: The utility function to normalize</span><span class="strut">&nbsp;</span></p>
<p id="t2757" class="pln"><span class="str">        outcomes: A collection of outcomes to normalize for</span><span class="strut">&nbsp;</span></p>
<p id="t2758" class="pln"><span class="str">        rng: range to normalize to. Default is [0, 1]</span><span class="strut">&nbsp;</span></p>
<p id="t2759" class="pln"><span class="str">        epsilon: A small number specifying the resolution</span><span class="strut">&nbsp;</span></p>
<p id="t2760" class="pln"><span class="str">        infeasible_cutoff: A value under which any utility is considered infeasible and is not used in normalization</span><span class="strut">&nbsp;</span></p>
<p id="t2761" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2762" class="pln"><span class="str">    Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t2763" class="pln"><span class="str">        UtilityFunction: A utility function that is guaranteed to be normalized for the set of given outcomes</span><span class="strut">&nbsp;</span></p>
<p id="t2764" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2765" class="pln"><span class="str">    """</span><span class="strut">&nbsp;</span></p>
<p id="t2766" class="stm mis">    <span class="nam">u</span> <span class="op">=</span> <span class="op">[</span><span class="nam">ufun</span><span class="op">(</span><span class="nam">o</span><span class="op">)</span> <span class="key">for</span> <span class="nam">o</span> <span class="key">in</span> <span class="nam">outcomes</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t2767" class="stm mis">    <span class="nam">u</span> <span class="op">=</span> <span class="op">[</span><span class="nam">float</span><span class="op">(</span><span class="nam">_</span><span class="op">)</span> <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">u</span> <span class="key">if</span> <span class="nam">_</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t2768" class="stm mis">    <span class="key">if</span> <span class="nam">infeasible_cutoff</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2769" class="stm mis">        <span class="nam">u</span> <span class="op">=</span> <span class="op">[</span><span class="nam">_</span> <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">u</span> <span class="key">if</span> <span class="nam">_</span> <span class="op">></span> <span class="nam">infeasible_cutoff</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t2770" class="stm mis">    <span class="key">if</span> <span class="nam">len</span><span class="op">(</span><span class="nam">u</span><span class="op">)</span> <span class="op">==</span> <span class="num">0</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2771" class="stm mis">        <span class="key">return</span> <span class="nam">ufun</span><span class="strut">&nbsp;</span></p>
<p id="t2772" class="stm mis">    <span class="nam">mx</span><span class="op">,</span> <span class="nam">mn</span> <span class="op">=</span> <span class="nam">max</span><span class="op">(</span><span class="nam">u</span><span class="op">)</span><span class="op">,</span> <span class="nam">min</span><span class="op">(</span><span class="nam">u</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2773" class="stm mis">    <span class="key">if</span> <span class="nam">abs</span><span class="op">(</span><span class="nam">mx</span> <span class="op">-</span> <span class="num">1.0</span><span class="op">)</span> <span class="op">&lt;</span> <span class="nam">epsilon</span> <span class="key">and</span> <span class="nam">abs</span><span class="op">(</span><span class="nam">mn</span><span class="op">)</span> <span class="op">&lt;</span> <span class="nam">epsilon</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2774" class="stm mis">        <span class="key">return</span> <span class="nam">ufun</span><span class="strut">&nbsp;</span></p>
<p id="t2775" class="stm mis">    <span class="key">if</span> <span class="nam">mx</span> <span class="op">==</span> <span class="nam">mn</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2776" class="stm mis">        <span class="key">if</span> <span class="op">-</span><span class="nam">epsilon</span> <span class="op">&lt;=</span> <span class="nam">mn</span> <span class="op">&lt;=</span> <span class="num">1</span> <span class="op">+</span> <span class="nam">epsilon</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2777" class="stm mis">            <span class="key">return</span> <span class="nam">ufun</span><span class="strut">&nbsp;</span></p>
<p id="t2778" class="pln">        <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2779" class="stm mis">            <span class="nam">r</span> <span class="op">=</span> <span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2780" class="pln">                <span class="nam">float</span><span class="op">(</span><span class="nam">ufun</span><span class="op">.</span><span class="nam">reserved_value</span><span class="op">)</span> <span class="op">/</span> <span class="nam">mn</span><span class="strut">&nbsp;</span></p>
<p id="t2781" class="pln">                <span class="key">if</span> <span class="nam">ufun</span><span class="op">.</span><span class="nam">reserved_value</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span> <span class="key">and</span> <span class="nam">mn</span> <span class="op">!=</span> <span class="num">0.0</span><span class="strut">&nbsp;</span></p>
<p id="t2782" class="pln">                <span class="key">else</span> <span class="num">0.0</span><span class="strut">&nbsp;</span></p>
<p id="t2783" class="pln">            <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2784" class="stm mis">            <span class="key">if</span> <span class="nam">infeasible_cutoff</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2785" class="stm mis">                <span class="key">return</span> <span class="nam">ComplexNonlinearUtilityFunction</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2786" class="pln">                    <span class="nam">ufuns</span><span class="op">=</span><span class="op">[</span><span class="nam">ufun</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2787" class="pln">                    <span class="nam">combination_function</span><span class="op">=</span><span class="key">lambda</span> <span class="nam">x</span><span class="op">:</span> <span class="nam">infeasible_cutoff</span><span class="strut">&nbsp;</span></p>
<p id="t2788" class="pln">                    <span class="key">if</span> <span class="nam">x</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="key">is</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t2789" class="pln">                    <span class="key">else</span> <span class="nam">x</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t2790" class="pln">                    <span class="key">if</span> <span class="nam">x</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="op">&lt;</span> <span class="nam">infeasible_cutoff</span><span class="strut">&nbsp;</span></p>
<p id="t2791" class="pln">                    <span class="key">else</span> <span class="num">0.5</span> <span class="op">*</span> <span class="nam">x</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="op">/</span> <span class="nam">mn</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2792" class="pln">                <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2793" class="pln">            <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2794" class="stm mis">                <span class="key">return</span> <span class="nam">ComplexWeightedUtilityFunction</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2795" class="pln">                    <span class="nam">ufuns</span><span class="op">=</span><span class="op">[</span><span class="nam">ufun</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2796" class="pln">                    <span class="nam">weights</span><span class="op">=</span><span class="op">[</span><span class="num">0.5</span> <span class="op">/</span> <span class="nam">mn</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2797" class="pln">                    <span class="nam">name</span><span class="op">=</span><span class="nam">ufun</span><span class="op">.</span><span class="nam">name</span> <span class="op">+</span> <span class="str">"-normalized"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2798" class="pln">                    <span class="nam">reserved_value</span><span class="op">=</span><span class="nam">r</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2799" class="pln">                    <span class="nam">ami</span><span class="op">=</span><span class="nam">ufun</span><span class="op">.</span><span class="nam">ami</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2800" class="pln">                <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2801" class="stm mis">    <span class="nam">scale</span> <span class="op">=</span> <span class="op">(</span><span class="nam">rng</span><span class="op">[</span><span class="num">1</span><span class="op">]</span> <span class="op">-</span> <span class="nam">rng</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="nam">mx</span> <span class="op">-</span> <span class="nam">mn</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2802" class="stm mis">    <span class="nam">r</span> <span class="op">=</span> <span class="nam">scale</span> <span class="op">*</span> <span class="op">(</span><span class="nam">ufun</span><span class="op">.</span><span class="nam">reserved_value</span> <span class="op">-</span> <span class="nam">mn</span><span class="op">)</span> <span class="key">if</span> <span class="nam">ufun</span><span class="op">.</span><span class="nam">reserved_value</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span> <span class="key">else</span> <span class="num">0.0</span><span class="strut">&nbsp;</span></p>
<p id="t2803" class="stm mis">    <span class="key">if</span> <span class="nam">infeasible_cutoff</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2804" class="stm mis">        <span class="key">return</span> <span class="nam">ComplexNonlinearUtilityFunction</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2805" class="pln">            <span class="nam">ufuns</span><span class="op">=</span><span class="op">[</span><span class="nam">ufun</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2806" class="pln">            <span class="nam">combination_function</span><span class="op">=</span><span class="key">lambda</span> <span class="nam">x</span><span class="op">:</span> <span class="nam">infeasible_cutoff</span><span class="strut">&nbsp;</span></p>
<p id="t2807" class="pln">            <span class="key">if</span> <span class="nam">x</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="key">is</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>
<p id="t2808" class="pln">            <span class="key">else</span> <span class="nam">x</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t2809" class="pln">            <span class="key">if</span> <span class="nam">x</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="op">&lt;</span> <span class="nam">infeasible_cutoff</span><span class="strut">&nbsp;</span></p>
<p id="t2810" class="pln">            <span class="key">else</span> <span class="nam">scale</span> <span class="op">*</span> <span class="op">(</span><span class="nam">x</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="op">-</span> <span class="nam">mn</span><span class="op">)</span> <span class="op">+</span> <span class="nam">rng</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2811" class="pln">        <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2812" class="pln">    <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2813" class="stm mis">        <span class="key">return</span> <span class="nam">ComplexWeightedUtilityFunction</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2814" class="pln">            <span class="nam">ufuns</span><span class="op">=</span><span class="op">[</span><span class="nam">ufun</span><span class="op">,</span> <span class="nam">ConstUFun</span><span class="op">(</span><span class="op">-</span><span class="nam">mn</span> <span class="op">+</span> <span class="nam">rng</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="op">/</span> <span class="nam">scale</span><span class="op">)</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2815" class="pln">            <span class="nam">weights</span><span class="op">=</span><span class="op">[</span><span class="nam">scale</span><span class="op">,</span> <span class="nam">scale</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2816" class="pln">            <span class="nam">name</span><span class="op">=</span><span class="nam">ufun</span><span class="op">.</span><span class="nam">name</span> <span class="op">+</span> <span class="str">"-normalized"</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2817" class="pln">            <span class="nam">reserved_value</span><span class="op">=</span><span class="nam">r</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2818" class="pln">            <span class="nam">ami</span><span class="op">=</span><span class="nam">ufun</span><span class="op">.</span><span class="nam">ami</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2819" class="pln">        <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2820" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2821" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2822" class="stm run hide_run"><span class="key">def</span> <span class="nam">utility_range</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2823" class="pln">    <span class="nam">ufun</span><span class="op">:</span> <span class="nam">UtilityFunction</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2824" class="pln">    <span class="nam">issues</span><span class="op">:</span> <span class="nam">List</span><span class="op">[</span><span class="nam">Issue</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2825" class="pln">    <span class="nam">outcomes</span><span class="op">:</span> <span class="nam">Collection</span><span class="op">[</span><span class="nam">Outcome</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2826" class="pln">    <span class="nam">infeasible_cutoff</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">float</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2827" class="pln">    <span class="nam">return_outcomes</span><span class="op">=</span><span class="key">False</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2828" class="pln"><span class="op">)</span> <span class="op">-></span> <span class="nam">Union</span><span class="op">[</span><span class="strut">&nbsp;</span></p>
<p id="t2829" class="pln">    <span class="nam">Tuple</span><span class="op">[</span><span class="nam">UtilityValue</span><span class="op">,</span> <span class="nam">UtilityValue</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2830" class="pln">    <span class="nam">Tuple</span><span class="op">[</span><span class="nam">UtilityValue</span><span class="op">,</span> <span class="nam">UtilityValue</span><span class="op">,</span> <span class="nam">Outcome</span><span class="op">,</span> <span class="nam">Outcome</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2831" class="pln"><span class="op">]</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2832" class="pln">    <span class="str">"""Finds the range of the given utility function for the given outcomes</span><span class="strut">&nbsp;</span></p>
<p id="t2833" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2834" class="pln"><span class="str">    Args:</span><span class="strut">&nbsp;</span></p>
<p id="t2835" class="pln"><span class="str">        ufun: The utility function</span><span class="strut">&nbsp;</span></p>
<p id="t2836" class="pln"><span class="str">        issues: List of issues (optional)</span><span class="strut">&nbsp;</span></p>
<p id="t2837" class="pln"><span class="str">        outcomes: A collection of outcomes (optional)</span><span class="strut">&nbsp;</span></p>
<p id="t2838" class="pln"><span class="str">        infeasible_cutoff: A value under which any utility is considered infeasible and is not used in calculation</span><span class="strut">&nbsp;</span></p>
<p id="t2839" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2840" class="pln"><span class="str">    Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t2841" class="pln"><span class="str">        UtilityFunction: A utility function that is guaranteed to be normalized for the set of given outcomes</span><span class="strut">&nbsp;</span></p>
<p id="t2842" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2843" class="pln"><span class="str">    """</span><span class="strut">&nbsp;</span></p>
<p id="t2844" class="stm run hide_run">    <span class="key">if</span> <span class="nam">outcomes</span> <span class="key">is</span> <span class="key">None</span> <span class="key">and</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">ufun</span><span class="op">,</span> <span class="nam">LinearUtilityFunction</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2845" class="pln">        <span class="com"># The minimum and maximum must be at one of the edges of the outcome space. Just enumerate them</span><span class="strut">&nbsp;</span></p>
<p id="t2846" class="stm run hide_run">        <span class="nam">ranges</span> <span class="op">=</span> <span class="op">[</span><span class="op">(</span><span class="nam">i</span><span class="op">.</span><span class="nam">min_value</span><span class="op">,</span> <span class="nam">i</span><span class="op">.</span><span class="nam">max_value</span><span class="op">)</span> <span class="key">for</span> <span class="nam">i</span> <span class="key">in</span> <span class="nam">issues</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t2847" class="stm run hide_run">        <span class="nam">u</span> <span class="op">=</span> <span class="nam">sorted</span><span class="op">(</span><span class="op">[</span><span class="op">(</span><span class="nam">ufun</span><span class="op">(</span><span class="nam">outcome</span><span class="op">)</span><span class="op">,</span> <span class="nam">outcome</span><span class="op">)</span> <span class="key">for</span> <span class="nam">outcome</span> <span class="key">in</span> <span class="nam">itertools</span><span class="op">.</span><span class="nam">product</span><span class="op">(</span><span class="op">*</span><span class="nam">ranges</span><span class="op">)</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2848" class="stm run hide_run">        <span class="key">return</span> <span class="nam">u</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">,</span> <span class="nam">u</span><span class="op">[</span><span class="op">-</span><span class="num">1</span><span class="op">]</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">,</span> <span class="nam">u</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">,</span> <span class="nam">u</span><span class="op">[</span><span class="op">-</span><span class="num">1</span><span class="op">]</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t2849" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2850" class="stm par run hide_run"><span class="annotate short">2850&#x202F;&#x219B;&#x202F;2857</span><span class="annotate long">line 2850 didn't jump to line 2857, because the condition on line 2850 was never false</span>    <span class="key">if</span> <span class="nam">outcomes</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2851" class="stm run hide_run">        <span class="nam">outcomes</span> <span class="op">=</span> <span class="nam">Issue</span><span class="op">.</span><span class="nam">sample</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2852" class="pln">            <span class="nam">issues</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2853" class="pln">            <span class="nam">n_outcomes</span><span class="op">=</span><span class="nam">len</span><span class="op">(</span><span class="nam">issues</span><span class="op">)</span> <span class="op">*</span> <span class="num">100</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2854" class="pln">            <span class="nam">with_replacement</span><span class="op">=</span><span class="key">True</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2855" class="pln">            <span class="nam">fail_if_not_enough</span><span class="op">=</span><span class="key">False</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2856" class="pln">        <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2857" class="stm run hide_run">    <span class="nam">u</span> <span class="op">=</span> <span class="op">[</span><span class="nam">ufun</span><span class="op">(</span><span class="nam">o</span><span class="op">)</span> <span class="key">for</span> <span class="nam">o</span> <span class="key">in</span> <span class="nam">outcomes</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t2858" class="stm run hide_run">    <span class="nam">u</span> <span class="op">=</span> <span class="op">[</span><span class="nam">float</span><span class="op">(</span><span class="nam">_</span><span class="op">)</span> <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">u</span> <span class="key">if</span> <span class="nam">_</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t2859" class="stm par run hide_run"><span class="annotate short">2859&#x202F;&#x219B;&#x202F;2860</span><span class="annotate long">line 2859 didn't jump to line 2860, because the condition on line 2859 was never true</span>    <span class="key">if</span> <span class="nam">infeasible_cutoff</span> <span class="key">is</span> <span class="key">not</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2860" class="stm mis">        <span class="key">if</span> <span class="nam">return_outcomes</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2861" class="stm mis">            <span class="nam">outcomes</span> <span class="op">=</span> <span class="op">[</span><span class="nam">o</span> <span class="key">for</span> <span class="nam">o</span><span class="op">,</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">zip</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">,</span> <span class="nam">u</span><span class="op">)</span> <span class="key">if</span> <span class="nam">_</span> <span class="op">></span> <span class="nam">infeasible_cutoff</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t2862" class="stm mis">        <span class="nam">u</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">array</span><span class="op">(</span><span class="op">[</span><span class="nam">_</span> <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">u</span> <span class="key">if</span> <span class="nam">_</span> <span class="op">></span> <span class="nam">infeasible_cutoff</span><span class="op">]</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2863" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2864" class="stm par run hide_run"><span class="annotate short">2864&#x202F;&#x219B;&#x202F;2865</span><span class="annotate long">line 2864 didn't jump to line 2865, because the condition on line 2864 was never true</span>    <span class="key">if</span> <span class="nam">len</span><span class="op">(</span><span class="nam">u</span><span class="op">)</span> <span class="op">==</span> <span class="num">0</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2865" class="stm mis">        <span class="key">return</span> <span class="nam">ufun</span><span class="strut">&nbsp;</span></p>
<p id="t2866" class="stm par run hide_run"><span class="annotate short">2866&#x202F;&#x219B;&#x202F;2867</span><span class="annotate long">line 2866 didn't jump to line 2867, because the condition on line 2866 was never true</span>    <span class="key">if</span> <span class="nam">return_outcomes</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2867" class="stm mis">        <span class="nam">minloc</span><span class="op">,</span> <span class="nam">maxloc</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">argmin</span><span class="op">(</span><span class="nam">u</span><span class="op">)</span><span class="op">,</span> <span class="nam">np</span><span class="op">.</span><span class="nam">argmax</span><span class="op">(</span><span class="nam">u</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2868" class="stm mis">        <span class="key">return</span> <span class="nam">u</span><span class="op">[</span><span class="nam">minloc</span><span class="op">]</span><span class="op">,</span> <span class="nam">u</span><span class="op">[</span><span class="nam">maxloc</span><span class="op">]</span><span class="op">,</span> <span class="nam">outcomes</span><span class="op">[</span><span class="nam">minloc</span><span class="op">]</span><span class="op">,</span> <span class="nam">outcomes</span><span class="op">[</span><span class="nam">maxloc</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t2869" class="stm run hide_run">    <span class="key">return</span> <span class="nam">float</span><span class="op">(</span><span class="nam">np</span><span class="op">.</span><span class="nam">min</span><span class="op">(</span><span class="nam">u</span><span class="op">)</span><span class="op">)</span><span class="op">,</span> <span class="nam">float</span><span class="op">(</span><span class="nam">np</span><span class="op">.</span><span class="nam">max</span><span class="op">(</span><span class="nam">u</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2870" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2871" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2872" class="stm run hide_run"><span class="key">class</span> <span class="nam">JavaUtilityFunction</span><span class="op">(</span><span class="nam">UtilityFunction</span><span class="op">,</span> <span class="nam">JavaCallerMixin</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2873" class="pln">    <span class="str">"""A utility function implemented in Java"""</span><span class="strut">&nbsp;</span></p>
<p id="t2874" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2875" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">java_object</span><span class="op">,</span> <span class="nam">java_class_name</span><span class="op">:</span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">str</span><span class="op">]</span><span class="op">,</span> <span class="op">*</span><span class="nam">args</span><span class="op">,</span> <span class="op">**</span><span class="nam">kwargs</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2876" class="stm mis">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">__init__</span><span class="op">(</span><span class="op">*</span><span class="nam">args</span><span class="op">,</span> <span class="op">**</span><span class="nam">kwargs</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2877" class="stm mis">        <span class="nam">self</span><span class="op">.</span><span class="nam">init_java_bridge</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2878" class="pln">            <span class="nam">java_object</span><span class="op">=</span><span class="nam">java_object</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2879" class="pln">            <span class="nam">java_class_name</span><span class="op">=</span><span class="nam">java_class_name</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2880" class="pln">            <span class="nam">auto_load_java</span><span class="op">=</span><span class="key">False</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2881" class="pln">        <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2882" class="stm mis">        <span class="key">if</span> <span class="nam">java_object</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2883" class="stm mis">            <span class="nam">self</span><span class="op">.</span><span class="nam">_java_object</span><span class="op">.</span><span class="nam">fromMap</span><span class="op">(</span><span class="nam">to_java</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2884" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2885" class="stm run hide_run">    <span class="key">def</span> <span class="nam">__call__</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">offer</span><span class="op">:</span> <span class="nam">Outcome</span><span class="op">)</span> <span class="op">-></span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">UtilityValue</span><span class="op">]</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2886" class="stm mis">        <span class="key">return</span> <span class="nam">self</span><span class="op">.</span><span class="nam">_java_object</span><span class="op">.</span><span class="nam">call</span><span class="op">(</span><span class="nam">to_java</span><span class="op">(</span><span class="nam">outcome_as_dict</span><span class="op">(</span><span class="nam">offer</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2887" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2888" class="stm run hide_run">    <span class="key">def</span> <span class="nam">xml</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">issues</span><span class="op">:</span> <span class="nam">List</span><span class="op">[</span><span class="nam">Issue</span><span class="op">]</span><span class="op">)</span> <span class="op">-></span> <span class="nam">str</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2889" class="stm mis">        <span class="key">return</span> <span class="str">"Java UFun"</span><span class="strut">&nbsp;</span></p>
<p id="t2890" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2891" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2892" class="stm run hide_run"><span class="key">def</span> <span class="nam">outcome_with_utility</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2893" class="pln">    <span class="nam">ufun</span><span class="op">:</span> <span class="nam">UtilityFunction</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2894" class="pln">    <span class="nam">rng</span><span class="op">:</span> <span class="nam">Tuple</span><span class="op">[</span><span class="nam">float</span><span class="op">,</span> <span class="nam">float</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2895" class="pln">    <span class="nam">issues</span><span class="op">:</span> <span class="nam">List</span><span class="op">[</span><span class="nam">Issue</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2896" class="pln">    <span class="nam">outcomes</span><span class="op">:</span> <span class="nam">List</span><span class="op">[</span><span class="nam">Outcome</span><span class="op">]</span> <span class="op">=</span> <span class="key">None</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2897" class="pln">    <span class="nam">n_trials</span><span class="op">:</span> <span class="nam">int</span> <span class="op">=</span> <span class="num">100</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2898" class="pln">    <span class="nam">astype</span><span class="op">:</span> <span class="nam">Type</span> <span class="op">=</span> <span class="nam">dict</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2899" class="pln"><span class="op">)</span> <span class="op">-></span> <span class="nam">Optional</span><span class="op">[</span><span class="nam">Outcome</span><span class="op">]</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2900" class="pln">    <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t2901" class="pln"><span class="str">    Gets one outcome within the given utility range or None on failure</span><span class="strut">&nbsp;</span></p>
<p id="t2902" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2903" class="pln"><span class="str">    Args:</span><span class="strut">&nbsp;</span></p>
<p id="t2904" class="pln"><span class="str">        ufun: The utility function</span><span class="strut">&nbsp;</span></p>
<p id="t2905" class="pln"><span class="str">        rng: The utility range</span><span class="strut">&nbsp;</span></p>
<p id="t2906" class="pln"><span class="str">        issues: The issues the utility function is defined on</span><span class="strut">&nbsp;</span></p>
<p id="t2907" class="pln"><span class="str">        outcomes: The outcomes to sample from</span><span class="strut">&nbsp;</span></p>
<p id="t2908" class="pln"><span class="str">        n_trials: The maximum number of trials</span><span class="strut">&nbsp;</span></p>
<p id="t2909" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2910" class="pln"><span class="str">    Returns:</span><span class="strut">&nbsp;</span></p>
<p id="t2911" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2912" class="pln"><span class="str">        - Either issues, or outcomes should be given but not both</span><span class="strut">&nbsp;</span></p>
<p id="t2913" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t2914" class="pln"><span class="str">    """</span><span class="strut">&nbsp;</span></p>
<p id="t2915" class="stm par run hide_run"><span class="annotate short">2915&#x202F;&#x219B;&#x202F;2923</span><span class="annotate long">line 2915 didn't jump to line 2923, because the condition on line 2915 was never false</span>    <span class="key">if</span> <span class="nam">outcomes</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2916" class="stm run hide_run">        <span class="nam">outcomes</span> <span class="op">=</span> <span class="nam">Issue</span><span class="op">.</span><span class="nam">sample</span><span class="op">(</span><span class="strut">&nbsp;</span></p>
<p id="t2917" class="pln">            <span class="nam">issues</span><span class="op">=</span><span class="nam">issues</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2918" class="pln">            <span class="nam">n_outcomes</span><span class="op">=</span><span class="nam">n_trials</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2919" class="pln">            <span class="nam">astype</span><span class="op">=</span><span class="nam">astype</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2920" class="pln">            <span class="nam">with_replacement</span><span class="op">=</span><span class="key">False</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2921" class="pln">            <span class="nam">fail_if_not_enough</span><span class="op">=</span><span class="key">False</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t2922" class="pln">        <span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2923" class="stm run hide_run">    <span class="nam">n</span> <span class="op">=</span> <span class="nam">min</span><span class="op">(</span><span class="nam">len</span><span class="op">(</span><span class="nam">outcomes</span><span class="op">)</span><span class="op">,</span> <span class="nam">n_trials</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2924" class="stm run hide_run">    <span class="nam">mn</span><span class="op">,</span> <span class="nam">mx</span> <span class="op">=</span> <span class="nam">rng</span><span class="strut">&nbsp;</span></p>
<p id="t2925" class="stm par run hide_run"><span class="annotate short">2925&#x202F;&#x219B;&#x202F;2926</span><span class="annotate long">line 2925 didn't jump to line 2926, because the condition on line 2925 was never true</span>    <span class="key">if</span> <span class="nam">mn</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2926" class="stm mis">        <span class="nam">mn</span> <span class="op">=</span> <span class="nam">float</span><span class="op">(</span><span class="str">"-inf"</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2927" class="stm par run hide_run"><span class="annotate short">2927&#x202F;&#x219B;&#x202F;2928</span><span class="annotate long">line 2927 didn't jump to line 2928, because the condition on line 2927 was never true</span>    <span class="key">if</span> <span class="nam">mx</span> <span class="key">is</span> <span class="key">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2928" class="stm mis">        <span class="nam">mx</span> <span class="op">=</span> <span class="nam">float</span><span class="op">(</span><span class="str">"inf"</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t2929" class="stm run hide_run">    <span class="key">for</span> <span class="nam">i</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">n</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2930" class="stm run hide_run">        <span class="nam">o</span> <span class="op">=</span> <span class="nam">outcomes</span><span class="op">[</span><span class="nam">i</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t2931" class="stm run hide_run">        <span class="key">if</span> <span class="nam">mn</span> <span class="op">&lt;=</span> <span class="nam">ufun</span><span class="op">(</span><span class="nam">o</span><span class="op">)</span> <span class="op">&lt;=</span> <span class="nam">mx</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t2932" class="stm run hide_run">            <span class="key">return</span> <span class="nam">o</span><span class="strut">&nbsp;</span></p>
<p id="t2933" class="stm run hide_run">    <span class="key">return</span> <span class="key">None</span><span class="strut">&nbsp;</span></p>

            </td>
        </tr>
    </table>
</div>

<div id="footer">
    <div class="content">
        <p>
            <a class="nav" href="index.html">&#xab; index</a> &nbsp; &nbsp; <a class="nav" href="https://coverage.readthedocs.io">coverage.py v4.5.4</a>,
            created at 2019-11-25 10:59
        </p>
    </div>
</div>

</body>
</html>
